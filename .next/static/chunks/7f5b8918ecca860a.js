(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,56403,80438,90757,e=>{"use strict";var t=e.i(43476),r=e.i(71645);function s({isOpen:e,parentFolderName:s,onClose:a,onCreate:l}){let[i,n]=(0,r.useState)(""),[o,d]=(0,r.useState)(null),[c,u]=(0,r.useState)(!1),m=(0,r.useRef)(null);(0,r.useEffect)(()=>{e&&(n(""),d(null),setTimeout(()=>m.current?.focus(),100))},[e]),(0,r.useEffect)(()=>{let t=t=>{"Escape"===t.key&&e&&a()};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e,a]);let h=async e=>{e.preventDefault();let t=i.trim();if(!t)return void d("Folder name is required");if(t.includes("/")||t.includes("\\"))return void d("Folder name cannot contain slashes");u(!0),d(null);try{await l(t),a()}catch(e){d(e instanceof Error?e.message:"Failed to create folder")}finally{u(!1)}};return e?(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:a,"aria-hidden":"true"}),(0,t.jsxs)("div",{role:"dialog","aria-modal":"true","aria-labelledby":"create-folder-title",className:"relative z-10 w-full max-w-md rounded-lg bg-white p-6 shadow-xl",children:[(0,t.jsx)("h2",{id:"create-folder-title",className:"text-lg font-semibold text-gray-900",children:"Create New Folder"}),s&&(0,t.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["Creating in: ",s]}),(0,t.jsxs)("form",{onSubmit:h,className:"mt-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"folder-name",className:"block text-sm font-medium text-gray-700",children:"Folder Name"}),(0,t.jsx)("input",{ref:m,id:"folder-name",type:"text",value:i,onChange:e=>n(e.target.value),placeholder:"Enter folder name",className:"mt-1 block w-full rounded-lg border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",disabled:c}),o&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:o})]}),(0,t.jsxs)("div",{className:"mt-6 flex justify-end gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:a,disabled:c,className:"rounded-lg border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 disabled:opacity-50",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:c||!i.trim(),className:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50",children:c?"Creating...":"Create Folder"})]})]})]})]}):null}function a({isOpen:e,currentName:s,onClose:a,onRename:l}){let[i,n]=(0,r.useState)(s),[o,d]=(0,r.useState)(null),[c,u]=(0,r.useState)(!1),m=(0,r.useRef)(null);(0,r.useEffect)(()=>{e&&(n(s),d(null),setTimeout(()=>{m.current?.focus(),m.current?.select()},100))},[e,s]),(0,r.useEffect)(()=>{let t=t=>{"Escape"===t.key&&e&&a()};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e,a]);let h=async e=>{e.preventDefault();let t=i.trim();if(!t)return void d("Folder name is required");if(t===s)return void a();if(t.includes("/")||t.includes("\\"))return void d("Folder name cannot contain slashes");u(!0),d(null);try{await l(t),a()}catch(e){d(e instanceof Error?e.message:"Failed to rename folder")}finally{u(!1)}};return e?(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:a,"aria-hidden":"true"}),(0,t.jsxs)("div",{role:"dialog","aria-modal":"true","aria-labelledby":"rename-folder-title",className:"relative z-10 w-full max-w-md rounded-lg bg-white p-6 shadow-xl",children:[(0,t.jsx)("h2",{id:"rename-folder-title",className:"text-lg font-semibold text-gray-900",children:"Rename Folder"}),(0,t.jsxs)("form",{onSubmit:h,className:"mt-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"new-folder-name",className:"block text-sm font-medium text-gray-700",children:"New Name"}),(0,t.jsx)("input",{ref:m,id:"new-folder-name",type:"text",value:i,onChange:e=>n(e.target.value),placeholder:"Enter new folder name",className:"mt-1 block w-full rounded-lg border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",disabled:c}),o&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:o})]}),(0,t.jsxs)("div",{className:"mt-6 flex justify-end gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:a,disabled:c,className:"rounded-lg border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 disabled:opacity-50",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:c||!i.trim(),className:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50",children:c?"Renaming...":"Rename"})]})]})]})]}):null}function l({isOpen:e,folder:s,allFolders:a,onClose:l,onMove:i}){let[n,o]=(0,r.useState)(null),[d,c]=(0,r.useState)(null),[u,m]=(0,r.useState)(!1);(0,r.useEffect)(()=>{e&&s&&(o(s.parent_id),c(null))},[e,s]),(0,r.useEffect)(()=>{let t=t=>{"Escape"===t.key&&e&&l()};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e,l]);let h=async e=>{if(e.preventDefault(),s){if(n===s.parent_id)return void l();m(!0),c(null);try{await i(n),l()}catch(e){c(e instanceof Error?e.message:"Failed to move folder")}finally{m(!1)}}};if(!e||!s)return null;let f=(()=>{if(!s)return[];let e=s.path;return a.filter(t=>!(t.id===s.id||t.path.startsWith(e+"/")))})();return(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:l,"aria-hidden":"true"}),(0,t.jsxs)("div",{role:"dialog","aria-modal":"true","aria-labelledby":"move-folder-title",className:"relative z-10 w-full max-w-md rounded-lg bg-white p-6 shadow-xl",children:[(0,t.jsx)("h2",{id:"move-folder-title",className:"text-lg font-semibold text-gray-900",children:"Move Folder"}),(0,t.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["Moving: ",(0,t.jsx)("span",{className:"font-medium",children:s.name})]}),(0,t.jsxs)("form",{onSubmit:h,className:"mt-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"destination-folder",className:"block text-sm font-medium text-gray-700",children:"Destination"}),(0,t.jsxs)("select",{id:"destination-folder",value:n||"",onChange:e=>o(e.target.value||null),className:"mt-1 block w-full rounded-lg border border-gray-300 px-3 py-2 text-gray-900 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",disabled:u,children:[(0,t.jsx)("option",{value:"",children:"Root (No parent)"}),f.map(e=>(0,t.jsx)("option",{value:e.id,children:e.path},e.id))]}),d&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:d})]}),(0,t.jsxs)("div",{className:"mt-6 flex justify-end gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:l,disabled:u,className:"rounded-lg border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 disabled:opacity-50",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:u,className:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50",children:u?"Moving...":"Move"})]})]})]})]})}e.s(["CreateFolderModal",()=>s],56403),e.s(["RenameFolderModal",()=>a],80438),e.s(["MoveFolderModal",()=>l],90757)},87145,e=>{"use strict";var t=e.i(71645),r=e.i(14985);function s(){return{authenticatedFetch:(0,t.useCallback)(async(e,t={})=>{let s=(0,r.getFirebaseAuth)().currentUser;if(!s)throw Error("User is not authenticated");let a=await s.getIdToken(),l=new Headers(t.headers);return l.set("Authorization",`Bearer ${a}`),fetch(e,{...t,headers:l})},[])}}async function a(){let e=(0,r.getFirebaseAuth)().currentUser;return e?e.getIdToken():null}async function l(e){let t=new Headers(e),r=await a();return r&&t.set("Authorization",`Bearer ${r}`),t}e.s(["createAuthHeaders",()=>l,"getIdToken",()=>a,"useAuthenticatedFetch",()=>s])},18339,e=>{"use strict";var t=e.i(71645),r=e.i(84093),s=e.i(87145);async function a(){let e=await (0,s.getIdToken)();if(!e)throw Error("Not authenticated");return{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}function l(){let{user:e}=(0,r.useAuth)(),[s,l]=(0,t.useState)([]),[i,n]=(0,t.useState)(!1),[o,d]=(0,t.useState)(null),[c,u]=(0,t.useState)({currentPage:1,pageSize:20,totalItems:0,totalPages:0}),m=(0,t.useCallback)(e=>{u(t=>({...t,currentPage:e}))},[]),h=(0,t.useCallback)(e=>{u(t=>({...t,pageSize:e,currentPage:1}))},[]),f=(0,t.useCallback)(async t=>{if(e?.uid){n(!0),d(null);try{let e=await a(),r=new URLSearchParams;void 0!==t&&r.append("parentId",null===t?"null":t);let s=await fetch(`/api/folders?${r}`,{headers:e}),i=await s.json();if(!s.ok)throw Error(i.error||"Failed to fetch folders");l(i.folders),u(e=>({...e,totalItems:i.folders.length,totalPages:1,currentPage:1}))}catch(e){d(e instanceof Error?e.message:"Failed to fetch folders")}finally{n(!1)}}},[e?.uid]),g=(0,t.useCallback)(async(t,r,s)=>{if(!e?.uid)return;let i=s??c.pageSize,o=r??c.currentPage;n(!0),d(null);try{let e=await a(),r=new URLSearchParams({page:o.toString(),pageSize:i.toString()});void 0!==t&&r.append("parentId",null===t?"null":t);let s=await fetch(`/api/folders?${r}`,{headers:e}),n=await s.json();if(!s.ok)throw Error(n.error||"Failed to fetch folders");l(n.folders),u({currentPage:o,pageSize:i,totalItems:n.total,totalPages:Math.ceil(n.total/i)})}catch(e){d(e instanceof Error?e.message:"Failed to fetch folders")}finally{n(!1)}},[e?.uid,c.pageSize,c.currentPage]),x=(0,t.useCallback)(async t=>{if(!e?.uid)return[];try{let e=await a(),r=await fetch(`/api/folders/${t}/path`,{headers:e}),s=await r.json();if(!r.ok)throw Error(s.error||"Failed to fetch folder path");return s.path}catch(e){return d(e instanceof Error?e.message:"Failed to fetch folder path"),[]}},[e?.uid]),p=(0,t.useCallback)(async(t,r)=>{if(!e?.uid)return null;n(!0),d(null);try{let e=await a(),s=await fetch("/api/folders",{method:"POST",headers:e,body:JSON.stringify({name:t,parentId:r})}),i=await s.json();if(!s.ok)throw Error(i.error||"Failed to create folder");return l(e=>[...e,i.folder]),i.folder}catch(e){return d(e instanceof Error?e.message:"Failed to create folder"),null}finally{n(!1)}},[e?.uid]),b=(0,t.useCallback)(async(t,r)=>{if(!e?.uid)return null;n(!0),d(null);try{let e=await a(),s=await fetch(`/api/folders/${t}`,{method:"PUT",headers:e,body:JSON.stringify({name:r})}),i=await s.json();if(!s.ok)throw Error(i.error||"Failed to rename folder");return l(e=>e.map(e=>e.id===t?i.folder:e)),i.folder}catch(e){return d(e instanceof Error?e.message:"Failed to rename folder"),null}finally{n(!1)}},[e?.uid]),v=(0,t.useCallback)(async t=>{if(!e?.uid)return!1;n(!0),d(null);try{let e=await a(),r=await fetch(`/api/folders/${t}`,{method:"DELETE",headers:e}),s=await r.json();if(!r.ok)throw Error(s.error||"Failed to delete folder");return l(e=>e.filter(e=>e.id!==t)),!0}catch(e){return d(e instanceof Error?e.message:"Failed to delete folder"),!1}finally{n(!1)}},[e?.uid]),y=(0,t.useCallback)(async(t,r)=>{if(!e?.uid)return null;n(!0),d(null);try{let e=await a(),s=await fetch(`/api/folders/${t}/move`,{method:"POST",headers:e,body:JSON.stringify({newParentId:r})}),l=await s.json();if(!s.ok)throw Error(l.error||"Failed to move folder");return await f(),l.folder}catch(e){return d(e instanceof Error?e.message:"Failed to move folder"),null}finally{n(!1)}},[e?.uid,f]);return{folders:s,loading:i,error:o,pagination:c,fetchFolders:f,fetchFoldersPaginated:g,fetchFolderPath:x,createFolder:p,renameFolder:b,deleteFolder:v,moveFolder:y,setPage:m,setPageSize:h}}e.s(["useFolders",()=>l])},88442,e=>{"use strict";var t=e.i(43476),r=e.i(71645);let s=(0,r.memo)(function({className:e="",variant:r="rectangular",width:s,height:a,animation:l="pulse"}){let i={};return s&&(i.width="number"==typeof s?`${s}px`:s),a&&(i.height="number"==typeof a?`${a}px`:a),(0,t.jsx)("div",{className:`bg-gray-200 ${{text:"rounded",circular:"rounded-full",rectangular:"rounded-lg"}[r]} ${{pulse:"animate-pulse",wave:"animate-shimmer",none:""}[l]} ${e}`,style:i,"aria-hidden":"true"})}),a=(0,r.memo)(function(){return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"whitespace-nowrap px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(s,{variant:"rectangular",width:32,height:32,className:"rounded-lg"}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(s,{height:14,width:180}),(0,t.jsx)(s,{height:10,width:120})]})]})}),(0,t.jsx)("td",{className:"hidden whitespace-nowrap px-6 py-4 sm:table-cell",children:(0,t.jsx)(s,{height:14,width:60})}),(0,t.jsx)("td",{className:"hidden whitespace-nowrap px-6 py-4 md:table-cell",children:(0,t.jsx)(s,{height:14,width:80})}),(0,t.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-right",children:(0,t.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,t.jsx)(s,{variant:"circular",width:28,height:28}),(0,t.jsx)(s,{variant:"circular",width:28,height:28}),(0,t.jsx)(s,{variant:"circular",width:28,height:28})]})})]})}),l=(0,r.memo)(function(){return(0,t.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white p-4 shadow-sm",children:[(0,t.jsx)(s,{height:96,className:"mb-3 w-full rounded-lg"}),(0,t.jsx)(s,{height:14,width:"80%",className:"mb-2"}),(0,t.jsx)(s,{height:10,width:"60%"})]})}),i=(0,r.memo)(function(){return(0,t.jsxs)("div",{className:"flex items-center gap-3 rounded-lg border border-gray-200 bg-white p-4",children:[(0,t.jsx)(s,{variant:"rectangular",width:48,height:48,className:"rounded-lg"}),(0,t.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,t.jsx)(s,{height:14,width:"70%"}),(0,t.jsx)(s,{height:10,width:"50%"})]})]})}),n=(0,r.memo)(function(){return(0,t.jsxs)("div",{className:"rounded-lg bg-white p-6 shadow-sm",children:[(0,t.jsx)(s,{height:20,width:140,className:"mb-4"}),(0,t.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0].map((e,r)=>(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(s,{variant:"rectangular",width:40,height:40,className:"rounded-lg"}),(0,t.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,t.jsx)(s,{height:14,width:"75%"}),(0,t.jsx)(s,{height:10,width:"50%"})]})]},r))})]})}),o=(0,r.memo)(function({count:e=5}){return(0,t.jsx)("div",{className:"overflow-hidden rounded-lg border border-gray-200 bg-white",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Name"}),(0,t.jsx)("th",{className:"hidden px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 sm:table-cell",children:"Size"}),(0,t.jsx)("th",{className:"hidden px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 md:table-cell",children:"Uploaded"}),(0,t.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-200",children:[...Array(e)].map((e,r)=>(0,t.jsx)(a,{},r))})]})})}),d=(0,r.memo)(function({count:e=8}){return(0,t.jsx)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:[...Array(e)].map((e,r)=>(0,t.jsx)(l,{},r))})}),c=(0,r.memo)(function({count:e=6}){return(0,t.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[...Array(e)].map((e,r)=>(0,t.jsx)(i,{},r))})});e.s(["DocumentGridSkeleton",0,d,"DocumentListSkeleton",0,o,"FolderGridSkeleton",0,c,"RecentDocumentsSkeleton",0,n])},93582,e=>{"use strict";var t=e.i(43476),r=e.i(71645);function s({isOpen:e,title:s,message:a,confirmLabel:l="Confirm",cancelLabel:i="Cancel",variant:n="danger",onConfirm:o,onCancel:d}){let c=(0,r.useRef)(null),u=(0,r.useRef)(null),m=(0,r.useRef)(null);(0,r.useEffect)(()=>{e&&u.current?.focus()},[e]);let h=(0,r.useCallback)(t=>{if(e){if("Escape"===t.key)return void d();if("Tab"===t.key){let e=[u.current,m.current].filter(Boolean),r=e[0],s=e[e.length-1];t.shiftKey?document.activeElement===r&&(t.preventDefault(),s?.focus()):document.activeElement===s&&(t.preventDefault(),r?.focus())}}},[e,d]);return((0,r.useEffect)(()=>(document.addEventListener("keydown",h),()=>document.removeEventListener("keydown",h)),[h]),(0,r.useEffect)(()=>(e&&(document.body.style.overflow="hidden"),()=>{document.body.style.overflow=""}),[e]),e)?(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:d,"aria-hidden":"true"}),(0,t.jsxs)("div",{ref:c,role:"alertdialog","aria-modal":"true","aria-labelledby":"dialog-title","aria-describedby":"dialog-description",tabIndex:-1,className:"relative z-10 w-full max-w-md rounded-lg bg-white p-4 sm:p-6 shadow-xl",children:[(0,t.jsx)("h2",{id:"dialog-title",className:"text-base sm:text-lg font-semibold text-gray-900",children:s}),(0,t.jsx)("p",{id:"dialog-description",className:"mt-2 text-sm text-gray-600",children:a}),(0,t.jsxs)("div",{className:"mt-4 sm:mt-6 flex flex-col-reverse sm:flex-row sm:justify-end gap-2 sm:gap-3",children:[(0,t.jsx)("button",{ref:u,type:"button",onClick:d,className:"w-full sm:w-auto rounded-lg border border-gray-300 px-4 py-2.5 sm:py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-500 focus-visible:ring-offset-2 active:scale-[0.98]",children:i}),(0,t.jsx)("button",{ref:m,type:"button",onClick:o,className:`w-full sm:w-auto rounded-lg px-4 py-2.5 sm:py-2 text-sm font-medium text-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 active:scale-[0.98] ${{danger:"bg-red-600 hover:bg-red-700 focus:ring-red-500",warning:"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500",info:"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500"}[n]}`,children:l})]})]})]}):null}e.s(["ConfirmDialog",()=>s])},28994,e=>{"use strict";var t=e.i(43476),r=e.i(22016);function s({items:e,onItemClick:s,className:a="",showHomeIcon:l=!0}){return 0===e.length?null:(0,t.jsx)("nav",{className:`flex items-center ${a}`,"aria-label":"Breadcrumb",children:(0,t.jsx)("ol",{className:"flex items-center gap-1 text-sm",children:e.map((a,i)=>{let n=i===e.length-1,o=0===i;return(0,t.jsxs)("li",{className:"flex items-center",children:[!o&&(0,t.jsx)("svg",{className:"mx-1 h-4 w-4 flex-shrink-0 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),n?(0,t.jsxs)("span",{className:"flex items-center gap-1.5 font-medium text-gray-900","aria-current":"page",children:[o&&l&&(0,t.jsx)("svg",{className:"h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),!o&&(0,t.jsx)("svg",{className:"h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})}),(0,t.jsx)("span",{className:"truncate max-w-[200px]",children:a.name})]}):a.href?(0,t.jsxs)(r.default,{href:a.href,className:"flex items-center gap-1.5 rounded px-2 py-1 text-gray-500 transition-colors hover:bg-gray-100 hover:text-gray-700",children:[o&&l&&(0,t.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),(0,t.jsx)("span",{className:"truncate max-w-[150px]",children:a.name})]}):(0,t.jsxs)("button",{onClick:()=>s?.(a,i),className:"flex items-center gap-1.5 rounded px-2 py-1 text-gray-500 transition-colors hover:bg-gray-100 hover:text-gray-700",children:[o&&l&&(0,t.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),(0,t.jsx)("span",{className:"truncate max-w-[150px]",children:a.name})]})]},a.id??"root")})})})}function a(e,t){let r=[{id:null,name:"Root"}];if(!t)return r;let s=[],a=e.find(e=>e.id===t);for(;a;)s.unshift(a),a=a.parent_id?e.find(e=>e.id===a.parent_id):void 0;for(let e of s)r.push({id:e.id,name:e.name});return r}e.s(["Breadcrumbs",()=>s,"buildBreadcrumbsFromPath",()=>a])},58700,e=>{"use strict";var t=e.i(43476),r=e.i(71645);let s=(0,r.memo)(function({currentPage:e,totalPages:s,totalItems:a,pageSize:l,onPageChange:i,onPageSizeChange:n,pageSizeOptions:o=[20,30,50],showPageSizeSelector:d=!0}){let c=0===a?0:(e-1)*l+1,u=Math.min(e*l,a),m=(0,r.useCallback)(()=>i(e-1),[i,e]),h=(0,r.useCallback)(()=>i(e+1),[i,e]),f=(0,r.useCallback)(e=>n?.(Number(e.target.value)),[n]),g=(0,r.useMemo)(()=>{let t=[];if(s<=7)for(let e=1;e<=s;e++)t.push(e);else{t.push(1),e>3&&t.push("ellipsis");let r=Math.max(2,e-1),a=Math.min(s-1,e+1);for(let e=r;e<=a;e++)t.push(e);e<s-2&&t.push("ellipsis"),s>1&&t.push(s)}return t},[s,e]);return s<=1&&!d?null:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-between gap-3 sm:gap-4 sm:flex-row",children:[(0,t.jsxs)("div",{className:"text-xs sm:text-sm text-gray-600 text-center sm:text-left",children:["Showing ",c," to ",u," of ",a," items"]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-center gap-3 sm:gap-4 w-full sm:w-auto",children:[d&&n&&(0,t.jsxs)("div",{className:"hidden sm:flex items-center gap-2",children:[(0,t.jsx)("label",{htmlFor:"pageSize",className:"text-sm text-gray-600 whitespace-nowrap",children:"Items per page:"}),(0,t.jsx)("select",{id:"pageSize",value:l,onChange:f,className:"rounded-md border border-gray-300 px-2 py-1.5 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",children:o.map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]}),s>1&&(0,t.jsxs)("nav",{className:"flex items-center gap-0.5 sm:gap-1","aria-label":`Pagination, page ${e} of ${s}`,children:[(0,t.jsx)("button",{onClick:m,disabled:1===e,className:"rounded-md p-2.5 sm:p-2 text-gray-600 hover:bg-gray-100 disabled:cursor-not-allowed disabled:opacity-50 disabled:hover:bg-transparent active:scale-95 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2","aria-label":`Go to previous page, page ${e-1}`,"aria-disabled":1===e,children:(0,t.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),g.map((r,s)=>"ellipsis"===r?(0,t.jsx)("span",{className:"px-1 sm:px-2 text-gray-500","aria-hidden":"true",children:"..."},`ellipsis-${s}`):(0,t.jsx)("button",{onClick:()=>i(r),className:`min-w-[2.5rem] min-h-[2.5rem] sm:min-w-[2.5rem] sm:min-h-0 rounded-md px-2 sm:px-3 py-2 sm:py-1.5 text-sm font-medium active:scale-95 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 ${e===r?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"}`,"aria-current":e===r?"page":void 0,"aria-label":e===r?`Page ${r}, current page`:`Go to page ${r}`,children:r},r)),(0,t.jsx)("button",{onClick:h,disabled:e===s,className:"rounded-md p-2.5 sm:p-2 text-gray-600 hover:bg-gray-100 disabled:cursor-not-allowed disabled:opacity-50 disabled:hover:bg-transparent active:scale-95 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2","aria-label":`Go to next page, page ${e+1}`,"aria-disabled":e===s,children:(0,t.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]})]})});e.s(["Pagination",0,s])},70081,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(17780),a=e.i(18339);let l=(0,r.memo)(function({folder:e,onRename:s,onDelete:a,onMove:l,onClick:i}){let[n,o]=(0,r.useState)(!1),d=(0,r.useCallback)(e=>{e.stopPropagation(),o(e=>!e)},[]),c=(0,r.useCallback)(t=>{("Enter"===t.key||" "===t.key)&&(t.preventDefault(),i(e))},[e,i]),u=(0,r.useCallback)(e=>{o(!1),e()},[]),m=(0,r.useCallback)(()=>i(e),[e,i]),h=(0,r.useCallback)(()=>u(()=>s(e)),[e,s,u]),f=(0,r.useCallback)(()=>u(()=>l(e)),[e,l,u]),g=(0,r.useCallback)(()=>u(()=>a(e)),[e,a,u]);return(0,t.jsxs)("article",{className:"group relative flex items-center gap-3 rounded-lg border border-gray-200 bg-white p-3 sm:p-4 transition-all hover:border-blue-300 hover:shadow-md cursor-pointer active:scale-[0.99] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:m,onKeyDown:c,tabIndex:0,role:"button","aria-label":`Open folder ${e.name}`,children:[(0,t.jsx)("div",{className:"flex h-10 w-10 sm:h-12 sm:w-12 flex-shrink-0 items-center justify-center rounded-lg bg-gradient-to-r from-blue-100 to-purple-100","aria-hidden":"true",children:(0,t.jsx)("svg",{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-gray-500 truncate",children:e.path})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("button",{onClick:d,className:"rounded-lg p-2.5 sm:p-2 text-gray-400 sm:opacity-0 transition-opacity hover:bg-gray-100 hover:text-gray-600 group-hover:opacity-100 active:scale-95 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 focus-visible:opacity-100","aria-label":`Actions for folder ${e.name}`,"aria-expanded":n,"aria-haspopup":"menu",children:(0,t.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),n&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"fixed inset-0 z-10",onClick:e=>{e.stopPropagation(),o(!1)},"aria-hidden":"true"}),(0,t.jsxs)("div",{className:"absolute right-0 top-full z-20 mt-1 w-40 rounded-lg border border-gray-200 bg-white py-1 shadow-lg",role:"menu","aria-label":`Actions for ${e.name}`,children:[(0,t.jsxs)("button",{onClick:e=>{e.stopPropagation(),h()},className:"flex w-full items-center gap-2 px-4 py-2.5 sm:py-2 text-sm text-gray-700 hover:bg-gray-100 active:bg-gray-200 focus-visible:outline-none focus-visible:bg-gray-100",role:"menuitem",children:[(0,t.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Rename"]}),(0,t.jsxs)("button",{onClick:e=>{e.stopPropagation(),f()},className:"flex w-full items-center gap-2 px-4 py-2.5 sm:py-2 text-sm text-gray-700 hover:bg-gray-100 active:bg-gray-200 focus-visible:outline-none focus-visible:bg-gray-100",role:"menuitem",children:[(0,t.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),"Move"]}),(0,t.jsx)("hr",{className:"my-1 border-gray-200",role:"separator"}),(0,t.jsxs)("button",{onClick:e=>{e.stopPropagation(),g()},className:"flex w-full items-center gap-2 px-4 py-2.5 sm:py-2 text-sm text-red-600 hover:bg-red-50 active:bg-red-100 focus-visible:outline-none focus-visible:bg-red-50",role:"menuitem",children:[(0,t.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})]})]})]})});var i=e.i(56403),n=e.i(80438),o=e.i(90757),d=e.i(93582),c=e.i(58700),u=e.i(88442),m=e.i(88840);function h({parentId:s=null,onFolderClick:h,enablePagination:f=!1}){let{folders:g,loading:x,error:p,pagination:b,fetchFolders:v,fetchFoldersPaginated:y,createFolder:j,renameFolder:w,deleteFolder:k,moveFolder:N,setPage:C,setPageSize:F}=(0,a.useFolders)(),E=(0,m.useToast)(),[S,L]=(0,r.useState)(!1),[M,P]=(0,r.useState)(null),[z,$]=(0,r.useState)(null),[B,R]=(0,r.useState)(null),[A,D]=(0,r.useState)([]);(0,r.useEffect)(()=>{f?y(s,b.currentPage,b.pageSize):v(s)},[v,y,s,f,b.currentPage,b.pageSize]),(0,r.useEffect)(()=>{(async()=>{try{let{getIdToken:t}=await e.A(33733),r=await t();if(!r)return;let s=await fetch("/api/folders",{headers:{Authorization:`Bearer ${r}`}});if(s.ok){let e=await s.json();D(e.folders||[])}}catch(e){console.error("Failed to fetch all folders:",e)}})()},[g]);let T=(0,r.useCallback)(async e=>{if(await j(e,s))E.success(`Folder "${e}" created successfully`);else throw E.error("Failed to create folder"),Error("Failed to create folder")},[j,s,E]),I=(0,r.useCallback)(async e=>{if(M)if(await w(M.id,e))E.success(`Folder renamed to "${e}"`);else throw E.error("Failed to rename folder"),Error("Failed to rename folder")},[w,M,E]),W=(0,r.useCallback)(async e=>{if(z)if(await N(z.id,e))E.success("Folder moved successfully");else throw E.error("Failed to move folder"),Error("Failed to move folder")},[N,z,E]),O=(0,r.useCallback)(async()=>{B&&(await k(B.id)?E.success(`Folder "${B.name}" deleted`):E.error("Failed to delete folder"),R(null))},[k,B,E]),H=(0,r.useCallback)(e=>{h&&h(e)},[h]),U=(0,r.useCallback)(e=>{C(e)},[C]),G=(0,r.useCallback)(e=>{F(e)},[F]),_=f?g:g.filter(e=>e.parent_id===s);return x&&0===g.length?(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"mb-4 flex items-center justify-between",children:(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Folders"})}),(0,t.jsx)(u.FolderGridSkeleton,{count:6})]}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"mb-3 sm:mb-4 flex items-center justify-between gap-3",children:[(0,t.jsx)("h2",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"Folders"}),(0,t.jsxs)("button",{onClick:()=>L(!0),className:"flex items-center gap-1.5 sm:gap-2 rounded-lg bg-blue-600 px-3 sm:px-4 py-2 sm:py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 active:scale-[0.98]",children:[(0,t.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"New Folder"}),(0,t.jsx)("span",{className:"sm:hidden",children:"New"})]})]}),p&&(0,t.jsx)("div",{className:"mb-4 rounded-lg bg-red-50 p-4 text-sm text-red-600",children:p}),0===_.length?(0,t.jsxs)("div",{className:"rounded-lg border-2 border-dashed border-gray-300 p-12 text-center",children:[(0,t.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})}),(0,t.jsx)("h3",{className:"mt-4 text-sm font-medium text-gray-900",children:"No folders"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating a new folder."}),(0,t.jsxs)("button",{onClick:()=>L(!0),className:"mt-4 inline-flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700",children:[(0,t.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Folder"]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"grid gap-3 sm:gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",children:_.map(e=>(0,t.jsx)(l,{folder:e,onRename:P,onDelete:R,onMove:$,onClick:H},e.id))}),f&&b.totalPages>0&&(0,t.jsx)("div",{className:"mt-4 sm:mt-6",children:(0,t.jsx)(c.Pagination,{currentPage:b.currentPage,totalPages:b.totalPages,totalItems:b.totalItems,pageSize:b.pageSize,onPageChange:U,onPageSizeChange:G,pageSizeOptions:[20,30,50]})})]}),(0,t.jsx)(i.CreateFolderModal,{isOpen:S,onClose:()=>L(!1),onCreate:T}),(0,t.jsx)(n.RenameFolderModal,{isOpen:!!M,currentName:M?.name||"",onClose:()=>P(null),onRename:I}),(0,t.jsx)(o.MoveFolderModal,{isOpen:!!z,folder:z,allFolders:A.length>0?A:g,onClose:()=>$(null),onMove:W}),(0,t.jsx)(d.ConfirmDialog,{isOpen:!!B,title:"Delete Folder",message:`Are you sure you want to delete "${B?.name}"? This will also delete all contents inside this folder. This action cannot be undone.`,confirmLabel:"Delete",variant:"danger",onConfirm:O,onCancel:()=>R(null)})]})}var f=e.i(28994);function g(){let{folders:e,fetchFolders:l}=(0,a.useFolders)(),[i,n]=(0,r.useState)(null),[o,d]=(0,r.useState)([{id:null,name:"Root"}]);(0,r.useEffect)(()=>{l()},[l]),(0,r.useEffect)(()=>{(e.length>0||null===i)&&d((0,f.buildBreadcrumbsFromPath)(e,i))},[i,e]);let c=(0,r.useCallback)(e=>{n(e.id)},[]),u=(0,r.useCallback)(e=>{n(e.id)},[]);return(0,t.jsx)(s.DashboardLayout,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Folders"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Organize your documents into folders for easy access."})]}),(0,t.jsx)(f.Breadcrumbs,{items:o,onItemClick:u,showHomeIcon:!0}),(0,t.jsx)("div",{className:"rounded-lg bg-white p-6 shadow-sm",children:(0,t.jsx)(h,{parentId:i,onFolderClick:c,enablePagination:!0})})]})})}e.s(["default",()=>g],70081)},33733,e=>{e.v(e=>Promise.resolve().then(()=>e(87145)))}]);