(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,1355,e=>{"use strict";var s=e.i(43476),t=e.i(71645),l=e.i(18566),r=e.i(17780);e.i(70449);var a=e.i(52655),o=e.i(79639),n=e.i(77001),d=e.i(18339),i=e.i(88840);function c(){let e=(0,l.useRouter)(),c=(0,l.useSearchParams)().get("folderId"),[u,x]=(0,t.useState)(c),[m,h]=(0,t.useState)(null),[f,p]=(0,t.useState)(!1),{uploadProgress:g,uploadMultipleDocuments:j,cancelUpload:b,error:v}=(0,n.useDocuments)(),{folders:y,fetchFolders:k}=(0,d.useFolders)(),N=(0,i.useToast)();(0,t.useEffect)(()=>{k()},[k]),(0,t.useEffect)(()=>{u&&y.length>0?h(y.find(e=>e.id===u)||null):h(null)},[u,y]);let w=(0,t.useCallback)(async e=>{await j(e,u);let s=Array.from(g.values()).filter(e=>"completed"===e.status).length,t=Array.from(g.values()).filter(e=>"error"===e.status).length;s>0&&0===t?N.success(`${e.length} file${e.length>1?"s":""} uploaded successfully`):t>0&&N.warning(`${s} uploaded, ${t} failed`)},[j,u,g,N]),C=(0,t.useCallback)(e=>{x(e?.id||null),h(e),p(!1)},[]),L=Array.from(g.values()).filter(e=>"completed"===e.status).length;return(0,s.jsx)(r.DashboardLayout,{children:(0,s.jsxs)("div",{className:"mx-auto max-w-3xl px-4 py-8 sm:px-6 lg:px-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("button",{onClick:()=>e.back(),className:"mb-4 flex items-center gap-2 text-sm text-gray-600 hover:text-gray-900",children:[(0,s.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Upload Documents"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Upload PDF documents to your library. Files will be stored securely."})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload to folder"}),(0,s.jsxs)("button",{onClick:()=>p(!0),className:"flex w-full items-center justify-between rounded-lg border border-gray-300 bg-white px-4 py-3 text-left hover:bg-gray-50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})}),(0,s.jsx)("span",{className:"text-gray-900",children:m?m.name:"Root (No folder)"})]}),(0,s.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),m&&(0,s.jsxs)("p",{className:"mt-1 text-xs text-gray-500",children:["Path: ",m.path]})]}),v&&(0,s.jsx)("div",{className:"mb-6 rounded-lg bg-red-50 p-4 text-sm text-red-600",children:v}),(0,s.jsx)(a.FileUpload,{onUpload:w,uploadProgress:g,onCancelUpload:b,folderId:u}),L>0&&(0,s.jsxs)("div",{className:"mt-6 rounded-lg bg-green-50 p-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("svg",{className:"h-5 w-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,s.jsxs)("p",{className:"text-sm font-medium text-green-800",children:[L," file",L>1?"s":""," uploaded successfully"]})]}),(0,s.jsxs)("div",{className:"mt-3 flex gap-3",children:[(0,s.jsx)("button",{onClick:()=>e.push("/dashboard/documents"),className:"text-sm font-medium text-green-700 hover:text-green-800",children:"View all documents →"}),u&&(0,s.jsx)("button",{onClick:()=>e.push(`/dashboard/folders?id=${u}`),className:"text-sm font-medium text-green-700 hover:text-green-800",children:"View folder →"})]})]}),f&&(0,s.jsx)(o.FolderPickerModal,{folders:y,selectedFolderId:u,onSelect:C,onClose:()=>p(!1),allowRoot:!0})]})})}function u(){return(0,s.jsx)(t.Suspense,{fallback:(0,s.jsx)(r.DashboardLayout,{children:(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-blue-600 border-t-transparent"})})}),children:(0,s.jsx)(c,{})})}e.s(["default",()=>u])},33733,e=>{e.v(e=>Promise.resolve().then(()=>e(87145)))}]);