(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,88442,e=>{"use strict";var t=e.i(43476),r=e.i(71645);let s=(0,r.memo)(function({className:e="",variant:r="rectangular",width:s,height:l,animation:a="pulse"}){let n={};return s&&(n.width="number"==typeof s?`${s}px`:s),l&&(n.height="number"==typeof l?`${l}px`:l),(0,t.jsx)("div",{className:`bg-gray-200 ${{text:"rounded",circular:"rounded-full",rectangular:"rounded-lg"}[r]} ${{pulse:"animate-pulse",wave:"animate-shimmer",none:""}[a]} ${e}`,style:n,"aria-hidden":"true"})}),l=(0,r.memo)(function(){return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"whitespace-nowrap px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(s,{variant:"rectangular",width:32,height:32,className:"rounded-lg"}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(s,{height:14,width:180}),(0,t.jsx)(s,{height:10,width:120})]})]})}),(0,t.jsx)("td",{className:"hidden whitespace-nowrap px-6 py-4 sm:table-cell",children:(0,t.jsx)(s,{height:14,width:60})}),(0,t.jsx)("td",{className:"hidden whitespace-nowrap px-6 py-4 md:table-cell",children:(0,t.jsx)(s,{height:14,width:80})}),(0,t.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-right",children:(0,t.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,t.jsx)(s,{variant:"circular",width:28,height:28}),(0,t.jsx)(s,{variant:"circular",width:28,height:28}),(0,t.jsx)(s,{variant:"circular",width:28,height:28})]})})]})}),a=(0,r.memo)(function(){return(0,t.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white p-4 shadow-sm",children:[(0,t.jsx)(s,{height:96,className:"mb-3 w-full rounded-lg"}),(0,t.jsx)(s,{height:14,width:"80%",className:"mb-2"}),(0,t.jsx)(s,{height:10,width:"60%"})]})}),n=(0,r.memo)(function(){return(0,t.jsxs)("div",{className:"flex items-center gap-3 rounded-lg border border-gray-200 bg-white p-4",children:[(0,t.jsx)(s,{variant:"rectangular",width:48,height:48,className:"rounded-lg"}),(0,t.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,t.jsx)(s,{height:14,width:"70%"}),(0,t.jsx)(s,{height:10,width:"50%"})]})]})}),o=(0,r.memo)(function(){return(0,t.jsxs)("div",{className:"rounded-lg bg-white p-6 shadow-sm",children:[(0,t.jsx)(s,{height:20,width:140,className:"mb-4"}),(0,t.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0].map((e,r)=>(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(s,{variant:"rectangular",width:40,height:40,className:"rounded-lg"}),(0,t.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,t.jsx)(s,{height:14,width:"75%"}),(0,t.jsx)(s,{height:10,width:"50%"})]})]},r))})]})}),i=(0,r.memo)(function({count:e=5}){return(0,t.jsx)("div",{className:"overflow-hidden rounded-lg border border-gray-200 bg-white",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Name"}),(0,t.jsx)("th",{className:"hidden px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 sm:table-cell",children:"Size"}),(0,t.jsx)("th",{className:"hidden px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 md:table-cell",children:"Uploaded"}),(0,t.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-200",children:[...Array(e)].map((e,r)=>(0,t.jsx)(l,{},r))})]})})}),d=(0,r.memo)(function({count:e=8}){return(0,t.jsx)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:[...Array(e)].map((e,r)=>(0,t.jsx)(a,{},r))})}),c=(0,r.memo)(function({count:e=6}){return(0,t.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[...Array(e)].map((e,r)=>(0,t.jsx)(n,{},r))})});e.s(["DocumentGridSkeleton",0,d,"DocumentListSkeleton",0,i,"FolderGridSkeleton",0,c,"RecentDocumentsSkeleton",0,o])},87145,e=>{"use strict";var t=e.i(71645),r=e.i(14985);function s(){return{authenticatedFetch:(0,t.useCallback)(async(e,t={})=>{let s=(0,r.getFirebaseAuth)().currentUser;if(!s)throw Error("User is not authenticated");let l=await s.getIdToken(),a=new Headers(t.headers);return a.set("Authorization",`Bearer ${l}`),fetch(e,{...t,headers:a})},[])}}async function l(){let e=(0,r.getFirebaseAuth)().currentUser;return e?e.getIdToken():null}async function a(e){let t=new Headers(e),r=await l();return r&&t.set("Authorization",`Bearer ${r}`),t}e.s(["createAuthHeaders",()=>a,"getIdToken",()=>l,"useAuthenticatedFetch",()=>s])},18339,e=>{"use strict";var t=e.i(71645),r=e.i(84093),s=e.i(87145);async function l(){let e=await (0,s.getIdToken)();if(!e)throw Error("Not authenticated");return{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}function a(){let{user:e}=(0,r.useAuth)(),[s,a]=(0,t.useState)([]),[n,o]=(0,t.useState)(!1),[i,d]=(0,t.useState)(null),[c,u]=(0,t.useState)({currentPage:1,pageSize:20,totalItems:0,totalPages:0}),m=(0,t.useCallback)(e=>{u(t=>({...t,currentPage:e}))},[]),h=(0,t.useCallback)(e=>{u(t=>({...t,pageSize:e,currentPage:1}))},[]),x=(0,t.useCallback)(async t=>{if(e?.uid){o(!0),d(null);try{let e=await l(),r=new URLSearchParams;void 0!==t&&r.append("parentId",null===t?"null":t);let s=await fetch(`/api/folders?${r}`,{headers:e}),n=await s.json();if(!s.ok)throw Error(n.error||"Failed to fetch folders");a(n.folders),u(e=>({...e,totalItems:n.folders.length,totalPages:1,currentPage:1}))}catch(e){d(e instanceof Error?e.message:"Failed to fetch folders")}finally{o(!1)}}},[e?.uid]),f=(0,t.useCallback)(async(t,r,s)=>{if(!e?.uid)return;let n=s??c.pageSize,i=r??c.currentPage;o(!0),d(null);try{let e=await l(),r=new URLSearchParams({page:i.toString(),pageSize:n.toString()});void 0!==t&&r.append("parentId",null===t?"null":t);let s=await fetch(`/api/folders?${r}`,{headers:e}),o=await s.json();if(!s.ok)throw Error(o.error||"Failed to fetch folders");a(o.folders),u({currentPage:i,pageSize:n,totalItems:o.total,totalPages:Math.ceil(o.total/n)})}catch(e){d(e instanceof Error?e.message:"Failed to fetch folders")}finally{o(!1)}},[e?.uid,c.pageSize,c.currentPage]),g=(0,t.useCallback)(async t=>{if(!e?.uid)return[];try{let e=await l(),r=await fetch(`/api/folders/${t}/path`,{headers:e}),s=await r.json();if(!r.ok)throw Error(s.error||"Failed to fetch folder path");return s.path}catch(e){return d(e instanceof Error?e.message:"Failed to fetch folder path"),[]}},[e?.uid]),p=(0,t.useCallback)(async(t,r)=>{if(!e?.uid)return null;o(!0),d(null);try{let e=await l(),s=await fetch("/api/folders",{method:"POST",headers:e,body:JSON.stringify({name:t,parentId:r})}),n=await s.json();if(!s.ok)throw Error(n.error||"Failed to create folder");return a(e=>[...e,n.folder]),n.folder}catch(e){return d(e instanceof Error?e.message:"Failed to create folder"),null}finally{o(!1)}},[e?.uid]),v=(0,t.useCallback)(async(t,r)=>{if(!e?.uid)return null;o(!0),d(null);try{let e=await l(),s=await fetch(`/api/folders/${t}`,{method:"PUT",headers:e,body:JSON.stringify({name:r})}),n=await s.json();if(!s.ok)throw Error(n.error||"Failed to rename folder");return a(e=>e.map(e=>e.id===t?n.folder:e)),n.folder}catch(e){return d(e instanceof Error?e.message:"Failed to rename folder"),null}finally{o(!1)}},[e?.uid]),b=(0,t.useCallback)(async t=>{if(!e?.uid)return!1;o(!0),d(null);try{let e=await l(),r=await fetch(`/api/folders/${t}`,{method:"DELETE",headers:e}),s=await r.json();if(!r.ok)throw Error(s.error||"Failed to delete folder");return a(e=>e.filter(e=>e.id!==t)),!0}catch(e){return d(e instanceof Error?e.message:"Failed to delete folder"),!1}finally{o(!1)}},[e?.uid]),j=(0,t.useCallback)(async(t,r)=>{if(!e?.uid)return null;o(!0),d(null);try{let e=await l(),s=await fetch(`/api/folders/${t}/move`,{method:"POST",headers:e,body:JSON.stringify({newParentId:r})}),a=await s.json();if(!s.ok)throw Error(a.error||"Failed to move folder");return await x(),a.folder}catch(e){return d(e instanceof Error?e.message:"Failed to move folder"),null}finally{o(!1)}},[e?.uid,x]);return{folders:s,loading:n,error:i,pagination:c,fetchFolders:x,fetchFoldersPaginated:f,fetchFolderPath:g,createFolder:p,renameFolder:v,deleteFolder:b,moveFolder:j,setPage:m,setPageSize:h}}e.s(["useFolders",()=>a])},77001,e=>{"use strict";var t=e.i(71645),r=e.i(84093),s=e.i(87145);async function l(){let e=await (0,s.getIdToken)();if(!e)throw Error("Not authenticated");return{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}function a(){let{user:e}=(0,r.useAuth)(),[a,n]=(0,t.useState)([]),[o,i]=(0,t.useState)(!1),[d,c]=(0,t.useState)(null),[u,m]=(0,t.useState)(new Map),[h,x]=(0,t.useState)({currentPage:1,pageSize:20,totalItems:0,totalPages:0}),f=(0,t.useCallback)(()=>c(null),[]),g=(0,t.useCallback)(e=>{x(t=>({...t,currentPage:e}))},[]),p=(0,t.useCallback)(e=>{x(t=>({...t,pageSize:e,currentPage:1}))},[]),v=(0,t.useCallback)(async t=>{if(e){i(!0),c(null);try{let e=await l(),r=new URLSearchParams;void 0!==t&&r.set("folderId",null===t?"null":t);let s=await fetch(`/api/documents?${r}`,{headers:e}),a=await s.json();if(!s.ok)throw Error(a.error||"Failed to fetch documents");n(a.documents),x(e=>({...e,totalItems:a.documents.length,totalPages:1,currentPage:1}))}catch(e){c(e instanceof Error?e.message:"Failed to fetch documents")}finally{i(!1)}}},[e]),b=(0,t.useCallback)(async(t,r,s)=>{if(!e)return;let a=s??h.pageSize,o=r??h.currentPage;i(!0),c(null);try{let e=await l(),r=new URLSearchParams({page:o.toString(),pageSize:a.toString()});void 0!==t&&r.set("folderId",null===t?"null":t);let s=await fetch(`/api/documents?${r}`,{headers:e}),i=await s.json();if(!s.ok)throw Error(i.error||"Failed to fetch documents");n(i.documents),x({currentPage:o,pageSize:a,totalItems:i.total,totalPages:Math.ceil(i.total/a)})}catch(e){c(e instanceof Error?e.message:"Failed to fetch documents")}finally{i(!1)}},[e,h.pageSize,h.currentPage]),j=(0,t.useCallback)(async t=>{if(e){i(!0),c(null);try{let e=await l(),r=new URLSearchParams({search:t}),s=await fetch(`/api/documents?${r}`,{headers:e}),a=await s.json();if(!s.ok)throw Error(a.error||"Failed to search documents");n(a.documents)}catch(e){c(e instanceof Error?e.message:"Failed to search documents")}finally{i(!1)}}},[e]),y=(0,t.useCallback)((e,t)=>{m(r=>{let s=new Map(r),l=s.get(e)||{fileName:e,progress:0,status:"pending"};return s.set(e,{...l,...t}),s})},[]),w=(0,t.useCallback)(async(t,r)=>{if(!e)return null;let l=new AbortController;y(t.name,{status:"uploading",progress:0,abortController:l});try{let e=await (0,s.getIdToken)();if(!e)throw Error("Not authenticated");let a=new FormData;a.append("file",t),r&&a.append("folderId",r);let o=await new Promise((r,s)=>{let n=new XMLHttpRequest;n.upload.addEventListener("progress",e=>{if(e.lengthComputable){let r=Math.round(e.loaded/e.total*100);y(t.name,{progress:r})}}),n.addEventListener("load",()=>{if(n.status>=200&&n.status<300){let e=JSON.parse(n.responseText);r(e.document)}else try{let e=JSON.parse(n.responseText);s(Error(e.error||"Upload failed"))}catch{s(Error("Upload failed"))}}),n.addEventListener("error",()=>{s(Error("Network error during upload"))}),n.addEventListener("abort",()=>{s(Error("Upload cancelled"))}),l.signal.addEventListener("abort",()=>{n.abort()}),n.open("POST","/api/documents/upload"),n.setRequestHeader("Authorization",`Bearer ${e}`),n.send(a)});return y(t.name,{status:"completed",progress:100}),n(e=>[o,...e]),o}catch(s){let e=s instanceof Error?s.message:"Upload failed",r="Upload cancelled"===e;return y(t.name,{status:r?"cancelled":"error",error:e}),r||c(e),null}},[e,y]),k=(0,t.useCallback)(async(e,t)=>{for(let r of(e.forEach(e=>{y(e.name,{status:"pending",progress:0})}),e)){let e=u.get(r.name);e?.status!=="cancelled"&&await w(r,t)}},[w,u,y]),N=(0,t.useCallback)(e=>{let t=u.get(e);t?.abortController&&t.abortController.abort(),y(e,{status:"cancelled"})},[u,y]),C=(0,t.useCallback)(async t=>{if(!e)return!1;try{let e=await l(),r=await fetch(`/api/documents/${t}`,{method:"DELETE",headers:e});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to delete document")}return n(e=>e.filter(e=>e.id!==t)),!0}catch(e){return c(e instanceof Error?e.message:"Failed to delete document"),!1}},[e]);return{documents:a,loading:o,error:d,uploadProgress:u,pagination:h,fetchDocuments:v,fetchDocumentsPaginated:b,searchDocuments:j,uploadDocument:w,uploadMultipleDocuments:k,cancelUpload:N,deleteDocument:C,moveDocument:(0,t.useCallback)(async(t,r)=>{if(!e)return null;try{let e=await l(),s=await fetch(`/api/documents/${t}`,{method:"PATCH",headers:e,body:JSON.stringify({folderId:r})}),a=await s.json();if(!s.ok)throw Error(a.error||"Failed to move document");return n(e=>e.map(e=>e.id===t?a.document:e)),a.document}catch(e){return c(e instanceof Error?e.message:"Failed to move document"),null}},[e]),renameDocument:(0,t.useCallback)(async(t,r)=>{if(!e)return null;try{let e=await l(),s=await fetch(`/api/documents/${t}`,{method:"PATCH",headers:e,body:JSON.stringify({name:r})}),a=await s.json();if(!s.ok)throw Error(a.error||"Failed to rename document");return n(e=>e.map(e=>e.id===t?a.document:e)),a.document}catch(e){return c(e instanceof Error?e.message:"Failed to rename document"),null}},[e]),clearError:f,setPage:g,setPageSize:p}}e.s(["useDocuments",()=>a])},70449,52655,79639,47101,64418,87077,18322,85634,e=>{"use strict";var t=e.i(43476),r=e.i(71645);e.i(47167);function s({onUpload:e,uploadProgress:s,onCancelUpload:n,disabled:o=!1}){let[i,d]=(0,r.useState)(!1),[c,u]=(0,r.useState)([]),m=(0,r.useRef)(null),h=(0,r.useCallback)(e=>{let t=[],r=[];for(let s of e){if("application/pdf"!==s.type){r.push(`"${s.name}" is not a PDF file. Only PDF files are allowed.`);continue}if("pdf"!==s.name.split(".").pop()?.toLowerCase()){r.push(`"${s.name}" does not have a .pdf extension.`);continue}if(s.size>0x3200000){let e=(s.size/1048576).toFixed(2);r.push(`"${s.name}" exceeds the 50MB limit (${e}MB).`);continue}t.push(s)}return{valid:t,errors:r}},[]),x=(0,r.useCallback)(async t=>{let{valid:r,errors:s}=h(Array.from(t));u(s),r.length>0&&await e(r)},[h,e]),f=(0,r.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),o||d(!0)},[o]),g=(0,r.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),d(!1)},[]),p=(0,r.useCallback)(e=>{e.preventDefault(),e.stopPropagation()},[]),v=(0,r.useCallback)(e=>{if(e.preventDefault(),e.stopPropagation(),d(!1),o)return;let t=e.dataTransfer.files;t.length>0&&x(t)},[o,x]),b=(0,r.useCallback)(e=>{let t=e.target.files;t&&t.length>0&&x(t),m.current&&(m.current.value="")},[x]),j=(0,r.useCallback)(()=>{o||m.current?.click()},[o]),y=Array.from(s.entries()).filter(([,e])=>"uploading"===e.status||"pending"===e.status),w=y.length>0;return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{onClick:j,onDragEnter:f,onDragLeave:g,onDragOver:p,onDrop:v,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),j())},tabIndex:o?-1:0,role:"button","aria-label":"Upload PDF files. Click to browse or drag and drop files here.","aria-disabled":o,className:`
          relative cursor-pointer rounded-lg border-2 border-dashed p-6 sm:p-8 text-center transition-colors active:scale-[0.99] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2
          ${i?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400 hover:bg-gray-50"}
          ${o?"cursor-not-allowed opacity-50":""}
        `,children:[(0,t.jsx)("input",{ref:m,type:"file",accept:".pdf,application/pdf",multiple:!0,onChange:b,className:"hidden",disabled:o,"aria-label":"Select PDF files to upload"}),(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("svg",{className:`h-10 w-10 sm:h-12 sm:w-12 ${i?"text-blue-500":"text-gray-400"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,t.jsx)("p",{className:"mt-3 sm:mt-4 text-sm font-medium text-gray-900",children:i?"Drop files here":"Tap to select PDF files"}),(0,t.jsx)("p",{className:"mt-1 text-xs text-gray-600 hidden sm:block",children:"or drag and drop"}),(0,t.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"PDF files only, max 50MB each"})]})]}),c.length>0&&(0,t.jsxs)("div",{className:"rounded-lg bg-red-50 p-4",role:"alert","aria-live":"polite",children:[(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("svg",{className:"h-5 w-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,t.jsxs)("div",{className:"ml-3",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Some files could not be uploaded"}),(0,t.jsx)("ul",{className:"mt-2 list-disc pl-5 text-sm text-red-700","aria-label":"Upload errors",children:c.map((e,r)=>(0,t.jsx)("li",{children:e},r))})]})]}),(0,t.jsx)("button",{onClick:()=>u([]),className:"mt-2 text-sm text-red-600 hover:text-red-800 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2 rounded","aria-label":"Dismiss error messages",children:"Dismiss"})]}),w&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Uploading files..."}),y.map(([e,r])=>(0,t.jsx)(l,{fileName:e,progress:r,onCancel:()=>n(e)},e))]}),Array.from(s.entries()).filter(([,e])=>"completed"===e.status||"error"===e.status||"cancelled"===e.status).length>0&&(0,t.jsx)("div",{className:"space-y-2",children:Array.from(s.entries()).filter(([,e])=>"completed"===e.status||"error"===e.status||"cancelled"===e.status).map(([e,r])=>(0,t.jsx)(a,{fileName:e,progress:r},e))})]})}function l({fileName:e,progress:r,onCancel:s}){return(0,t.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white p-3",role:"status","aria-label":`Uploading ${e}: ${r.progress}% complete`,children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[(0,t.jsx)("svg",{className:"h-5 w-5 flex-shrink-0 text-red-500",fill:"currentColor",viewBox:"0 0 20 20","aria-hidden":"true",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})}),(0,t.jsx)("span",{className:"truncate text-sm font-medium text-gray-900",children:e})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("span",{className:"text-sm text-gray-600","aria-live":"polite",children:[r.progress,"%"]}),(0,t.jsx)("button",{onClick:s,className:"rounded p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2","aria-label":`Cancel upload of ${e}`,children:(0,t.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),(0,t.jsx)("div",{className:"mt-2 h-1.5 w-full overflow-hidden rounded-full bg-gray-200",role:"progressbar","aria-valuenow":r.progress,"aria-valuemin":0,"aria-valuemax":100,"aria-label":`Upload progress for ${e}`,children:(0,t.jsx)("div",{className:"h-full rounded-full bg-blue-600 transition-all duration-300",style:{width:`${r.progress}%`}})})]})}function a({fileName:e,progress:r}){let s="completed"===r.status,l="cancelled"===r.status;return(0,t.jsxs)("div",{className:`
      flex items-center gap-3 rounded-lg p-3
      ${s?"bg-green-50":l?"bg-gray-50":"bg-red-50"}
    `,children:[s?(0,t.jsx)("svg",{className:"h-5 w-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):l?(0,t.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})}):(0,t.jsx)("svg",{className:"h-5 w-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsx)("p",{className:`truncate text-sm font-medium ${s?"text-green-800":l?"text-gray-600":"text-red-800"}`,children:e}),r.error&&!l&&(0,t.jsx)("p",{className:"text-xs text-red-600",children:r.error}),l&&(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Upload cancelled"})]})]})}function n({folders:e,selectedFolderId:s,onSelect:l,onClose:a,allowRoot:n=!0}){let[o,i]=(0,r.useState)(new Set),d=(0,r.useCallback)(e=>{i(t=>{let r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r})},[]),c=e.filter(e=>null===e.parent_id),u=(r,a=0)=>{let n,i=(n=r.id,e.filter(e=>e.parent_id===n)),c=i.length>0,m=o.has(r.id),h=r.id===s;return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:`
            flex items-center gap-2 rounded-lg px-3 py-2 cursor-pointer transition-colors
            ${h?"bg-blue-100 text-blue-900":"hover:bg-gray-100"}
          `,style:{paddingLeft:`${20*a+12}px`},children:[c?(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),d(r.id)},className:"p-0.5 hover:bg-gray-200 rounded",children:(0,t.jsx)("svg",{className:`h-4 w-4 text-gray-500 transition-transform ${m?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}):(0,t.jsx)("span",{className:"w-5"}),(0,t.jsxs)("button",{onClick:()=>l(r),className:"flex items-center gap-2 flex-1 text-left",children:[(0,t.jsx)("svg",{className:`h-5 w-5 ${h?"text-blue-600":"text-yellow-500"}`,fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{d:"M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"})}),(0,t.jsx)("span",{className:"text-sm font-medium",children:r.name})]})]}),c&&m&&(0,t.jsx)("div",{children:i.map(e=>u(e,a+1))})]},r.id)};return(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,t.jsxs)("div",{className:"w-full max-w-md rounded-lg bg-white shadow-xl",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between border-b border-gray-200 px-4 py-3",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Select Folder"}),(0,t.jsx)("button",{onClick:a,className:"rounded-lg p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600",children:(0,t.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsxs)("div",{className:"max-h-80 overflow-y-auto p-2",children:[n&&(0,t.jsxs)("button",{onClick:()=>l(null),className:`
                flex w-full items-center gap-2 rounded-lg px-3 py-2 text-left transition-colors
                ${null===s?"bg-blue-100 text-blue-900":"hover:bg-gray-100"}
              `,children:[(0,t.jsx)("svg",{className:`h-5 w-5 ${null===s?"text-blue-600":"text-gray-400"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Root (No folder)"})]}),c.length>0?c.map(e=>u(e)):(0,t.jsx)("div",{className:"py-8 text-center text-sm text-gray-500",children:"No folders available"})]}),(0,t.jsx)("div",{className:"flex justify-end gap-3 border-t border-gray-200 px-4 py-3",children:(0,t.jsx)("button",{onClick:a,className:"rounded-lg px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100",children:"Cancel"})})]})})}e.s(["FileUpload",()=>s],52655),e.s(["FolderPickerModal",()=>n],79639);let o=(0,r.memo)(function({document:e,onPreview:s,onMove:l,onDelete:a}){var n;let o=(0,r.useCallback)(()=>s(e),[e,s]),i=(0,r.useCallback)(t=>{t.stopPropagation(),l(e)},[e,l]),d=(0,r.useCallback)(t=>{t.stopPropagation(),a(e)},[e,a]);return(0,t.jsxs)("div",{className:"group relative rounded-lg border border-gray-200 bg-white p-4 shadow-sm transition-shadow hover:shadow-md",children:[(0,t.jsx)("button",{onClick:o,className:"flex w-full flex-col items-center",children:(0,t.jsx)("div",{className:"flex h-24 w-full items-center justify-center rounded-lg bg-red-50",children:(0,t.jsx)("svg",{className:"h-16 w-16 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})})})}),(0,t.jsxs)("div",{className:"mt-3 w-full",children:[(0,t.jsx)("h3",{className:"truncate text-sm font-medium text-gray-900",title:e.name,children:e.name}),(0,t.jsxs)("p",{className:"mt-1 text-xs text-gray-500",children:[(n=e.file_size)<1024?`${n} B`:n<1048576?`${(n/1024).toFixed(1)} KB`:`${(n/1048576).toFixed(1)} MB`," â€¢ ",new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]})]}),(0,t.jsxs)("div",{className:"absolute right-2 top-2 flex gap-1 opacity-0 transition-opacity group-hover:opacity-100",children:[(0,t.jsx)("button",{onClick:o,className:"rounded-lg bg-white p-1.5 text-gray-600 shadow-sm hover:bg-gray-100",title:"Preview",children:(0,t.jsxs)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),(0,t.jsx)("button",{onClick:i,className:"rounded-lg bg-white p-1.5 text-gray-600 shadow-sm hover:bg-gray-100",title:"Move",children:(0,t.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})}),(0,t.jsx)("button",{onClick:d,className:"rounded-lg bg-white p-1.5 text-red-600 shadow-sm hover:bg-red-50",title:"Delete",children:(0,t.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})}),i=(0,r.memo)(function({documents:e,onPreview:r,onMove:s,onDelete:l}){return(0,t.jsx)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:e.map(e=>(0,t.jsx)(o,{document:e,onPreview:r,onMove:s,onDelete:l},e.id))})});e.s(["DocumentGrid",0,i],47101);let d=(0,r.memo)(function({document:e,onPreview:s,onMove:l,onDelete:a}){var n;let o=(0,r.useCallback)(()=>s(e),[e,s]),i=(0,r.useCallback)(()=>l(e),[e,l]),d=(0,r.useCallback)(()=>a(e),[e,a]);return(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"whitespace-nowrap px-6 py-4",children:(0,t.jsxs)("button",{onClick:o,className:"flex items-center gap-3 text-left",children:[(0,t.jsx)("svg",{className:"h-8 w-8 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900 hover:text-blue-600",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:e.original_name})]})]})}),(0,t.jsx)("td",{className:"hidden whitespace-nowrap px-6 py-4 text-sm text-gray-500 sm:table-cell",children:(n=e.file_size)<1024?`${n} B`:n<1048576?`${(n/1024).toFixed(1)} KB`:`${(n/1048576).toFixed(1)} MB`}),(0,t.jsx)("td",{className:"hidden whitespace-nowrap px-6 py-4 text-sm text-gray-500 md:table-cell",children:new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),(0,t.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-right",children:(0,t.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,t.jsx)("button",{onClick:o,className:"rounded p-1 text-gray-600 hover:bg-gray-100 hover:text-blue-600",title:"Preview",children:(0,t.jsxs)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),(0,t.jsx)("button",{onClick:i,className:"rounded p-1 text-gray-600 hover:bg-gray-100 hover:text-blue-600",title:"Move",children:(0,t.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})}),(0,t.jsx)("button",{onClick:d,className:"rounded p-1 text-red-600 hover:bg-red-50 hover:text-red-800",title:"Delete",children:(0,t.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]})}),c=(0,r.memo)(function({documents:e,onPreview:r,onMove:s,onDelete:l}){return(0,t.jsx)("div",{className:"overflow-hidden rounded-lg border border-gray-200 bg-white",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Name"}),(0,t.jsx)("th",{className:"hidden px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 sm:table-cell",children:"Size"}),(0,t.jsx)("th",{className:"hidden px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 md:table-cell",children:"Uploaded"}),(0,t.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-200",children:e.map(e=>(0,t.jsx)(d,{document:e,onPreview:r,onMove:s,onDelete:l},e.id))})]})})});e.s(["DocumentList",0,c],64418);var u=e.i(84093);function m({document:s,onClose:l}){let{user:a}=(0,u.useAuth)(),[n,o]=(0,r.useState)(null),[i,d]=(0,r.useState)(!0),[c,m]=(0,r.useState)(null),h=(0,r.useCallback)(async()=>{if(a){d(!0),m(null);try{let{getIdToken:t}=await e.A(33733),r=await t();if(!r)throw Error("Not authenticated");let l=await fetch(`/api/documents/${s.id}`,{headers:{Authorization:`Bearer ${r}`}}),a=await l.json();if(!l.ok)throw Error(a.error||"Failed to load document");o(a.presignedUrl)}catch(e){m(e instanceof Error?e.message:"Failed to load document")}finally{d(!1)}}},[s.id,a]);return(0,r.useEffect)(()=>{h()},[h]),(0,r.useEffect)(()=>{let e=e=>{"Escape"===e.key&&l()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[l]),(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex flex-col bg-black/90",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between bg-gray-900 px-4 py-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("svg",{className:"h-6 w-6 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-medium text-white",children:s.name}),(0,t.jsx)("p",{className:"text-sm text-gray-400",children:s.original_name})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[n&&(0,t.jsxs)("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 rounded-lg bg-blue-600 px-3 py-2 text-sm font-medium text-white hover:bg-blue-700",children:[(0,t.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download"]}),(0,t.jsx)("button",{onClick:l,className:"rounded-lg p-2 text-gray-400 hover:bg-gray-800 hover:text-white",children:(0,t.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-hidden",children:[i&&(0,t.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,t.jsx)("div",{className:"h-12 w-12 animate-spin rounded-full border-4 border-blue-600 border-t-transparent"}),(0,t.jsx)("p",{className:"text-gray-400",children:"Loading document..."})]})}),c&&(0,t.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4 text-center",children:[(0,t.jsx)("svg",{className:"h-16 w-16 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,t.jsx)("p",{className:"text-lg text-white",children:c}),(0,t.jsx)("button",{onClick:h,className:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700",children:"Try Again"})]})}),!i&&!c&&n&&(0,t.jsx)("iframe",{src:n,className:"h-full w-full",title:`Preview of ${s.name}`})]})]})}function h({document:e,folders:s,onMove:l,onClose:a}){let[n,o]=(0,r.useState)(e.folder_id),[i,d]=(0,r.useState)(new Set),[c,u]=(0,r.useState)(!1),m=(0,r.useCallback)(e=>{d(t=>{let r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r})},[]);(0,r.useEffect)(()=>{let e=e=>{"Escape"!==e.key||c||a()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[a,c]);let h=async()=>{if(n===e.folder_id)return void a();u(!0);try{await l(e.id,n),a()}finally{u(!1)}},x=s.filter(e=>null===e.parent_id),f=(r,l=0)=>{let a,d=(a=r.id,s.filter(e=>e.parent_id===a)),c=d.length>0,u=i.has(r.id),h=r.id===n,x=r.id===e.folder_id;return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:`
            flex items-center gap-2 rounded-lg px-3 py-2 cursor-pointer transition-colors
            ${h?"bg-blue-100 text-blue-900":"hover:bg-gray-100"}
            ${x?"border-l-2 border-blue-500":""}
          `,style:{paddingLeft:`${20*l+12}px`},children:[c?(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),m(r.id)},className:"p-0.5 hover:bg-gray-200 rounded",children:(0,t.jsx)("svg",{className:`h-4 w-4 text-gray-500 transition-transform ${u?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}):(0,t.jsx)("span",{className:"w-5"}),(0,t.jsxs)("button",{onClick:()=>o(r.id),className:"flex items-center gap-2 flex-1 text-left",children:[(0,t.jsx)("svg",{className:`h-5 w-5 ${h?"text-blue-600":"text-yellow-500"}`,fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{d:"M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"})}),(0,t.jsx)("span",{className:"text-sm font-medium",children:r.name}),x&&(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"(current)"})]})]}),c&&u&&(0,t.jsx)("div",{children:d.map(e=>f(e,l+1))})]},r.id)};return(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,t.jsxs)("div",{className:"w-full max-w-md rounded-lg bg-white shadow-xl",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between border-b border-gray-200 px-4 py-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Move Document"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 truncate max-w-xs",children:e.name})]}),(0,t.jsx)("button",{onClick:a,disabled:c,className:"rounded-lg p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600 disabled:opacity-50",children:(0,t.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsxs)("div",{className:"max-h-80 overflow-y-auto p-2",children:[(0,t.jsxs)("button",{onClick:()=>o(null),className:`
              flex w-full items-center gap-2 rounded-lg px-3 py-2 text-left transition-colors
              ${null===n?"bg-blue-100 text-blue-900":"hover:bg-gray-100"}
              ${null===e.folder_id?"border-l-2 border-blue-500":""}
            `,children:[(0,t.jsx)("svg",{className:`h-5 w-5 ${null===n?"text-blue-600":"text-gray-400"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Root (No folder)"}),null===e.folder_id&&(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"(current)"})]}),x.length>0?x.map(e=>f(e)):(0,t.jsx)("div",{className:"py-8 text-center text-sm text-gray-500",children:"No folders available"})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 border-t border-gray-200 px-4 py-3",children:[(0,t.jsx)("button",{onClick:a,disabled:c,className:"rounded-lg px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 disabled:opacity-50",children:"Cancel"}),(0,t.jsx)("button",{onClick:h,disabled:c||n===e.folder_id,className:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 disabled:opacity-50",children:c?"Moving...":"Move"})]})]})})}e.s(["DocumentPreview",()=>m],87077),e.s(["MoveDocumentModal",()=>h],18322);let x=(0,r.memo)(function({viewMode:e,onViewModeChange:s}){let l=(0,r.useCallback)(()=>s("grid"),[s]),a=(0,r.useCallback)(()=>s("list"),[s]);return(0,t.jsxs)("div",{className:"flex items-center rounded-lg border border-gray-300 bg-white p-1",role:"group","aria-label":"View mode selection",children:[(0,t.jsxs)("button",{onClick:l,className:`
          flex items-center gap-1 rounded-md px-3 py-1.5 text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-1
          ${"grid"===e?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}
        `,"aria-label":"Grid view","aria-pressed":"grid"===e,children:[(0,t.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Grid"})]}),(0,t.jsxs)("button",{onClick:a,className:`
          flex items-center gap-1 rounded-md px-3 py-1.5 text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-1
          ${"list"===e?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}
        `,"aria-label":"List view","aria-pressed":"list"===e,children:[(0,t.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"List"})]})]})});e.s(["ViewToggle",0,x],85634),e.s([],70449)},93582,e=>{"use strict";var t=e.i(43476),r=e.i(71645);function s({isOpen:e,title:s,message:l,confirmLabel:a="Confirm",cancelLabel:n="Cancel",variant:o="danger",onConfirm:i,onCancel:d}){let c=(0,r.useRef)(null),u=(0,r.useRef)(null),m=(0,r.useRef)(null);(0,r.useEffect)(()=>{e&&u.current?.focus()},[e]);let h=(0,r.useCallback)(t=>{if(e){if("Escape"===t.key)return void d();if("Tab"===t.key){let e=[u.current,m.current].filter(Boolean),r=e[0],s=e[e.length-1];t.shiftKey?document.activeElement===r&&(t.preventDefault(),s?.focus()):document.activeElement===s&&(t.preventDefault(),r?.focus())}}},[e,d]);return((0,r.useEffect)(()=>(document.addEventListener("keydown",h),()=>document.removeEventListener("keydown",h)),[h]),(0,r.useEffect)(()=>(e&&(document.body.style.overflow="hidden"),()=>{document.body.style.overflow=""}),[e]),e)?(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:d,"aria-hidden":"true"}),(0,t.jsxs)("div",{ref:c,role:"alertdialog","aria-modal":"true","aria-labelledby":"dialog-title","aria-describedby":"dialog-description",tabIndex:-1,className:"relative z-10 w-full max-w-md rounded-lg bg-white p-4 sm:p-6 shadow-xl",children:[(0,t.jsx)("h2",{id:"dialog-title",className:"text-base sm:text-lg font-semibold text-gray-900",children:s}),(0,t.jsx)("p",{id:"dialog-description",className:"mt-2 text-sm text-gray-600",children:l}),(0,t.jsxs)("div",{className:"mt-4 sm:mt-6 flex flex-col-reverse sm:flex-row sm:justify-end gap-2 sm:gap-3",children:[(0,t.jsx)("button",{ref:u,type:"button",onClick:d,className:"w-full sm:w-auto rounded-lg border border-gray-300 px-4 py-2.5 sm:py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-500 focus-visible:ring-offset-2 active:scale-[0.98]",children:n}),(0,t.jsx)("button",{ref:m,type:"button",onClick:i,className:`w-full sm:w-auto rounded-lg px-4 py-2.5 sm:py-2 text-sm font-medium text-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 active:scale-[0.98] ${{danger:"bg-red-600 hover:bg-red-700 focus:ring-red-500",warning:"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500",info:"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500"}[o]}`,children:a})]})]})]}):null}e.s(["ConfirmDialog",()=>s])},28994,e=>{"use strict";var t=e.i(43476),r=e.i(22016);function s({items:e,onItemClick:s,className:l="",showHomeIcon:a=!0}){return 0===e.length?null:(0,t.jsx)("nav",{className:`flex items-center ${l}`,"aria-label":"Breadcrumb",children:(0,t.jsx)("ol",{className:"flex items-center gap-1 text-sm",children:e.map((l,n)=>{let o=n===e.length-1,i=0===n;return(0,t.jsxs)("li",{className:"flex items-center",children:[!i&&(0,t.jsx)("svg",{className:"mx-1 h-4 w-4 flex-shrink-0 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),o?(0,t.jsxs)("span",{className:"flex items-center gap-1.5 font-medium text-gray-900","aria-current":"page",children:[i&&a&&(0,t.jsx)("svg",{className:"h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),!i&&(0,t.jsx)("svg",{className:"h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})}),(0,t.jsx)("span",{className:"truncate max-w-[200px]",children:l.name})]}):l.href?(0,t.jsxs)(r.default,{href:l.href,className:"flex items-center gap-1.5 rounded px-2 py-1 text-gray-500 transition-colors hover:bg-gray-100 hover:text-gray-700",children:[i&&a&&(0,t.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),(0,t.jsx)("span",{className:"truncate max-w-[150px]",children:l.name})]}):(0,t.jsxs)("button",{onClick:()=>s?.(l,n),className:"flex items-center gap-1.5 rounded px-2 py-1 text-gray-500 transition-colors hover:bg-gray-100 hover:text-gray-700",children:[i&&a&&(0,t.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),(0,t.jsx)("span",{className:"truncate max-w-[150px]",children:l.name})]})]},l.id??"root")})})})}function l(e,t){let r=[{id:null,name:"Root"}];if(!t)return r;let s=[],l=e.find(e=>e.id===t);for(;l;)s.unshift(l),l=l.parent_id?e.find(e=>e.id===l.parent_id):void 0;for(let e of s)r.push({id:e.id,name:e.name});return r}e.s(["Breadcrumbs",()=>s,"buildBreadcrumbsFromPath",()=>l])},28860,e=>{"use strict";var t=e.i(71645);function r(e,r){let[s,l]=(0,t.useState)(e);return(0,t.useEffect)(()=>{let t=setTimeout(()=>{l(e)},r);return()=>{clearTimeout(t)}},[e,r]),s}e.s(["useDebounce",()=>r])},56403,80438,90757,e=>{"use strict";var t=e.i(43476),r=e.i(71645);function s({isOpen:e,parentFolderName:s,onClose:l,onCreate:a}){let[n,o]=(0,r.useState)(""),[i,d]=(0,r.useState)(null),[c,u]=(0,r.useState)(!1),m=(0,r.useRef)(null);(0,r.useEffect)(()=>{e&&(o(""),d(null),setTimeout(()=>m.current?.focus(),100))},[e]),(0,r.useEffect)(()=>{let t=t=>{"Escape"===t.key&&e&&l()};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e,l]);let h=async e=>{e.preventDefault();let t=n.trim();if(!t)return void d("Folder name is required");if(t.includes("/")||t.includes("\\"))return void d("Folder name cannot contain slashes");u(!0),d(null);try{await a(t),l()}catch(e){d(e instanceof Error?e.message:"Failed to create folder")}finally{u(!1)}};return e?(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:l,"aria-hidden":"true"}),(0,t.jsxs)("div",{role:"dialog","aria-modal":"true","aria-labelledby":"create-folder-title",className:"relative z-10 w-full max-w-md rounded-lg bg-white p-6 shadow-xl",children:[(0,t.jsx)("h2",{id:"create-folder-title",className:"text-lg font-semibold text-gray-900",children:"Create New Folder"}),s&&(0,t.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["Creating in: ",s]}),(0,t.jsxs)("form",{onSubmit:h,className:"mt-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"folder-name",className:"block text-sm font-medium text-gray-700",children:"Folder Name"}),(0,t.jsx)("input",{ref:m,id:"folder-name",type:"text",value:n,onChange:e=>o(e.target.value),placeholder:"Enter folder name",className:"mt-1 block w-full rounded-lg border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",disabled:c}),i&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:i})]}),(0,t.jsxs)("div",{className:"mt-6 flex justify-end gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:l,disabled:c,className:"rounded-lg border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 disabled:opacity-50",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:c||!n.trim(),className:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50",children:c?"Creating...":"Create Folder"})]})]})]})]}):null}function l({isOpen:e,currentName:s,onClose:l,onRename:a}){let[n,o]=(0,r.useState)(s),[i,d]=(0,r.useState)(null),[c,u]=(0,r.useState)(!1),m=(0,r.useRef)(null);(0,r.useEffect)(()=>{e&&(o(s),d(null),setTimeout(()=>{m.current?.focus(),m.current?.select()},100))},[e,s]),(0,r.useEffect)(()=>{let t=t=>{"Escape"===t.key&&e&&l()};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e,l]);let h=async e=>{e.preventDefault();let t=n.trim();if(!t)return void d("Folder name is required");if(t===s)return void l();if(t.includes("/")||t.includes("\\"))return void d("Folder name cannot contain slashes");u(!0),d(null);try{await a(t),l()}catch(e){d(e instanceof Error?e.message:"Failed to rename folder")}finally{u(!1)}};return e?(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:l,"aria-hidden":"true"}),(0,t.jsxs)("div",{role:"dialog","aria-modal":"true","aria-labelledby":"rename-folder-title",className:"relative z-10 w-full max-w-md rounded-lg bg-white p-6 shadow-xl",children:[(0,t.jsx)("h2",{id:"rename-folder-title",className:"text-lg font-semibold text-gray-900",children:"Rename Folder"}),(0,t.jsxs)("form",{onSubmit:h,className:"mt-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"new-folder-name",className:"block text-sm font-medium text-gray-700",children:"New Name"}),(0,t.jsx)("input",{ref:m,id:"new-folder-name",type:"text",value:n,onChange:e=>o(e.target.value),placeholder:"Enter new folder name",className:"mt-1 block w-full rounded-lg border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",disabled:c}),i&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:i})]}),(0,t.jsxs)("div",{className:"mt-6 flex justify-end gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:l,disabled:c,className:"rounded-lg border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 disabled:opacity-50",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:c||!n.trim(),className:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50",children:c?"Renaming...":"Rename"})]})]})]})]}):null}function a({isOpen:e,folder:s,allFolders:l,onClose:a,onMove:n}){let[o,i]=(0,r.useState)(null),[d,c]=(0,r.useState)(null),[u,m]=(0,r.useState)(!1);(0,r.useEffect)(()=>{e&&s&&(i(s.parent_id),c(null))},[e,s]),(0,r.useEffect)(()=>{let t=t=>{"Escape"===t.key&&e&&a()};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e,a]);let h=async e=>{if(e.preventDefault(),s){if(o===s.parent_id)return void a();m(!0),c(null);try{await n(o),a()}catch(e){c(e instanceof Error?e.message:"Failed to move folder")}finally{m(!1)}}};if(!e||!s)return null;let x=(()=>{if(!s)return[];let e=s.path;return l.filter(t=>!(t.id===s.id||t.path.startsWith(e+"/")))})();return(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:a,"aria-hidden":"true"}),(0,t.jsxs)("div",{role:"dialog","aria-modal":"true","aria-labelledby":"move-folder-title",className:"relative z-10 w-full max-w-md rounded-lg bg-white p-6 shadow-xl",children:[(0,t.jsx)("h2",{id:"move-folder-title",className:"text-lg font-semibold text-gray-900",children:"Move Folder"}),(0,t.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["Moving: ",(0,t.jsx)("span",{className:"font-medium",children:s.name})]}),(0,t.jsxs)("form",{onSubmit:h,className:"mt-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"destination-folder",className:"block text-sm font-medium text-gray-700",children:"Destination"}),(0,t.jsxs)("select",{id:"destination-folder",value:o||"",onChange:e=>i(e.target.value||null),className:"mt-1 block w-full rounded-lg border border-gray-300 px-3 py-2 text-gray-900 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",disabled:u,children:[(0,t.jsx)("option",{value:"",children:"Root (No parent)"}),x.map(e=>(0,t.jsx)("option",{value:e.id,children:e.path},e.id))]}),d&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:d})]}),(0,t.jsxs)("div",{className:"mt-6 flex justify-end gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:a,disabled:u,className:"rounded-lg border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 disabled:opacity-50",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:u,className:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50",children:u?"Moving...":"Move"})]})]})]})]})}e.s(["CreateFolderModal",()=>s],56403),e.s(["RenameFolderModal",()=>l],80438),e.s(["MoveFolderModal",()=>a],90757)},60159,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(18566),l=e.i(17780),a=e.i(18339),n=e.i(77001),o=e.i(28994),i=e.i(56403),d=e.i(80438),c=e.i(90757);e.i(70449);var u=e.i(18322),m=e.i(87077),h=e.i(85634),x=e.i(93582),f=e.i(88442),g=e.i(88840),p=e.i(28860);let v=(0,r.memo)(function e({node:s,level:l,currentFolderId:a,expandedFolders:n,onToggleExpand:o,onSelect:i,allFolders:d}){let c=n.has(s.folder.id),u=a===s.folder.id,m=s.children.length>0,h=(0,r.useCallback)(e=>{e.stopPropagation(),o(s.folder.id)},[s.folder.id,o]),x=(0,r.useCallback)(()=>{i(s.folder.id)},[s.folder.id,i]);return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:`group flex items-center gap-1 py-1.5 px-2 rounded-md cursor-pointer transition-colors ${u?"bg-blue-100 text-blue-700":"hover:bg-gray-100 text-gray-700"}`,style:{paddingLeft:`${12*l+8}px`},onClick:x,role:"treeitem","aria-selected":u,"aria-expanded":m?c:void 0,children:[(0,t.jsx)("button",{onClick:h,className:`flex-shrink-0 w-4 h-4 flex items-center justify-center rounded hover:bg-gray-200 ${!m?"invisible":""}`,"aria-label":c?"Collapse":"Expand",tabIndex:-1,children:(0,t.jsx)("svg",{className:`w-3 h-3 text-gray-500 transition-transform ${c?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),(0,t.jsx)("svg",{className:`w-4 h-4 flex-shrink-0 ${u?"text-blue-600":"text-yellow-500"}`,fill:"currentColor",viewBox:"0 0 20 20",children:c&&m?(0,t.jsx)("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1H8a3 3 0 00-3 3v1.5a1.5 1.5 0 01-3 0V6z",clipRule:"evenodd"}):(0,t.jsx)("path",{d:"M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"})}),(0,t.jsx)("span",{className:"truncate text-sm flex-1",children:s.folder.name})]}),c&&m&&(0,t.jsx)("div",{role:"group",children:s.children.map(r=>(0,t.jsx)(e,{node:r,level:l+1,currentFolderId:a,expandedFolders:n,onToggleExpand:o,onSelect:i,allFolders:d},r.folder.id))})]})}),b=(0,r.memo)(function({folders:e,currentFolderId:s,onFolderSelect:l,isCollapsed:a=!1,onToggleCollapse:n}){let o,i,d,[c,u]=(0,r.useState)(new Set),m=(o=new Map,i=[],e.forEach(e=>{o.set(e.id,{folder:e,children:[]})}),e.forEach(e=>{let t=o.get(e.id);if(null===e.parent_id)i.push(t);else{let r=o.get(e.parent_id);r?r.children.push(t):i.push(t)}}),(d=e=>{e.sort((e,t)=>e.folder.name.localeCompare(t.folder.name)),e.forEach(e=>d(e.children))})(i),i);(0,r.useEffect)(()=>{s&&u(t=>{let r=new Set(t);return e.forEach(t=>{(function(e,t,r){if(!r)return!1;let s=e.find(e=>e.id===r);for(;s;){if(s.parent_id===t)return!0;s=e.find(e=>e.id===s?.parent_id)}return!1})(e,t.id,s)&&r.add(t.id)}),e.find(e=>e.id===s)&&e.some(e=>e.parent_id===s)&&r.add(s),r})},[s,e]);let h=(0,r.useCallback)(e=>{u(t=>{let r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r})},[]),x=(0,r.useCallback)(()=>{l(null)},[l]),f=(0,r.useCallback)(e=>{l(e)},[l]);return a?(0,t.jsx)("div",{className:"w-10 flex-shrink-0 border-r border-gray-200 bg-gray-50",children:(0,t.jsx)("button",{onClick:n,className:"w-full p-2 hover:bg-gray-100 flex items-center justify-center","aria-label":"Expand folder navigation",children:(0,t.jsx)("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})}):(0,t.jsxs)("div",{className:"w-56 flex-shrink-0 border-r border-gray-200 bg-gray-50 flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 border-b border-gray-200",children:[(0,t.jsx)("span",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Folders"}),n&&(0,t.jsx)("button",{onClick:n,className:"p-1 hover:bg-gray-200 rounded","aria-label":"Collapse folder navigation",children:(0,t.jsx)("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto py-2",role:"tree","aria-label":"Folder navigation",children:[(0,t.jsxs)("div",{className:`flex items-center gap-2 py-1.5 px-3 rounded-md cursor-pointer transition-colors mx-1 ${null===s?"bg-blue-100 text-blue-700":"hover:bg-gray-100 text-gray-700"}`,onClick:x,role:"treeitem","aria-selected":null===s,children:[(0,t.jsx)("svg",{className:`w-4 h-4 ${null===s?"text-blue-600":"text-gray-500"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"My Files"})]}),(0,t.jsx)("div",{className:"mt-1 mx-1",children:m.map(r=>(0,t.jsx)(v,{node:r,level:0,currentFolderId:s,expandedFolders:c,onToggleExpand:h,onSelect:f,allFolders:e},r.folder.id))}),0===m.length&&(0,t.jsx)("div",{className:"px-3 py-4 text-center text-xs text-gray-500",children:"No folders yet"})]})]})}),j=(0,r.memo)(function({folder:e,onNavigate:s,onRename:l,onMove:a,onDelete:n}){let[o,i]=(0,r.useState)(!1);return(0,t.jsxs)("div",{className:"group relative flex items-center gap-3 rounded-lg border border-gray-200 bg-white p-3 sm:p-4 transition-all hover:border-blue-300 hover:shadow-md cursor-pointer",onClick:()=>s(e),onKeyDown:t=>{"Enter"===t.key&&s(e)},tabIndex:0,role:"button","aria-label":`Open folder ${e.name}`,children:[(0,t.jsx)("div",{className:"flex h-10 w-10 sm:h-12 sm:w-12 flex-shrink-0 items-center justify-center rounded-lg bg-gradient-to-r from-blue-100 to-purple-100",children:(0,t.jsx)("svg",{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Folder"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),i(!o)},className:"rounded-lg p-2 text-gray-400 hover:bg-gray-100 hover:text-gray-600 sm:opacity-0 group-hover:opacity-100","aria-label":"Actions",children:(0,t.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),o&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"fixed inset-0 z-10",onClick:e=>{e.stopPropagation(),i(!1)}}),(0,t.jsxs)("div",{className:"absolute right-0 top-full z-20 mt-1 w-40 rounded-lg border border-gray-200 bg-white py-1 shadow-lg",children:[(0,t.jsxs)("button",{onClick:t=>{t.stopPropagation(),i(!1),l(e)},className:"flex w-full items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[(0,t.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Rename"]}),(0,t.jsxs)("button",{onClick:t=>{t.stopPropagation(),i(!1),a(e)},className:"flex w-full items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[(0,t.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),"Move"]}),(0,t.jsx)("hr",{className:"my-1"}),(0,t.jsxs)("button",{onClick:t=>{t.stopPropagation(),i(!1),n(e)},className:"flex w-full items-center gap-2 px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:[(0,t.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})]})]})]})}),y=(0,r.memo)(function({document:e,onPreview:s,onMove:l,onDelete:a}){var n;let[o,i]=(0,r.useState)(!1);return(0,t.jsxs)("div",{className:"group relative flex items-center gap-3 rounded-lg border border-gray-200 bg-white p-3 sm:p-4 transition-all hover:border-gray-300 hover:shadow-md cursor-pointer",onClick:()=>s(e),onKeyDown:t=>{"Enter"===t.key&&s(e)},tabIndex:0,role:"button","aria-label":`Preview ${e.name}`,children:[(0,t.jsx)("div",{className:"flex h-10 w-10 sm:h-12 sm:w-12 flex-shrink-0 items-center justify-center rounded-lg bg-red-50",children:(0,t.jsx)("svg",{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:(n=e.file_size)<1024?`${n} B`:n<1048576?`${(n/1024).toFixed(1)} KB`:`${(n/1048576).toFixed(1)} MB`})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),i(!o)},className:"rounded-lg p-2 text-gray-400 hover:bg-gray-100 hover:text-gray-600 sm:opacity-0 group-hover:opacity-100","aria-label":"Actions",children:(0,t.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),o&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"fixed inset-0 z-10",onClick:e=>{e.stopPropagation(),i(!1)}}),(0,t.jsxs)("div",{className:"absolute right-0 top-full z-20 mt-1 w-40 rounded-lg border border-gray-200 bg-white py-1 shadow-lg",children:[(0,t.jsxs)("button",{onClick:t=>{t.stopPropagation(),i(!1),s(e)},className:"flex w-full items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[(0,t.jsxs)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Preview"]}),(0,t.jsxs)("button",{onClick:t=>{t.stopPropagation(),i(!1),l(e)},className:"flex w-full items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[(0,t.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),"Move"]}),(0,t.jsx)("hr",{className:"my-1"}),(0,t.jsxs)("button",{onClick:t=>{t.stopPropagation(),i(!1),a(e)},className:"flex w-full items-center gap-2 px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:[(0,t.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})]})]})]})});function w({initialFolderId:l=null}){let v=(0,s.useRouter)(),w=(0,g.useToast)(),[k,N]=(0,r.useState)(l),[C,L]=(0,r.useState)([{id:null,name:"My Files"}]),[M,F]=(0,r.useState)(""),[E,S]=(0,r.useState)("list"),[$,B]=(0,r.useState)(!1),{folders:z,loading:P,error:D,fetchFolders:W,createFolder:A,renameFolder:R,deleteFolder:T,moveFolder:H}=(0,a.useFolders)(),{documents:I,loading:U,error:V,fetchDocuments:_,searchDocuments:O,deleteDocument:K,moveDocument:G}=(0,n.useDocuments)(),[J,q]=(0,r.useState)(!1),[X,Q]=(0,r.useState)(null),[Y,Z]=(0,r.useState)(null),[ee,et]=(0,r.useState)(null),[er,es]=(0,r.useState)(null),[el,ea]=(0,r.useState)(null),[en,eo]=(0,r.useState)([]),ei=(0,p.useDebounce)(M,300),ed=P||U,ec=D||V;(0,r.useEffect)(()=>{ei.trim()?O(ei):(W(k),_(k))},[k,ei,W,_,O]),(0,r.useEffect)(()=>{let e=(0,o.buildBreadcrumbsFromPath)(z,k);if(e.length>0){let t=e[0];t&&"Root"===t.name&&(t.name="My Files")}L(e)},[k,z]),(0,r.useEffect)(()=>{(async()=>{try{let{getIdToken:t}=await e.A(33733),r=await t();if(!r)return;let s=await fetch("/api/folders",{headers:{Authorization:`Bearer ${r}`}});if(s.ok){let e=await s.json();eo(e.folders||[])}}catch(e){console.error("Failed to fetch all folders:",e)}})()},[z]);let eu=(0,r.useCallback)(e=>{N(e.id),F("")},[]),em=(0,r.useCallback)(e=>{N(e.id),F("")},[]),eh=(0,r.useCallback)(e=>{N(e),F("")},[]),ex=(0,r.useCallback)(()=>{B(e=>!e)},[]),ef=(0,r.useCallback)(async e=>{if(await A(e,k))w.success(`Folder "${e}" created`);else throw w.error("Failed to create folder"),Error("Failed to create folder")},[A,k,w]),eg=(0,r.useCallback)(async e=>{if(X)if(await R(X.id,e))w.success(`Folder renamed to "${e}"`);else throw w.error("Failed to rename folder"),Error("Failed to rename folder")},[R,X,w]),ep=(0,r.useCallback)(async e=>{if(Y)if(await H(Y.id,e))w.success("Folder moved"),W(k);else throw w.error("Failed to move folder"),Error("Failed to move folder")},[H,Y,w,W,k]),ev=(0,r.useCallback)(async(e,t)=>{await G(e,t)?(w.success("Document moved"),_(k)):w.error("Failed to move document")},[G,w,_,k]),eb=(0,r.useCallback)(async()=>{el&&("folder"===el.type?await T(el.item.id)?w.success(`Folder "${el.item.name}" deleted`):w.error("Failed to delete folder"):await K(el.item.id)?w.success(`"${el.item.name}" deleted`):w.error("Failed to delete document"),ea(null))},[el,T,K,w]),ej=ei.trim()?[]:z.filter(e=>e.parent_id===k),ey=0===ej.length&&0===I.length;return(0,t.jsxs)("div",{className:"flex h-[calc(100vh-12rem)] min-h-[500px] rounded-lg border border-gray-200 bg-white overflow-hidden",children:[(0,t.jsx)("div",{className:"hidden md:block",children:(0,t.jsx)(b,{folders:en,currentFolderId:k,onFolderSelect:eh,isCollapsed:$,onToggleCollapse:ex})}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-3 p-4 border-b border-gray-200 bg-white",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:ex,className:"md:hidden p-2 hover:bg-gray-100 rounded-lg","aria-label":"Toggle folder navigation",children:(0,t.jsx)("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,t.jsx)("div",{children:(0,t.jsx)(o.Breadcrumbs,{items:C,onItemClick:em,showHomeIcon:!0})})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("button",{onClick:()=>q(!0),className:"flex items-center gap-2 rounded-lg border border-gray-300 bg-white px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-50",children:[(0,t.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"New Folder"})]}),(0,t.jsxs)("button",{onClick:()=>v.push(`/dashboard/files/upload${k?`?folderId=${k}`:""}`),className:"flex items-center gap-2 rounded-lg bg-blue-600 px-3 py-1.5 text-sm font-medium text-white hover:bg-blue-700",children:[(0,t.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Upload"})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,t.jsx)("svg",{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,t.jsx)("input",{type:"text",placeholder:"Search files...",value:M,onChange:e=>F(e.target.value),className:"w-full rounded-lg border border-gray-300 py-1.5 pl-9 pr-4 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),(0,t.jsx)(h.ViewToggle,{viewMode:E,onViewModeChange:S})]})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-4",children:[ec&&(0,t.jsx)("div",{className:"rounded-lg bg-red-50 p-4 text-sm text-red-600 mb-4",children:ec}),ed&&ey&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(f.FolderGridSkeleton,{count:3}),(0,t.jsx)(f.DocumentGridSkeleton,{count:4})]}),!ed&&ey&&!ei.trim()&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-full min-h-[300px] text-center",children:[(0,t.jsx)("svg",{className:"h-16 w-16 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})}),(0,t.jsx)("h3",{className:"mt-4 text-sm font-medium text-gray-900",children:"This folder is empty"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Create a folder or upload files to get started."}),(0,t.jsxs)("div",{className:"mt-4 flex gap-3",children:[(0,t.jsxs)("button",{onClick:()=>q(!0),className:"inline-flex items-center gap-2 rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:[(0,t.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})}),"New Folder"]}),(0,t.jsxs)("button",{onClick:()=>v.push(`/dashboard/files/upload${k?`?folderId=${k}`:""}`),className:"inline-flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700",children:[(0,t.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Upload Files"]})]})]}),!ed&&ey&&ei.trim()&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-full min-h-[300px] text-center",children:[(0,t.jsx)("svg",{className:"h-16 w-16 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,t.jsx)("h3",{className:"mt-4 text-sm font-medium text-gray-900",children:"No results found"}),(0,t.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["No files match â€œ",ei,"â€"]})]}),!ey&&(0,t.jsxs)("div",{className:"space-y-6",children:[ej.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"mb-3 text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Folders"}),(0,t.jsx)("div",{className:"grid"===E?"grid gap-3 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"space-y-2",children:ej.map(e=>(0,t.jsx)(j,{folder:e,onNavigate:eu,onRename:Q,onMove:Z,onDelete:e=>ea({type:"folder",item:e})},e.id))})]}),I.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"mb-3 text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Files"}),(0,t.jsx)("div",{className:"grid"===E?"grid gap-3 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"space-y-2",children:I.map(e=>(0,t.jsx)(y,{document:e,onPreview:es,onMove:et,onDelete:e=>ea({type:"document",item:e})},e.id))})]})]})]})]}),(0,t.jsx)(i.CreateFolderModal,{isOpen:J,onClose:()=>q(!1),onCreate:ef}),(0,t.jsx)(d.RenameFolderModal,{isOpen:!!X,currentName:X?.name||"",onClose:()=>Q(null),onRename:eg}),(0,t.jsx)(c.MoveFolderModal,{isOpen:!!Y,folder:Y,allFolders:en.length>0?en:z,onClose:()=>Z(null),onMove:ep}),ee&&(0,t.jsx)(u.MoveDocumentModal,{document:ee,folders:en.length>0?en:z,onMove:ev,onClose:()=>et(null)}),er&&(0,t.jsx)(m.DocumentPreview,{document:er,onClose:()=>es(null)}),(0,t.jsx)(x.ConfirmDialog,{isOpen:!!el,title:el?.type==="folder"?"Delete Folder":"Delete File",message:el?"folder"===el.type?`Are you sure you want to delete "${el.item.name}"? This will also delete all contents inside. This action cannot be undone.`:`Are you sure you want to delete "${el.item.name}"? This action cannot be undone.`:"",confirmLabel:"Delete",variant:"danger",onConfirm:eb,onCancel:()=>ea(null)})]})}function k(){let e=(0,s.useSearchParams)().get("folderId");return(0,t.jsx)(l.DashboardLayout,{children:(0,t.jsx)("div",{className:"p-4 h-full",children:(0,t.jsx)(w,{initialFolderId:e})})})}function N(){return(0,t.jsx)(r.Suspense,{fallback:(0,t.jsx)(l.DashboardLayout,{children:(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-blue-600 border-t-transparent"})})}),children:(0,t.jsx)(k,{})})}e.s(["default",()=>N],60159)},33733,e=>{e.v(e=>Promise.resolve().then(()=>e(87145)))}]);