module.exports=[12616,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(27520),f=a.i(83347),g=a.i(89789),h=a.i(28948),i=a.i(99648),j=a.i(11972),k=a.i(74423);a.i(78122);var l=a.i(26e3),m=a.i(29972),n=a.i(7402),o=a.i(12171),p=a.i(15720),q=a.i(18604),r=a.i(97948);let s=(0,c.memo)(function a({node:d,level:e,currentFolderId:f,expandedFolders:g,onToggleExpand:h,onSelect:i,allFolders:j}){let k=g.has(d.folder.id),l=f===d.folder.id,m=d.children.length>0,n=(0,c.useCallback)(a=>{a.stopPropagation(),h(d.folder.id)},[d.folder.id,h]),o=(0,c.useCallback)(()=>{i(d.folder.id)},[d.folder.id,i]);return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:`group flex items-center gap-1 py-1.5 px-2 rounded-md cursor-pointer transition-colors ${l?"bg-blue-100 text-blue-700":"hover:bg-gray-100 text-gray-700"}`,style:{paddingLeft:`${12*e+8}px`},onClick:o,role:"treeitem","aria-selected":l,"aria-expanded":m?k:void 0,children:[(0,b.jsx)("button",{onClick:n,className:`flex-shrink-0 w-4 h-4 flex items-center justify-center rounded hover:bg-gray-200 ${!m?"invisible":""}`,"aria-label":k?"Collapse":"Expand",tabIndex:-1,children:(0,b.jsx)("svg",{className:`w-3 h-3 text-gray-500 transition-transform ${k?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),(0,b.jsx)("svg",{className:`w-4 h-4 flex-shrink-0 ${l?"text-blue-600":"text-yellow-500"}`,fill:"currentColor",viewBox:"0 0 20 20",children:k&&m?(0,b.jsx)("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1H8a3 3 0 00-3 3v1.5a1.5 1.5 0 01-3 0V6z",clipRule:"evenodd"}):(0,b.jsx)("path",{d:"M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"})}),(0,b.jsx)("span",{className:"truncate text-sm flex-1",children:d.folder.name})]}),k&&m&&(0,b.jsx)("div",{role:"group",children:d.children.map(c=>(0,b.jsx)(a,{node:c,level:e+1,currentFolderId:f,expandedFolders:g,onToggleExpand:h,onSelect:i,allFolders:j},c.folder.id))})]})}),t=(0,c.memo)(function({folders:a,currentFolderId:d,onFolderSelect:e,isCollapsed:f=!1,onToggleCollapse:g}){let h,i,j,[k,l]=(0,c.useState)(new Set),m=(h=new Map,i=[],a.forEach(a=>{h.set(a.id,{folder:a,children:[]})}),a.forEach(a=>{let b=h.get(a.id);if(null===a.parent_id)i.push(b);else{let c=h.get(a.parent_id);c?c.children.push(b):i.push(b)}}),(j=a=>{a.sort((a,b)=>a.folder.name.localeCompare(b.folder.name)),a.forEach(a=>j(a.children))})(i),i);(0,c.useEffect)(()=>{d&&l(b=>{let c=new Set(b);return a.forEach(b=>{(function(a,b,c){if(!c)return!1;let d=a.find(a=>a.id===c);for(;d;){if(d.parent_id===b)return!0;d=a.find(a=>a.id===d?.parent_id)}return!1})(a,b.id,d)&&c.add(b.id)}),a.find(a=>a.id===d)&&a.some(a=>a.parent_id===d)&&c.add(d),c})},[d,a]);let n=(0,c.useCallback)(a=>{l(b=>{let c=new Set(b);return c.has(a)?c.delete(a):c.add(a),c})},[]),o=(0,c.useCallback)(()=>{e(null)},[e]),p=(0,c.useCallback)(a=>{e(a)},[e]);return f?(0,b.jsx)("div",{className:"w-10 flex-shrink-0 border-r border-gray-200 bg-gray-50",children:(0,b.jsx)("button",{onClick:g,className:"w-full p-2 hover:bg-gray-100 flex items-center justify-center","aria-label":"Expand folder navigation",children:(0,b.jsx)("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})}):(0,b.jsxs)("div",{className:"w-56 flex-shrink-0 border-r border-gray-200 bg-gray-50 flex flex-col",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 border-b border-gray-200",children:[(0,b.jsx)("span",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Folders"}),g&&(0,b.jsx)("button",{onClick:g,className:"p-1 hover:bg-gray-200 rounded","aria-label":"Collapse folder navigation",children:(0,b.jsx)("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})})]}),(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto py-2",role:"tree","aria-label":"Folder navigation",children:[(0,b.jsxs)("div",{className:`flex items-center gap-2 py-1.5 px-3 rounded-md cursor-pointer transition-colors mx-1 ${null===d?"bg-blue-100 text-blue-700":"hover:bg-gray-100 text-gray-700"}`,onClick:o,role:"treeitem","aria-selected":null===d,children:[(0,b.jsx)("svg",{className:`w-4 h-4 ${null===d?"text-blue-600":"text-gray-500"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),(0,b.jsx)("span",{className:"text-sm font-medium",children:"My Files"})]}),(0,b.jsx)("div",{className:"mt-1 mx-1",children:m.map(c=>(0,b.jsx)(s,{node:c,level:0,currentFolderId:d,expandedFolders:k,onToggleExpand:n,onSelect:p,allFolders:a},c.folder.id))}),0===m.length&&(0,b.jsx)("div",{className:"px-3 py-4 text-center text-xs text-gray-500",children:"No folders yet"})]})]})}),u=(0,c.memo)(function({folder:a,onNavigate:d,onRename:e,onMove:f,onDelete:g}){let[h,i]=(0,c.useState)(!1);return(0,b.jsxs)("div",{className:"group relative flex items-center gap-3 rounded-lg border border-gray-200 bg-white p-3 sm:p-4 transition-all hover:border-blue-300 hover:shadow-md cursor-pointer",onClick:()=>d(a),onKeyDown:b=>{"Enter"===b.key&&d(a)},tabIndex:0,role:"button","aria-label":`Open folder ${a.name}`,children:[(0,b.jsx)("div",{className:"flex h-10 w-10 sm:h-12 sm:w-12 flex-shrink-0 items-center justify-center rounded-lg bg-gradient-to-r from-blue-100 to-purple-100",children:(0,b.jsx)("svg",{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-gray-900 truncate",children:a.name}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Folder"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("button",{onClick:a=>{a.stopPropagation(),i(!h)},className:"rounded-lg p-2 text-gray-400 hover:bg-gray-100 hover:text-gray-600 sm:opacity-0 group-hover:opacity-100","aria-label":"Actions",children:(0,b.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),h&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"fixed inset-0 z-10",onClick:a=>{a.stopPropagation(),i(!1)}}),(0,b.jsxs)("div",{className:"absolute right-0 top-full z-20 mt-1 w-40 rounded-lg border border-gray-200 bg-white py-1 shadow-lg",children:[(0,b.jsxs)("button",{onClick:b=>{b.stopPropagation(),i(!1),e(a)},className:"flex w-full items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[(0,b.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Rename"]}),(0,b.jsxs)("button",{onClick:b=>{b.stopPropagation(),i(!1),f(a)},className:"flex w-full items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[(0,b.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),"Move"]}),(0,b.jsx)("hr",{className:"my-1"}),(0,b.jsxs)("button",{onClick:b=>{b.stopPropagation(),i(!1),g(a)},className:"flex w-full items-center gap-2 px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:[(0,b.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})]})]})]})}),v=(0,c.memo)(function({document:a,onPreview:d,onMove:e,onDelete:f}){var g;let[h,i]=(0,c.useState)(!1);return(0,b.jsxs)("div",{className:"group relative flex items-center gap-3 rounded-lg border border-gray-200 bg-white p-3 sm:p-4 transition-all hover:border-gray-300 hover:shadow-md cursor-pointer",onClick:()=>d(a),onKeyDown:b=>{"Enter"===b.key&&d(a)},tabIndex:0,role:"button","aria-label":`Preview ${a.name}`,children:[(0,b.jsx)("div",{className:"flex h-10 w-10 sm:h-12 sm:w-12 flex-shrink-0 items-center justify-center rounded-lg bg-red-50",children:(0,b.jsx)("svg",{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-gray-900 truncate",children:a.name}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:(g=a.file_size)<1024?`${g} B`:g<1048576?`${(g/1024).toFixed(1)} KB`:`${(g/1048576).toFixed(1)} MB`})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("button",{onClick:a=>{a.stopPropagation(),i(!h)},className:"rounded-lg p-2 text-gray-400 hover:bg-gray-100 hover:text-gray-600 sm:opacity-0 group-hover:opacity-100","aria-label":"Actions",children:(0,b.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),h&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"fixed inset-0 z-10",onClick:a=>{a.stopPropagation(),i(!1)}}),(0,b.jsxs)("div",{className:"absolute right-0 top-full z-20 mt-1 w-40 rounded-lg border border-gray-200 bg-white py-1 shadow-lg",children:[(0,b.jsxs)("button",{onClick:b=>{b.stopPropagation(),i(!1),d(a)},className:"flex w-full items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[(0,b.jsxs)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Preview"]}),(0,b.jsxs)("button",{onClick:b=>{b.stopPropagation(),i(!1),e(a)},className:"flex w-full items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[(0,b.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),"Move"]}),(0,b.jsx)("hr",{className:"my-1"}),(0,b.jsxs)("button",{onClick:b=>{b.stopPropagation(),i(!1),f(a)},className:"flex w-full items-center gap-2 px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:[(0,b.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})]})]})]})});function w({initialFolderId:e=null}){let s=(0,d.useRouter)(),w=(0,q.useToast)(),[x,y]=(0,c.useState)(e),[z,A]=(0,c.useState)([{id:null,name:"My Files"}]),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)("list"),[F,G]=(0,c.useState)(!1),{folders:H,loading:I,error:J,fetchFolders:K,createFolder:L,renameFolder:M,deleteFolder:N,moveFolder:O}=(0,f.useFolders)(),{documents:P,loading:Q,error:R,fetchDocuments:S,searchDocuments:T,deleteDocument:U,moveDocument:V}=(0,g.useDocuments)(),[W,X]=(0,c.useState)(!1),[Y,Z]=(0,c.useState)(null),[$,_]=(0,c.useState)(null),[aa,ab]=(0,c.useState)(null),[ac,ad]=(0,c.useState)(null),[ae,af]=(0,c.useState)(null),[ag,ah]=(0,c.useState)([]),ai=(0,r.useDebounce)(B,300),aj=I||Q,ak=J||R;(0,c.useEffect)(()=>{ai.trim()?T(ai):(K(x),S(x))},[x,ai,K,S,T]),(0,c.useEffect)(()=>{let a=(0,h.buildBreadcrumbsFromPath)(H,x);if(a.length>0){let b=a[0];b&&"Root"===b.name&&(b.name="My Files")}A(a)},[x,H]),(0,c.useEffect)(()=>{(async()=>{try{let{getIdToken:b}=await a.A(30560),c=await b();if(!c)return;let d=await fetch("/api/folders",{headers:{Authorization:`Bearer ${c}`}});if(d.ok){let a=await d.json();ah(a.folders||[])}}catch(a){console.error("Failed to fetch all folders:",a)}})()},[H]);let al=(0,c.useCallback)(a=>{y(a.id),C("")},[]),am=(0,c.useCallback)(a=>{y(a.id),C("")},[]),an=(0,c.useCallback)(a=>{y(a),C("")},[]),ao=(0,c.useCallback)(()=>{G(a=>!a)},[]),ap=(0,c.useCallback)(async a=>{if(await L(a,x))w.success(`Folder "${a}" created`);else throw w.error("Failed to create folder"),Error("Failed to create folder")},[L,x,w]),aq=(0,c.useCallback)(async a=>{if(Y)if(await M(Y.id,a))w.success(`Folder renamed to "${a}"`);else throw w.error("Failed to rename folder"),Error("Failed to rename folder")},[M,Y,w]),ar=(0,c.useCallback)(async a=>{if($)if(await O($.id,a))w.success("Folder moved"),K(x);else throw w.error("Failed to move folder"),Error("Failed to move folder")},[O,$,w,K,x]),as=(0,c.useCallback)(async(a,b)=>{await V(a,b)?(w.success("Document moved"),S(x)):w.error("Failed to move document")},[V,w,S,x]),at=(0,c.useCallback)(async()=>{ae&&("folder"===ae.type?await N(ae.item.id)?w.success(`Folder "${ae.item.name}" deleted`):w.error("Failed to delete folder"):await U(ae.item.id)?w.success(`"${ae.item.name}" deleted`):w.error("Failed to delete document"),af(null))},[ae,N,U,w]),au=ai.trim()?[]:H.filter(a=>a.parent_id===x),av=0===au.length&&0===P.length;return(0,b.jsxs)("div",{className:"flex h-[calc(100vh-12rem)] min-h-[500px] rounded-lg border border-gray-200 bg-white overflow-hidden",children:[(0,b.jsx)("div",{className:"hidden md:block",children:(0,b.jsx)(t,{folders:ag,currentFolderId:x,onFolderSelect:an,isCollapsed:F,onToggleCollapse:ao})}),(0,b.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-3 p-4 border-b border-gray-200 bg-white",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{onClick:ao,className:"md:hidden p-2 hover:bg-gray-100 rounded-lg","aria-label":"Toggle folder navigation",children:(0,b.jsx)("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,b.jsx)("div",{children:(0,b.jsx)(h.Breadcrumbs,{items:z,onItemClick:am,showHomeIcon:!0})})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)("button",{onClick:()=>X(!0),className:"flex items-center gap-2 rounded-lg border border-gray-300 bg-white px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-50",children:[(0,b.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"New Folder"})]}),(0,b.jsxs)("button",{onClick:()=>s.push(`/dashboard/files/upload${x?`?folderId=${x}`:""}`),className:"flex items-center gap-2 rounded-lg bg-blue-600 px-3 py-1.5 text-sm font-medium text-white hover:bg-blue-700",children:[(0,b.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Upload"})]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,b.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,b.jsx)("svg",{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,b.jsx)("input",{type:"text",placeholder:"Search files...",value:B,onChange:a=>C(a.target.value),className:"w-full rounded-lg border border-gray-300 py-1.5 pl-9 pr-4 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),(0,b.jsx)(n.ViewToggle,{viewMode:D,onViewModeChange:E})]})]}),(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto p-4",children:[ak&&(0,b.jsx)("div",{className:"rounded-lg bg-red-50 p-4 text-sm text-red-600 mb-4",children:ak}),aj&&av&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(p.FolderGridSkeleton,{count:3}),(0,b.jsx)(p.DocumentGridSkeleton,{count:4})]}),!aj&&av&&!ai.trim()&&(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center h-full min-h-[300px] text-center",children:[(0,b.jsx)("svg",{className:"h-16 w-16 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})}),(0,b.jsx)("h3",{className:"mt-4 text-sm font-medium text-gray-900",children:"This folder is empty"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Create a folder or upload files to get started."}),(0,b.jsxs)("div",{className:"mt-4 flex gap-3",children:[(0,b.jsxs)("button",{onClick:()=>X(!0),className:"inline-flex items-center gap-2 rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:[(0,b.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})}),"New Folder"]}),(0,b.jsxs)("button",{onClick:()=>s.push(`/dashboard/files/upload${x?`?folderId=${x}`:""}`),className:"inline-flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700",children:[(0,b.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Upload Files"]})]})]}),!aj&&av&&ai.trim()&&(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center h-full min-h-[300px] text-center",children:[(0,b.jsx)("svg",{className:"h-16 w-16 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,b.jsx)("h3",{className:"mt-4 text-sm font-medium text-gray-900",children:"No results found"}),(0,b.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["No files match “",ai,"”"]})]}),!av&&(0,b.jsxs)("div",{className:"space-y-6",children:[au.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"mb-3 text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Folders"}),(0,b.jsx)("div",{className:"grid"===D?"grid gap-3 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"space-y-2",children:au.map(a=>(0,b.jsx)(u,{folder:a,onNavigate:al,onRename:Z,onMove:_,onDelete:a=>af({type:"folder",item:a})},a.id))})]}),P.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"mb-3 text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Files"}),(0,b.jsx)("div",{className:"grid"===D?"grid gap-3 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"space-y-2",children:P.map(a=>(0,b.jsx)(v,{document:a,onPreview:ad,onMove:ab,onDelete:a=>af({type:"document",item:a})},a.id))})]})]})]})]}),(0,b.jsx)(i.CreateFolderModal,{isOpen:W,onClose:()=>X(!1),onCreate:ap}),(0,b.jsx)(j.RenameFolderModal,{isOpen:!!Y,currentName:Y?.name||"",onClose:()=>Z(null),onRename:aq}),(0,b.jsx)(k.MoveFolderModal,{isOpen:!!$,folder:$,allFolders:ag.length>0?ag:H,onClose:()=>_(null),onMove:ar}),aa&&(0,b.jsx)(l.MoveDocumentModal,{document:aa,folders:ag.length>0?ag:H,onMove:as,onClose:()=>ab(null)}),ac&&(0,b.jsx)(m.DocumentPreview,{document:ac,onClose:()=>ad(null)}),(0,b.jsx)(o.ConfirmDialog,{isOpen:!!ae,title:ae?.type==="folder"?"Delete Folder":"Delete File",message:ae?"folder"===ae.type?`Are you sure you want to delete "${ae.item.name}"? This will also delete all contents inside. This action cannot be undone.`:`Are you sure you want to delete "${ae.item.name}"? This action cannot be undone.`:"",confirmLabel:"Delete",variant:"danger",onConfirm:at,onCancel:()=>af(null)})]})}function x(){let a=(0,d.useSearchParams)().get("folderId");return(0,b.jsx)(e.DashboardLayout,{children:(0,b.jsx)("div",{className:"p-4 h-full",children:(0,b.jsx)(w,{initialFolderId:a})})})}function y(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)(e.DashboardLayout,{children:(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-blue-600 border-t-transparent"})})}),children:(0,b.jsx)(x,{})})}a.s(["default",()=>y],12616)}];

//# sourceMappingURL=src_app_dashboard_files_page_tsx_11b6c54d._.js.map