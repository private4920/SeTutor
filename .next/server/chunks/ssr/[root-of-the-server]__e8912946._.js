module.exports=[36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},35112,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactDOM},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},81531,(a,b,c)=>{b.exports=a.x("@aws-sdk/client-s3-ecbef8e33fd0b8f0",()=>require("@aws-sdk/client-s3-ecbef8e33fd0b8f0"))},23091,a=>{"use strict";var b=a.i(87924),c=a.i(72131);let d=(0,c.memo)(function({currentPage:a,totalPages:d,totalItems:e,pageSize:f,onPageChange:g,onPageSizeChange:h,pageSizeOptions:i=[20,30,50],showPageSizeSelector:j=!0}){let k=0===e?0:(a-1)*f+1,l=Math.min(a*f,e),m=(0,c.useCallback)(()=>g(a-1),[g,a]),n=(0,c.useCallback)(()=>g(a+1),[g,a]),o=(0,c.useCallback)(a=>h?.(Number(a.target.value)),[h]),p=(0,c.useMemo)(()=>{let b=[];if(d<=7)for(let a=1;a<=d;a++)b.push(a);else{b.push(1),a>3&&b.push("ellipsis");let c=Math.max(2,a-1),e=Math.min(d-1,a+1);for(let a=c;a<=e;a++)b.push(a);a<d-2&&b.push("ellipsis"),d>1&&b.push(d)}return b},[d,a]);return d<=1&&!j?null:(0,b.jsxs)("div",{className:"flex flex-col items-center justify-between gap-3 sm:gap-4 sm:flex-row",children:[(0,b.jsxs)("div",{className:"text-xs sm:text-sm text-gray-600 text-center sm:text-left",children:["Showing ",k," to ",l," of ",e," items"]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row items-center gap-3 sm:gap-4 w-full sm:w-auto",children:[j&&h&&(0,b.jsxs)("div",{className:"hidden sm:flex items-center gap-2",children:[(0,b.jsx)("label",{htmlFor:"pageSize",className:"text-sm text-gray-600 whitespace-nowrap",children:"Items per page:"}),(0,b.jsx)("select",{id:"pageSize",value:f,onChange:o,className:"rounded-md border border-gray-300 px-2 py-1.5 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",children:i.map(a=>(0,b.jsx)("option",{value:a,children:a},a))})]}),d>1&&(0,b.jsxs)("nav",{className:"flex items-center gap-0.5 sm:gap-1","aria-label":`Pagination, page ${a} of ${d}`,children:[(0,b.jsx)("button",{onClick:m,disabled:1===a,className:"rounded-md p-2.5 sm:p-2 text-gray-600 hover:bg-gray-100 disabled:cursor-not-allowed disabled:opacity-50 disabled:hover:bg-transparent active:scale-95 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2","aria-label":`Go to previous page, page ${a-1}`,"aria-disabled":1===a,children:(0,b.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),p.map((c,d)=>"ellipsis"===c?(0,b.jsx)("span",{className:"px-1 sm:px-2 text-gray-500","aria-hidden":"true",children:"..."},`ellipsis-${d}`):(0,b.jsx)("button",{onClick:()=>g(c),className:`min-w-[2.5rem] min-h-[2.5rem] sm:min-w-[2.5rem] sm:min-h-0 rounded-md px-2 sm:px-3 py-2 sm:py-1.5 text-sm font-medium active:scale-95 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 ${a===c?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"}`,"aria-current":a===c?"page":void 0,"aria-label":a===c?`Page ${c}, current page`:`Go to page ${c}`,children:c},c)),(0,b.jsx)("button",{onClick:n,disabled:a===d,className:"rounded-md p-2.5 sm:p-2 text-gray-600 hover:bg-gray-100 disabled:cursor-not-allowed disabled:opacity-50 disabled:hover:bg-transparent active:scale-95 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2","aria-label":`Go to next page, page ${a+1}`,"aria-disabled":a===d,children:(0,b.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]})]})});a.s(["Pagination",0,d])},12171,a=>{"use strict";var b=a.i(87924),c=a.i(72131);function d({isOpen:a,title:d,message:e,confirmLabel:f="Confirm",cancelLabel:g="Cancel",variant:h="danger",onConfirm:i,onCancel:j}){let k=(0,c.useRef)(null),l=(0,c.useRef)(null),m=(0,c.useRef)(null);(0,c.useEffect)(()=>{a&&l.current?.focus()},[a]);let n=(0,c.useCallback)(b=>{if(a){if("Escape"===b.key)return void j();if("Tab"===b.key){let a=[l.current,m.current].filter(Boolean),c=a[0],d=a[a.length-1];b.shiftKey?document.activeElement===c&&(b.preventDefault(),d?.focus()):document.activeElement===d&&(b.preventDefault(),c?.focus())}}},[a,j]);return((0,c.useEffect)(()=>(document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)),[n]),(0,c.useEffect)(()=>(a&&(document.body.style.overflow="hidden"),()=>{document.body.style.overflow=""}),[a]),a)?(0,b.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:j,"aria-hidden":"true"}),(0,b.jsxs)("div",{ref:k,role:"alertdialog","aria-modal":"true","aria-labelledby":"dialog-title","aria-describedby":"dialog-description",tabIndex:-1,className:"relative z-10 w-full max-w-md rounded-lg bg-white p-4 sm:p-6 shadow-xl",children:[(0,b.jsx)("h2",{id:"dialog-title",className:"text-base sm:text-lg font-semibold text-gray-900",children:d}),(0,b.jsx)("p",{id:"dialog-description",className:"mt-2 text-sm text-gray-600",children:e}),(0,b.jsxs)("div",{className:"mt-4 sm:mt-6 flex flex-col-reverse sm:flex-row sm:justify-end gap-2 sm:gap-3",children:[(0,b.jsx)("button",{ref:l,type:"button",onClick:j,className:"w-full sm:w-auto rounded-lg border border-gray-300 px-4 py-2.5 sm:py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-500 focus-visible:ring-offset-2 active:scale-[0.98]",children:g}),(0,b.jsx)("button",{ref:m,type:"button",onClick:i,className:`w-full sm:w-auto rounded-lg px-4 py-2.5 sm:py-2 text-sm font-medium text-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 active:scale-[0.98] ${{danger:"bg-red-600 hover:bg-red-700 focus:ring-red-500",warning:"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500",info:"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500"}[h]}`,children:f})]})]})]}):null}a.s(["ConfirmDialog",()=>d])},28948,a=>{"use strict";var b=a.i(87924),c=a.i(38246);function d({items:a,onItemClick:d,className:e="",showHomeIcon:f=!0}){return 0===a.length?null:(0,b.jsx)("nav",{className:`flex items-center ${e}`,"aria-label":"Breadcrumb",children:(0,b.jsx)("ol",{className:"flex items-center gap-1 text-sm",children:a.map((e,g)=>{let h=g===a.length-1,i=0===g;return(0,b.jsxs)("li",{className:"flex items-center",children:[!i&&(0,b.jsx)("svg",{className:"mx-1 h-4 w-4 flex-shrink-0 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),h?(0,b.jsxs)("span",{className:"flex items-center gap-1.5 font-medium text-gray-900","aria-current":"page",children:[i&&f&&(0,b.jsx)("svg",{className:"h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),!i&&(0,b.jsx)("svg",{className:"h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})}),(0,b.jsx)("span",{className:"truncate max-w-[200px]",children:e.name})]}):e.href?(0,b.jsxs)(c.default,{href:e.href,className:"flex items-center gap-1.5 rounded px-2 py-1 text-gray-500 transition-colors hover:bg-gray-100 hover:text-gray-700",children:[i&&f&&(0,b.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),(0,b.jsx)("span",{className:"truncate max-w-[150px]",children:e.name})]}):(0,b.jsxs)("button",{onClick:()=>d?.(e,g),className:"flex items-center gap-1.5 rounded px-2 py-1 text-gray-500 transition-colors hover:bg-gray-100 hover:text-gray-700",children:[i&&f&&(0,b.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),(0,b.jsx)("span",{className:"truncate max-w-[150px]",children:e.name})]})]},e.id??"root")})})})}function e(a,b){let c=[{id:null,name:"Root"}];if(!b)return c;let d=[],e=a.find(a=>a.id===b);for(;e;)d.unshift(e),e=e.parent_id?a.find(a=>a.id===e.parent_id):void 0;for(let a of d)c.push({id:a.id,name:a.name});return c}a.s(["Breadcrumbs",()=>d,"buildBreadcrumbsFromPath",()=>e])},97948,a=>{"use strict";var b=a.i(72131);function c(a,c){let[d,e]=(0,b.useState)(a);return(0,b.useEffect)(()=>{let b=setTimeout(()=>{e(a)},c);return()=>{clearTimeout(b)}},[a,c]),d}a.s(["useDebounce",()=>c])},43448,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(27520),f=a.i(89789),g=a.i(83347),h=a.i(28948),i=a.i(12171),j=a.i(23091),k=a.i(15720),l=a.i(18604),m=a.i(97948);a.i(78122);var n=a.i(37827),o=a.i(68567),p=a.i(29972),q=a.i(26e3),r=a.i(7402);function s(){let a=(0,d.useRouter)(),s=(0,d.useSearchParams)().get("folderId"),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)("list"),[x,y]=(0,c.useState)(null),[z,A]=(0,c.useState)(null),[B,C]=(0,c.useState)(null),{documents:D,loading:E,error:F,pagination:G,fetchDocumentsPaginated:H,searchDocuments:I,deleteDocument:J,moveDocument:K,setPage:L,setPageSize:M}=(0,f.useDocuments)(),{folders:N,fetchFolders:O}=(0,g.useFolders)(),P=(0,l.useToast)();(0,c.useEffect)(()=>{O()},[O]);let Q=(0,m.useDebounce)(t,300);(0,c.useEffect)(()=>{Q.trim()?I(Q):H(s,G.currentPage,G.pageSize)},[s,Q,H,I,G.currentPage,G.pageSize]);let R=(0,c.useCallback)(a=>{u(a.target.value)},[]),S=(0,c.useCallback)(async()=>{x&&(await J(x.id)?P.success(`"${x.name}" deleted successfully`):P.error(`Failed to delete "${x.name}"`),y(null))},[x,J,P]),T=(0,c.useCallback)(async(a,b)=>{await K(a,b)?P.success("Document moved successfully"):P.error("Failed to move document"),t.trim()?I(t):H(s,G.currentPage,G.pageSize)},[K,t,I,H,s,G.currentPage,G.pageSize,P]),U=(0,c.useCallback)(a=>{L(a)},[L]),V=(0,c.useCallback)(a=>{M(a)},[M]),W=(0,c.useCallback)(a=>{C(a)},[]),X=(0,c.useCallback)(a=>{A(a)},[]),Y=(0,c.useCallback)(a=>{y(a)},[]);return(0,b.jsx)(e.DashboardLayout,{children:(0,b.jsxs)("div",{className:"px-4 py-8 sm:px-6 lg:px-8",children:[(0,b.jsxs)("div",{className:"mb-6 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Documents"}),s&&N.length>0&&(0,b.jsx)(h.Breadcrumbs,{items:(0,h.buildBreadcrumbsFromPath)(N,s),className:"mt-1"})]}),(0,b.jsxs)("button",{onClick:()=>a.push(`/dashboard/documents/upload${s?`?folderId=${s}`:""}`),className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700",children:[(0,b.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Upload Documents"]})]}),(0,b.jsxs)("div",{className:"mb-6 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,b.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,b.jsx)("svg",{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,b.jsx)("input",{type:"text",placeholder:"Search documents...",value:t,onChange:R,className:"w-full rounded-lg border border-gray-300 py-2 pl-10 pr-4 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),(0,b.jsx)(r.ViewToggle,{viewMode:v,onViewModeChange:w})]}),F&&(0,b.jsx)("div",{className:"mb-6 rounded-lg bg-red-50 p-4 text-sm text-red-600",children:F}),E&&0===D.length&&("grid"===v?(0,b.jsx)(k.DocumentGridSkeleton,{count:8}):(0,b.jsx)(k.DocumentListSkeleton,{count:5})),!E&&0===D.length&&(0,b.jsxs)("div",{className:"rounded-lg border-2 border-dashed border-gray-300 p-12 text-center",children:[(0,b.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,b.jsx)("h3",{className:"mt-4 text-sm font-medium text-gray-900",children:"No documents"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:t?"No documents match your search.":"Get started by uploading a document."}),!t&&(0,b.jsxs)("button",{onClick:()=>a.push("/dashboard/documents/upload"),className:"mt-4 inline-flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700",children:[(0,b.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Upload Document"]})]}),D.length>0&&(0,b.jsxs)(b.Fragment,{children:["grid"===v?(0,b.jsx)(n.DocumentGrid,{documents:D,onPreview:W,onMove:X,onDelete:Y}):(0,b.jsx)(o.DocumentList,{documents:D,onPreview:W,onMove:X,onDelete:Y}),!t.trim()&&G.totalPages>0&&(0,b.jsx)("div",{className:"mt-6",children:(0,b.jsx)(j.Pagination,{currentPage:G.currentPage,totalPages:G.totalPages,totalItems:G.totalItems,pageSize:G.pageSize,onPageChange:U,onPageSizeChange:V,pageSizeOptions:[20,30,50]})})]}),B&&(0,b.jsx)(p.DocumentPreview,{document:B,onClose:()=>C(null)}),z&&(0,b.jsx)(q.MoveDocumentModal,{document:z,folders:N,onMove:T,onClose:()=>A(null)}),(0,b.jsx)(i.ConfirmDialog,{isOpen:!!x,title:"Delete Document",message:`Are you sure you want to delete "${x?.name}"? This action cannot be undone.`,confirmLabel:"Delete",variant:"danger",onConfirm:S,onCancel:()=>y(null)})]})})}function t(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)(e.DashboardLayout,{children:(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-blue-600 border-t-transparent"})})}),children:(0,b.jsx)(s,{})})}a.s(["default",()=>t])},30560,a=>{a.v(a=>Promise.resolve().then(()=>a(9292)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__e8912946._.js.map