module.exports=[15720,a=>{"use strict";var b=a.i(87924),c=a.i(72131);let d=(0,c.memo)(function({className:a="",variant:c="rectangular",width:d,height:e,animation:f="pulse"}){let g={};return d&&(g.width="number"==typeof d?`${d}px`:d),e&&(g.height="number"==typeof e?`${e}px`:e),(0,b.jsx)("div",{className:`bg-gray-200 ${{text:"rounded",circular:"rounded-full",rectangular:"rounded-lg"}[c]} ${{pulse:"animate-pulse",wave:"animate-shimmer",none:""}[f]} ${a}`,style:g,"aria-hidden":"true"})}),e=(0,c.memo)(function(){return(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"whitespace-nowrap px-6 py-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(d,{variant:"rectangular",width:32,height:32,className:"rounded-lg"}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(d,{height:14,width:180}),(0,b.jsx)(d,{height:10,width:120})]})]})}),(0,b.jsx)("td",{className:"hidden whitespace-nowrap px-6 py-4 sm:table-cell",children:(0,b.jsx)(d,{height:14,width:60})}),(0,b.jsx)("td",{className:"hidden whitespace-nowrap px-6 py-4 md:table-cell",children:(0,b.jsx)(d,{height:14,width:80})}),(0,b.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-right",children:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,b.jsx)(d,{variant:"circular",width:28,height:28}),(0,b.jsx)(d,{variant:"circular",width:28,height:28}),(0,b.jsx)(d,{variant:"circular",width:28,height:28})]})})]})}),f=(0,c.memo)(function(){return(0,b.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white p-4 shadow-sm",children:[(0,b.jsx)(d,{height:96,className:"mb-3 w-full rounded-lg"}),(0,b.jsx)(d,{height:14,width:"80%",className:"mb-2"}),(0,b.jsx)(d,{height:10,width:"60%"})]})}),g=(0,c.memo)(function(){return(0,b.jsxs)("div",{className:"flex items-center gap-3 rounded-lg border border-gray-200 bg-white p-4",children:[(0,b.jsx)(d,{variant:"rectangular",width:48,height:48,className:"rounded-lg"}),(0,b.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,b.jsx)(d,{height:14,width:"70%"}),(0,b.jsx)(d,{height:10,width:"50%"})]})]})}),h=(0,c.memo)(function(){return(0,b.jsxs)("div",{className:"rounded-lg bg-white p-6 shadow-sm",children:[(0,b.jsx)(d,{height:20,width:140,className:"mb-4"}),(0,b.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0].map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(d,{variant:"rectangular",width:40,height:40,className:"rounded-lg"}),(0,b.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,b.jsx)(d,{height:14,width:"75%"}),(0,b.jsx)(d,{height:10,width:"50%"})]})]},c))})]})}),i=(0,c.memo)(function({count:a=5}){return(0,b.jsx)("div",{className:"overflow-hidden rounded-lg border border-gray-200 bg-white",children:(0,b.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Name"}),(0,b.jsx)("th",{className:"hidden px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 sm:table-cell",children:"Size"}),(0,b.jsx)("th",{className:"hidden px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 md:table-cell",children:"Uploaded"}),(0,b.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-200",children:[...Array(a)].map((a,c)=>(0,b.jsx)(e,{},c))})]})})}),j=(0,c.memo)(function({count:a=8}){return(0,b.jsx)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:[...Array(a)].map((a,c)=>(0,b.jsx)(f,{},c))})}),k=(0,c.memo)(function({count:a=6}){return(0,b.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[...Array(a)].map((a,c)=>(0,b.jsx)(g,{},c))})});a.s(["DocumentGridSkeleton",0,j,"DocumentListSkeleton",0,i,"FolderGridSkeleton",0,k,"RecentDocumentsSkeleton",0,h])},9292,a=>{"use strict";var b=a.i(72131),c=a.i(76725);function d(){return{authenticatedFetch:(0,b.useCallback)(async(a,b={})=>{let d=(0,c.getFirebaseAuth)().currentUser;if(!d)throw Error("User is not authenticated");let e=await d.getIdToken(),f=new Headers(b.headers);return f.set("Authorization",`Bearer ${e}`),fetch(a,{...b,headers:f})},[])}}async function e(){let a=(0,c.getFirebaseAuth)().currentUser;return a?a.getIdToken():null}async function f(a){let b=new Headers(a),c=await e();return c&&b.set("Authorization",`Bearer ${c}`),b}a.s(["createAuthHeaders",()=>f,"getIdToken",()=>e,"useAuthenticatedFetch",()=>d])},83347,a=>{"use strict";var b=a.i(72131),c=a.i(8098),d=a.i(9292);async function e(){let a=await (0,d.getIdToken)();if(!a)throw Error("Not authenticated");return{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}}function f(){let{user:a}=(0,c.useAuth)(),[d,f]=(0,b.useState)([]),[g,h]=(0,b.useState)(!1),[i,j]=(0,b.useState)(null),[k,l]=(0,b.useState)({currentPage:1,pageSize:20,totalItems:0,totalPages:0}),m=(0,b.useCallback)(a=>{l(b=>({...b,currentPage:a}))},[]),n=(0,b.useCallback)(a=>{l(b=>({...b,pageSize:a,currentPage:1}))},[]),o=(0,b.useCallback)(async b=>{if(a?.uid){h(!0),j(null);try{let a=await e(),c=new URLSearchParams;void 0!==b&&c.append("parentId",null===b?"null":b);let d=await fetch(`/api/folders?${c}`,{headers:a}),g=await d.json();if(!d.ok)throw Error(g.error||"Failed to fetch folders");f(g.folders),l(a=>({...a,totalItems:g.folders.length,totalPages:1,currentPage:1}))}catch(a){j(a instanceof Error?a.message:"Failed to fetch folders")}finally{h(!1)}}},[a?.uid]),p=(0,b.useCallback)(async(b,c,d)=>{if(!a?.uid)return;let g=d??k.pageSize,i=c??k.currentPage;h(!0),j(null);try{let a=await e(),c=new URLSearchParams({page:i.toString(),pageSize:g.toString()});void 0!==b&&c.append("parentId",null===b?"null":b);let d=await fetch(`/api/folders?${c}`,{headers:a}),h=await d.json();if(!d.ok)throw Error(h.error||"Failed to fetch folders");f(h.folders),l({currentPage:i,pageSize:g,totalItems:h.total,totalPages:Math.ceil(h.total/g)})}catch(a){j(a instanceof Error?a.message:"Failed to fetch folders")}finally{h(!1)}},[a?.uid,k.pageSize,k.currentPage]),q=(0,b.useCallback)(async b=>{if(!a?.uid)return[];try{let a=await e(),c=await fetch(`/api/folders/${b}/path`,{headers:a}),d=await c.json();if(!c.ok)throw Error(d.error||"Failed to fetch folder path");return d.path}catch(a){return j(a instanceof Error?a.message:"Failed to fetch folder path"),[]}},[a?.uid]),r=(0,b.useCallback)(async(b,c)=>{if(!a?.uid)return null;h(!0),j(null);try{let a=await e(),d=await fetch("/api/folders",{method:"POST",headers:a,body:JSON.stringify({name:b,parentId:c})}),g=await d.json();if(!d.ok)throw Error(g.error||"Failed to create folder");return f(a=>[...a,g.folder]),g.folder}catch(a){return j(a instanceof Error?a.message:"Failed to create folder"),null}finally{h(!1)}},[a?.uid]),s=(0,b.useCallback)(async(b,c)=>{if(!a?.uid)return null;h(!0),j(null);try{let a=await e(),d=await fetch(`/api/folders/${b}`,{method:"PUT",headers:a,body:JSON.stringify({name:c})}),g=await d.json();if(!d.ok)throw Error(g.error||"Failed to rename folder");return f(a=>a.map(a=>a.id===b?g.folder:a)),g.folder}catch(a){return j(a instanceof Error?a.message:"Failed to rename folder"),null}finally{h(!1)}},[a?.uid]),t=(0,b.useCallback)(async b=>{if(!a?.uid)return!1;h(!0),j(null);try{let a=await e(),c=await fetch(`/api/folders/${b}`,{method:"DELETE",headers:a}),d=await c.json();if(!c.ok)throw Error(d.error||"Failed to delete folder");return f(a=>a.filter(a=>a.id!==b)),!0}catch(a){return j(a instanceof Error?a.message:"Failed to delete folder"),!1}finally{h(!1)}},[a?.uid]),u=(0,b.useCallback)(async(b,c)=>{if(!a?.uid)return null;h(!0),j(null);try{let a=await e(),d=await fetch(`/api/folders/${b}/move`,{method:"POST",headers:a,body:JSON.stringify({newParentId:c})}),f=await d.json();if(!d.ok)throw Error(f.error||"Failed to move folder");return await o(),f.folder}catch(a){return j(a instanceof Error?a.message:"Failed to move folder"),null}finally{h(!1)}},[a?.uid,o]);return{folders:d,loading:g,error:i,pagination:k,fetchFolders:o,fetchFoldersPaginated:p,fetchFolderPath:q,createFolder:r,renameFolder:s,deleteFolder:t,moveFolder:u,setPage:m,setPageSize:n}}a.s(["useFolders",()=>f])},89789,a=>{"use strict";var b=a.i(72131),c=a.i(8098),d=a.i(9292);async function e(){let a=await (0,d.getIdToken)();if(!a)throw Error("Not authenticated");return{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}}function f(){let{user:a}=(0,c.useAuth)(),[f,g]=(0,b.useState)([]),[h,i]=(0,b.useState)(!1),[j,k]=(0,b.useState)(null),[l,m]=(0,b.useState)(new Map),[n,o]=(0,b.useState)({currentPage:1,pageSize:20,totalItems:0,totalPages:0}),p=(0,b.useCallback)(()=>k(null),[]),q=(0,b.useCallback)(a=>{o(b=>({...b,currentPage:a}))},[]),r=(0,b.useCallback)(a=>{o(b=>({...b,pageSize:a,currentPage:1}))},[]),s=(0,b.useCallback)(async b=>{if(a){i(!0),k(null);try{let a=await e(),c=new URLSearchParams;void 0!==b&&c.set("folderId",null===b?"null":b);let d=await fetch(`/api/documents?${c}`,{headers:a}),f=await d.json();if(!d.ok)throw Error(f.error||"Failed to fetch documents");g(f.documents),o(a=>({...a,totalItems:f.documents.length,totalPages:1,currentPage:1}))}catch(a){k(a instanceof Error?a.message:"Failed to fetch documents")}finally{i(!1)}}},[a]),t=(0,b.useCallback)(async(b,c,d)=>{if(!a)return;let f=d??n.pageSize,h=c??n.currentPage;i(!0),k(null);try{let a=await e(),c=new URLSearchParams({page:h.toString(),pageSize:f.toString()});void 0!==b&&c.set("folderId",null===b?"null":b);let d=await fetch(`/api/documents?${c}`,{headers:a}),i=await d.json();if(!d.ok)throw Error(i.error||"Failed to fetch documents");g(i.documents),o({currentPage:h,pageSize:f,totalItems:i.total,totalPages:Math.ceil(i.total/f)})}catch(a){k(a instanceof Error?a.message:"Failed to fetch documents")}finally{i(!1)}},[a,n.pageSize,n.currentPage]),u=(0,b.useCallback)(async b=>{if(a){i(!0),k(null);try{let a=await e(),c=new URLSearchParams({search:b}),d=await fetch(`/api/documents?${c}`,{headers:a}),f=await d.json();if(!d.ok)throw Error(f.error||"Failed to search documents");g(f.documents)}catch(a){k(a instanceof Error?a.message:"Failed to search documents")}finally{i(!1)}}},[a]),v=(0,b.useCallback)((a,b)=>{m(c=>{let d=new Map(c),e=d.get(a)||{fileName:a,progress:0,status:"pending"};return d.set(a,{...e,...b}),d})},[]),w=(0,b.useCallback)(async(b,c)=>{if(!a)return null;let e=new AbortController;v(b.name,{status:"uploading",progress:0,abortController:e});try{let a=await (0,d.getIdToken)();if(!a)throw Error("Not authenticated");let f=new FormData;f.append("file",b),c&&f.append("folderId",c);let h=await new Promise((c,d)=>{let g=new XMLHttpRequest;g.upload.addEventListener("progress",a=>{if(a.lengthComputable){let c=Math.round(a.loaded/a.total*100);v(b.name,{progress:c})}}),g.addEventListener("load",()=>{if(g.status>=200&&g.status<300){let a=JSON.parse(g.responseText);c(a.document)}else try{let a=JSON.parse(g.responseText);d(Error(a.error||"Upload failed"))}catch{d(Error("Upload failed"))}}),g.addEventListener("error",()=>{d(Error("Network error during upload"))}),g.addEventListener("abort",()=>{d(Error("Upload cancelled"))}),e.signal.addEventListener("abort",()=>{g.abort()}),g.open("POST","/api/documents/upload"),g.setRequestHeader("Authorization",`Bearer ${a}`),g.send(f)});return v(b.name,{status:"completed",progress:100}),g(a=>[h,...a]),h}catch(d){let a=d instanceof Error?d.message:"Upload failed",c="Upload cancelled"===a;return v(b.name,{status:c?"cancelled":"error",error:a}),c||k(a),null}},[a,v]),x=(0,b.useCallback)(async(a,b)=>{for(let c of(a.forEach(a=>{v(a.name,{status:"pending",progress:0})}),a)){let a=l.get(c.name);a?.status!=="cancelled"&&await w(c,b)}},[w,l,v]),y=(0,b.useCallback)(a=>{let b=l.get(a);b?.abortController&&b.abortController.abort(),v(a,{status:"cancelled"})},[l,v]),z=(0,b.useCallback)(async b=>{if(!a)return!1;try{let a=await e(),c=await fetch(`/api/documents/${b}`,{method:"DELETE",headers:a});if(!c.ok){let a=await c.json();throw Error(a.error||"Failed to delete document")}return g(a=>a.filter(a=>a.id!==b)),!0}catch(a){return k(a instanceof Error?a.message:"Failed to delete document"),!1}},[a]);return{documents:f,loading:h,error:j,uploadProgress:l,pagination:n,fetchDocuments:s,fetchDocumentsPaginated:t,searchDocuments:u,uploadDocument:w,uploadMultipleDocuments:x,cancelUpload:y,deleteDocument:z,moveDocument:(0,b.useCallback)(async(b,c)=>{if(!a)return null;try{let a=await e(),d=await fetch(`/api/documents/${b}`,{method:"PATCH",headers:a,body:JSON.stringify({folderId:c})}),f=await d.json();if(!d.ok)throw Error(f.error||"Failed to move document");return g(a=>a.map(a=>a.id===b?f.document:a)),f.document}catch(a){return k(a instanceof Error?a.message:"Failed to move document"),null}},[a]),renameDocument:(0,b.useCallback)(async(b,c)=>{if(!a)return null;try{let a=await e(),d=await fetch(`/api/documents/${b}`,{method:"PATCH",headers:a,body:JSON.stringify({name:c})}),f=await d.json();if(!d.ok)throw Error(f.error||"Failed to rename document");return g(a=>a.map(a=>a.id===b?f.document:a)),f.document}catch(a){return k(a instanceof Error?a.message:"Failed to rename document"),null}},[a]),clearError:p,setPage:q,setPageSize:r}}a.s(["useDocuments",()=>f])}];

//# sourceMappingURL=src_d4bdada0._.js.map