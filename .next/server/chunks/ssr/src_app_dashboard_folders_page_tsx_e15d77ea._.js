module.exports=[57834,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(27520),e=a.i(83347);let f=(0,c.memo)(function({folder:a,onRename:d,onDelete:e,onMove:f,onClick:g}){let[h,i]=(0,c.useState)(!1),j=(0,c.useCallback)(a=>{a.stopPropagation(),i(a=>!a)},[]),k=(0,c.useCallback)(b=>{("Enter"===b.key||" "===b.key)&&(b.preventDefault(),g(a))},[a,g]),l=(0,c.useCallback)(a=>{i(!1),a()},[]),m=(0,c.useCallback)(()=>g(a),[a,g]),n=(0,c.useCallback)(()=>l(()=>d(a)),[a,d,l]),o=(0,c.useCallback)(()=>l(()=>f(a)),[a,f,l]),p=(0,c.useCallback)(()=>l(()=>e(a)),[a,e,l]);return(0,b.jsxs)("article",{className:"group relative flex items-center gap-3 rounded-lg border border-gray-200 bg-white p-3 sm:p-4 transition-all hover:border-blue-300 hover:shadow-md cursor-pointer active:scale-[0.99] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:m,onKeyDown:k,tabIndex:0,role:"button","aria-label":`Open folder ${a.name}`,children:[(0,b.jsx)("div",{className:"flex h-10 w-10 sm:h-12 sm:w-12 flex-shrink-0 items-center justify-center rounded-lg bg-gradient-to-r from-blue-100 to-purple-100","aria-hidden":"true",children:(0,b.jsx)("svg",{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-gray-900 truncate",children:a.name}),(0,b.jsx)("p",{className:"text-xs text-gray-500 truncate",children:a.path})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("button",{onClick:j,className:"rounded-lg p-2.5 sm:p-2 text-gray-400 sm:opacity-0 transition-opacity hover:bg-gray-100 hover:text-gray-600 group-hover:opacity-100 active:scale-95 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 focus-visible:opacity-100","aria-label":`Actions for folder ${a.name}`,"aria-expanded":h,"aria-haspopup":"menu",children:(0,b.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),h&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"fixed inset-0 z-10",onClick:a=>{a.stopPropagation(),i(!1)},"aria-hidden":"true"}),(0,b.jsxs)("div",{className:"absolute right-0 top-full z-20 mt-1 w-40 rounded-lg border border-gray-200 bg-white py-1 shadow-lg",role:"menu","aria-label":`Actions for ${a.name}`,children:[(0,b.jsxs)("button",{onClick:a=>{a.stopPropagation(),n()},className:"flex w-full items-center gap-2 px-4 py-2.5 sm:py-2 text-sm text-gray-700 hover:bg-gray-100 active:bg-gray-200 focus-visible:outline-none focus-visible:bg-gray-100",role:"menuitem",children:[(0,b.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Rename"]}),(0,b.jsxs)("button",{onClick:a=>{a.stopPropagation(),o()},className:"flex w-full items-center gap-2 px-4 py-2.5 sm:py-2 text-sm text-gray-700 hover:bg-gray-100 active:bg-gray-200 focus-visible:outline-none focus-visible:bg-gray-100",role:"menuitem",children:[(0,b.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),"Move"]}),(0,b.jsx)("hr",{className:"my-1 border-gray-200",role:"separator"}),(0,b.jsxs)("button",{onClick:a=>{a.stopPropagation(),p()},className:"flex w-full items-center gap-2 px-4 py-2.5 sm:py-2 text-sm text-red-600 hover:bg-red-50 active:bg-red-100 focus-visible:outline-none focus-visible:bg-red-50",role:"menuitem",children:[(0,b.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})]})]})]})});var g=a.i(99648),h=a.i(11972),i=a.i(74423),j=a.i(12171),k=a.i(23091),l=a.i(15720),m=a.i(18604);function n({parentId:d=null,onFolderClick:n,enablePagination:o=!1}){let{folders:p,loading:q,error:r,pagination:s,fetchFolders:t,fetchFoldersPaginated:u,createFolder:v,renameFolder:w,deleteFolder:x,moveFolder:y,setPage:z,setPageSize:A}=(0,e.useFolders)(),B=(0,m.useToast)(),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(null),[G,H]=(0,c.useState)(null),[I,J]=(0,c.useState)(null),[K,L]=(0,c.useState)([]);(0,c.useEffect)(()=>{o?u(d,s.currentPage,s.pageSize):t(d)},[t,u,d,o,s.currentPage,s.pageSize]),(0,c.useEffect)(()=>{(async()=>{try{let{getIdToken:b}=await a.A(30560),c=await b();if(!c)return;let d=await fetch("/api/folders",{headers:{Authorization:`Bearer ${c}`}});if(d.ok){let a=await d.json();L(a.folders||[])}}catch(a){console.error("Failed to fetch all folders:",a)}})()},[p]);let M=(0,c.useCallback)(async a=>{if(await v(a,d))B.success(`Folder "${a}" created successfully`);else throw B.error("Failed to create folder"),Error("Failed to create folder")},[v,d,B]),N=(0,c.useCallback)(async a=>{if(E)if(await w(E.id,a))B.success(`Folder renamed to "${a}"`);else throw B.error("Failed to rename folder"),Error("Failed to rename folder")},[w,E,B]),O=(0,c.useCallback)(async a=>{if(G)if(await y(G.id,a))B.success("Folder moved successfully");else throw B.error("Failed to move folder"),Error("Failed to move folder")},[y,G,B]),P=(0,c.useCallback)(async()=>{I&&(await x(I.id)?B.success(`Folder "${I.name}" deleted`):B.error("Failed to delete folder"),J(null))},[x,I,B]),Q=(0,c.useCallback)(a=>{n&&n(a)},[n]),R=(0,c.useCallback)(a=>{z(a)},[z]),S=(0,c.useCallback)(a=>{A(a)},[A]),T=o?p:p.filter(a=>a.parent_id===d);return q&&0===p.length?(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"mb-4 flex items-center justify-between",children:(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Folders"})}),(0,b.jsx)(l.FolderGridSkeleton,{count:6})]}):(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"mb-3 sm:mb-4 flex items-center justify-between gap-3",children:[(0,b.jsx)("h2",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"Folders"}),(0,b.jsxs)("button",{onClick:()=>D(!0),className:"flex items-center gap-1.5 sm:gap-2 rounded-lg bg-blue-600 px-3 sm:px-4 py-2 sm:py-2 text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 active:scale-[0.98]",children:[(0,b.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"New Folder"}),(0,b.jsx)("span",{className:"sm:hidden",children:"New"})]})]}),r&&(0,b.jsx)("div",{className:"mb-4 rounded-lg bg-red-50 p-4 text-sm text-red-600",children:r}),0===T.length?(0,b.jsxs)("div",{className:"rounded-lg border-2 border-dashed border-gray-300 p-12 text-center",children:[(0,b.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})}),(0,b.jsx)("h3",{className:"mt-4 text-sm font-medium text-gray-900",children:"No folders"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating a new folder."}),(0,b.jsxs)("button",{onClick:()=>D(!0),className:"mt-4 inline-flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700",children:[(0,b.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Folder"]})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"grid gap-3 sm:gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",children:T.map(a=>(0,b.jsx)(f,{folder:a,onRename:F,onDelete:J,onMove:H,onClick:Q},a.id))}),o&&s.totalPages>0&&(0,b.jsx)("div",{className:"mt-4 sm:mt-6",children:(0,b.jsx)(k.Pagination,{currentPage:s.currentPage,totalPages:s.totalPages,totalItems:s.totalItems,pageSize:s.pageSize,onPageChange:R,onPageSizeChange:S,pageSizeOptions:[20,30,50]})})]}),(0,b.jsx)(g.CreateFolderModal,{isOpen:C,onClose:()=>D(!1),onCreate:M}),(0,b.jsx)(h.RenameFolderModal,{isOpen:!!E,currentName:E?.name||"",onClose:()=>F(null),onRename:N}),(0,b.jsx)(i.MoveFolderModal,{isOpen:!!G,folder:G,allFolders:K.length>0?K:p,onClose:()=>H(null),onMove:O}),(0,b.jsx)(j.ConfirmDialog,{isOpen:!!I,title:"Delete Folder",message:`Are you sure you want to delete "${I?.name}"? This will also delete all contents inside this folder. This action cannot be undone.`,confirmLabel:"Delete",variant:"danger",onConfirm:P,onCancel:()=>J(null)})]})}var o=a.i(28948);function p(){let{folders:a,fetchFolders:f}=(0,e.useFolders)(),[g,h]=(0,c.useState)(null),[i,j]=(0,c.useState)([{id:null,name:"Root"}]);(0,c.useEffect)(()=>{f()},[f]),(0,c.useEffect)(()=>{(a.length>0||null===g)&&j((0,o.buildBreadcrumbsFromPath)(a,g))},[g,a]);let k=(0,c.useCallback)(a=>{h(a.id)},[]),l=(0,c.useCallback)(a=>{h(a.id)},[]);return(0,b.jsx)(d.DashboardLayout,{children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Folders"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Organize your documents into folders for easy access."})]}),(0,b.jsx)(o.Breadcrumbs,{items:i,onItemClick:l,showHomeIcon:!0}),(0,b.jsx)("div",{className:"rounded-lg bg-white p-6 shadow-sm",children:(0,b.jsx)(n,{parentId:g,onFolderClick:k,enablePagination:!0})})]})})}a.s(["default",()=>p],57834)}];

//# sourceMappingURL=src_app_dashboard_folders_page_tsx_e15d77ea._.js.map