module.exports=[78122,27058,66023,37827,68567,29972,26e3,7402,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.i(81531);function d({onUpload:a,uploadProgress:d,onCancelUpload:g,disabled:h=!1}){let[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)([]),m=(0,c.useRef)(null),n=(0,c.useCallback)(a=>{let b=[],c=[];for(let d of a){if("application/pdf"!==d.type){c.push(`"${d.name}" is not a PDF file. Only PDF files are allowed.`);continue}if("pdf"!==d.name.split(".").pop()?.toLowerCase()){c.push(`"${d.name}" does not have a .pdf extension.`);continue}if(d.size>0x3200000){let a=(d.size/1048576).toFixed(2);c.push(`"${d.name}" exceeds the 50MB limit (${a}MB).`);continue}b.push(d)}return{valid:b,errors:c}},[]),o=(0,c.useCallback)(async b=>{let{valid:c,errors:d}=n(Array.from(b));l(d),c.length>0&&await a(c)},[n,a]),p=(0,c.useCallback)(a=>{a.preventDefault(),a.stopPropagation(),h||j(!0)},[h]),q=(0,c.useCallback)(a=>{a.preventDefault(),a.stopPropagation(),j(!1)},[]),r=(0,c.useCallback)(a=>{a.preventDefault(),a.stopPropagation()},[]),s=(0,c.useCallback)(a=>{if(a.preventDefault(),a.stopPropagation(),j(!1),h)return;let b=a.dataTransfer.files;b.length>0&&o(b)},[h,o]),t=(0,c.useCallback)(a=>{let b=a.target.files;b&&b.length>0&&o(b),m.current&&(m.current.value="")},[o]),u=(0,c.useCallback)(()=>{h||m.current?.click()},[h]),v=Array.from(d.entries()).filter(([,a])=>"uploading"===a.status||"pending"===a.status),w=v.length>0;return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{onClick:u,onDragEnter:p,onDragLeave:q,onDragOver:r,onDrop:s,onKeyDown:a=>{("Enter"===a.key||" "===a.key)&&(a.preventDefault(),u())},tabIndex:h?-1:0,role:"button","aria-label":"Upload PDF files. Click to browse or drag and drop files here.","aria-disabled":h,className:`
          relative cursor-pointer rounded-lg border-2 border-dashed p-6 sm:p-8 text-center transition-colors active:scale-[0.99] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2
          ${i?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400 hover:bg-gray-50"}
          ${h?"cursor-not-allowed opacity-50":""}
        `,children:[(0,b.jsx)("input",{ref:m,type:"file",accept:".pdf,application/pdf",multiple:!0,onChange:t,className:"hidden",disabled:h,"aria-label":"Select PDF files to upload"}),(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)("svg",{className:`h-10 w-10 sm:h-12 sm:w-12 ${i?"text-blue-500":"text-gray-400"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,b.jsx)("p",{className:"mt-3 sm:mt-4 text-sm font-medium text-gray-900",children:i?"Drop files here":"Tap to select PDF files"}),(0,b.jsx)("p",{className:"mt-1 text-xs text-gray-600 hidden sm:block",children:"or drag and drop"}),(0,b.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"PDF files only, max 50MB each"})]})]}),k.length>0&&(0,b.jsxs)("div",{className:"rounded-lg bg-red-50 p-4",role:"alert","aria-live":"polite",children:[(0,b.jsxs)("div",{className:"flex",children:[(0,b.jsx)("svg",{className:"h-5 w-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,b.jsxs)("div",{className:"ml-3",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Some files could not be uploaded"}),(0,b.jsx)("ul",{className:"mt-2 list-disc pl-5 text-sm text-red-700","aria-label":"Upload errors",children:k.map((a,c)=>(0,b.jsx)("li",{children:a},c))})]})]}),(0,b.jsx)("button",{onClick:()=>l([]),className:"mt-2 text-sm text-red-600 hover:text-red-800 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2 rounded","aria-label":"Dismiss error messages",children:"Dismiss"})]}),w&&(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Uploading files..."}),v.map(([a,c])=>(0,b.jsx)(e,{fileName:a,progress:c,onCancel:()=>g(a)},a))]}),Array.from(d.entries()).filter(([,a])=>"completed"===a.status||"error"===a.status||"cancelled"===a.status).length>0&&(0,b.jsx)("div",{className:"space-y-2",children:Array.from(d.entries()).filter(([,a])=>"completed"===a.status||"error"===a.status||"cancelled"===a.status).map(([a,c])=>(0,b.jsx)(f,{fileName:a,progress:c},a))})]})}function e({fileName:a,progress:c,onCancel:d}){return(0,b.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white p-3",role:"status","aria-label":`Uploading ${a}: ${c.progress}% complete`,children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[(0,b.jsx)("svg",{className:"h-5 w-5 flex-shrink-0 text-red-500",fill:"currentColor",viewBox:"0 0 20 20","aria-hidden":"true",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})}),(0,b.jsx)("span",{className:"truncate text-sm font-medium text-gray-900",children:a})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("span",{className:"text-sm text-gray-600","aria-live":"polite",children:[c.progress,"%"]}),(0,b.jsx)("button",{onClick:d,className:"rounded p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2","aria-label":`Cancel upload of ${a}`,children:(0,b.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),(0,b.jsx)("div",{className:"mt-2 h-1.5 w-full overflow-hidden rounded-full bg-gray-200",role:"progressbar","aria-valuenow":c.progress,"aria-valuemin":0,"aria-valuemax":100,"aria-label":`Upload progress for ${a}`,children:(0,b.jsx)("div",{className:"h-full rounded-full bg-blue-600 transition-all duration-300",style:{width:`${c.progress}%`}})})]})}function f({fileName:a,progress:c}){let d="completed"===c.status,e="cancelled"===c.status;return(0,b.jsxs)("div",{className:`
      flex items-center gap-3 rounded-lg p-3
      ${d?"bg-green-50":e?"bg-gray-50":"bg-red-50"}
    `,children:[d?(0,b.jsx)("svg",{className:"h-5 w-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):e?(0,b.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})}):(0,b.jsx)("svg",{className:"h-5 w-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,b.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,b.jsx)("p",{className:`truncate text-sm font-medium ${d?"text-green-800":e?"text-gray-600":"text-red-800"}`,children:a}),c.error&&!e&&(0,b.jsx)("p",{className:"text-xs text-red-600",children:c.error}),e&&(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Upload cancelled"})]})]})}function g({folders:a,selectedFolderId:d,onSelect:e,onClose:f,allowRoot:g=!0}){let[h,i]=(0,c.useState)(new Set),j=(0,c.useCallback)(a=>{i(b=>{let c=new Set(b);return c.has(a)?c.delete(a):c.add(a),c})},[]),k=a.filter(a=>null===a.parent_id),l=(c,f=0)=>{let g,i=(g=c.id,a.filter(a=>a.parent_id===g)),k=i.length>0,m=h.has(c.id),n=c.id===d;return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:`
            flex items-center gap-2 rounded-lg px-3 py-2 cursor-pointer transition-colors
            ${n?"bg-blue-100 text-blue-900":"hover:bg-gray-100"}
          `,style:{paddingLeft:`${20*f+12}px`},children:[k?(0,b.jsx)("button",{onClick:a=>{a.stopPropagation(),j(c.id)},className:"p-0.5 hover:bg-gray-200 rounded",children:(0,b.jsx)("svg",{className:`h-4 w-4 text-gray-500 transition-transform ${m?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}):(0,b.jsx)("span",{className:"w-5"}),(0,b.jsxs)("button",{onClick:()=>e(c),className:"flex items-center gap-2 flex-1 text-left",children:[(0,b.jsx)("svg",{className:`h-5 w-5 ${n?"text-blue-600":"text-yellow-500"}`,fill:"currentColor",viewBox:"0 0 20 20",children:(0,b.jsx)("path",{d:"M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"})}),(0,b.jsx)("span",{className:"text-sm font-medium",children:c.name})]})]}),k&&m&&(0,b.jsx)("div",{children:i.map(a=>l(a,f+1))})]},c.id)};return(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,b.jsxs)("div",{className:"w-full max-w-md rounded-lg bg-white shadow-xl",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between border-b border-gray-200 px-4 py-3",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Select Folder"}),(0,b.jsx)("button",{onClick:f,className:"rounded-lg p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600",children:(0,b.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,b.jsxs)("div",{className:"max-h-80 overflow-y-auto p-2",children:[g&&(0,b.jsxs)("button",{onClick:()=>e(null),className:`
                flex w-full items-center gap-2 rounded-lg px-3 py-2 text-left transition-colors
                ${null===d?"bg-blue-100 text-blue-900":"hover:bg-gray-100"}
              `,children:[(0,b.jsx)("svg",{className:`h-5 w-5 ${null===d?"text-blue-600":"text-gray-400"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),(0,b.jsx)("span",{className:"text-sm font-medium",children:"Root (No folder)"})]}),k.length>0?k.map(a=>l(a)):(0,b.jsx)("div",{className:"py-8 text-center text-sm text-gray-500",children:"No folders available"})]}),(0,b.jsx)("div",{className:"flex justify-end gap-3 border-t border-gray-200 px-4 py-3",children:(0,b.jsx)("button",{onClick:f,className:"rounded-lg px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100",children:"Cancel"})})]})})}a.s(["FileUpload",()=>d],27058),a.s(["FolderPickerModal",()=>g],66023);let h=(0,c.memo)(function({document:a,onPreview:d,onMove:e,onDelete:f}){var g;let h=(0,c.useCallback)(()=>d(a),[a,d]),i=(0,c.useCallback)(b=>{b.stopPropagation(),e(a)},[a,e]),j=(0,c.useCallback)(b=>{b.stopPropagation(),f(a)},[a,f]);return(0,b.jsxs)("div",{className:"group relative rounded-lg border border-gray-200 bg-white p-4 shadow-sm transition-shadow hover:shadow-md",children:[(0,b.jsx)("button",{onClick:h,className:"flex w-full flex-col items-center",children:(0,b.jsx)("div",{className:"flex h-24 w-full items-center justify-center rounded-lg bg-red-50",children:(0,b.jsx)("svg",{className:"h-16 w-16 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})})})}),(0,b.jsxs)("div",{className:"mt-3 w-full",children:[(0,b.jsx)("h3",{className:"truncate text-sm font-medium text-gray-900",title:a.name,children:a.name}),(0,b.jsxs)("p",{className:"mt-1 text-xs text-gray-500",children:[(g=a.file_size)<1024?`${g} B`:g<1048576?`${(g/1024).toFixed(1)} KB`:`${(g/1048576).toFixed(1)} MB`," â€¢ ",new Date(a.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]})]}),(0,b.jsxs)("div",{className:"absolute right-2 top-2 flex gap-1 opacity-0 transition-opacity group-hover:opacity-100",children:[(0,b.jsx)("button",{onClick:h,className:"rounded-lg bg-white p-1.5 text-gray-600 shadow-sm hover:bg-gray-100",title:"Preview",children:(0,b.jsxs)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),(0,b.jsx)("button",{onClick:i,className:"rounded-lg bg-white p-1.5 text-gray-600 shadow-sm hover:bg-gray-100",title:"Move",children:(0,b.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})}),(0,b.jsx)("button",{onClick:j,className:"rounded-lg bg-white p-1.5 text-red-600 shadow-sm hover:bg-red-50",title:"Delete",children:(0,b.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})}),i=(0,c.memo)(function({documents:a,onPreview:c,onMove:d,onDelete:e}){return(0,b.jsx)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:a.map(a=>(0,b.jsx)(h,{document:a,onPreview:c,onMove:d,onDelete:e},a.id))})});a.s(["DocumentGrid",0,i],37827);let j=(0,c.memo)(function({document:a,onPreview:d,onMove:e,onDelete:f}){var g;let h=(0,c.useCallback)(()=>d(a),[a,d]),i=(0,c.useCallback)(()=>e(a),[a,e]),j=(0,c.useCallback)(()=>f(a),[a,f]);return(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"whitespace-nowrap px-6 py-4",children:(0,b.jsxs)("button",{onClick:h,className:"flex items-center gap-3 text-left",children:[(0,b.jsx)("svg",{className:"h-8 w-8 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-gray-900 hover:text-blue-600",children:a.name}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:a.original_name})]})]})}),(0,b.jsx)("td",{className:"hidden whitespace-nowrap px-6 py-4 text-sm text-gray-500 sm:table-cell",children:(g=a.file_size)<1024?`${g} B`:g<1048576?`${(g/1024).toFixed(1)} KB`:`${(g/1048576).toFixed(1)} MB`}),(0,b.jsx)("td",{className:"hidden whitespace-nowrap px-6 py-4 text-sm text-gray-500 md:table-cell",children:new Date(a.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),(0,b.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-right",children:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,b.jsx)("button",{onClick:h,className:"rounded p-1 text-gray-600 hover:bg-gray-100 hover:text-blue-600",title:"Preview",children:(0,b.jsxs)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),(0,b.jsx)("button",{onClick:i,className:"rounded p-1 text-gray-600 hover:bg-gray-100 hover:text-blue-600",title:"Move",children:(0,b.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})}),(0,b.jsx)("button",{onClick:j,className:"rounded p-1 text-red-600 hover:bg-red-50 hover:text-red-800",title:"Delete",children:(0,b.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]})}),k=(0,c.memo)(function({documents:a,onPreview:c,onMove:d,onDelete:e}){return(0,b.jsx)("div",{className:"overflow-hidden rounded-lg border border-gray-200 bg-white",children:(0,b.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Name"}),(0,b.jsx)("th",{className:"hidden px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 sm:table-cell",children:"Size"}),(0,b.jsx)("th",{className:"hidden px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 md:table-cell",children:"Uploaded"}),(0,b.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-200",children:a.map(a=>(0,b.jsx)(j,{document:a,onPreview:c,onMove:d,onDelete:e},a.id))})]})})});a.s(["DocumentList",0,k],68567);var l=a.i(8098);function m({document:d,onClose:e}){let{user:f}=(0,l.useAuth)(),[g,h]=(0,c.useState)(null),[i,j]=(0,c.useState)(!0),[k,m]=(0,c.useState)(null),n=(0,c.useCallback)(async()=>{if(f){j(!0),m(null);try{let{getIdToken:b}=await a.A(30560),c=await b();if(!c)throw Error("Not authenticated");let e=await fetch(`/api/documents/${d.id}`,{headers:{Authorization:`Bearer ${c}`}}),f=await e.json();if(!e.ok)throw Error(f.error||"Failed to load document");h(f.presignedUrl)}catch(a){m(a instanceof Error?a.message:"Failed to load document")}finally{j(!1)}}},[d.id,f]);return(0,c.useEffect)(()=>{n()},[n]),(0,c.useEffect)(()=>{let a=a=>{"Escape"===a.key&&e()};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[e]),(0,b.jsxs)("div",{className:"fixed inset-0 z-50 flex flex-col bg-black/90",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between bg-gray-900 px-4 py-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("svg",{className:"h-6 w-6 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-lg font-medium text-white",children:d.name}),(0,b.jsx)("p",{className:"text-sm text-gray-400",children:d.original_name})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[g&&(0,b.jsxs)("a",{href:g,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 rounded-lg bg-blue-600 px-3 py-2 text-sm font-medium text-white hover:bg-blue-700",children:[(0,b.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download"]}),(0,b.jsx)("button",{onClick:e,className:"rounded-lg p-2 text-gray-400 hover:bg-gray-800 hover:text-white",children:(0,b.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),(0,b.jsxs)("div",{className:"flex-1 overflow-hidden",children:[i&&(0,b.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,b.jsx)("div",{className:"h-12 w-12 animate-spin rounded-full border-4 border-blue-600 border-t-transparent"}),(0,b.jsx)("p",{className:"text-gray-400",children:"Loading document..."})]})}),k&&(0,b.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-4 text-center",children:[(0,b.jsx)("svg",{className:"h-16 w-16 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,b.jsx)("p",{className:"text-lg text-white",children:k}),(0,b.jsx)("button",{onClick:n,className:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700",children:"Try Again"})]})}),!i&&!k&&g&&(0,b.jsx)("iframe",{src:g,className:"h-full w-full",title:`Preview of ${d.name}`})]})]})}function n({document:a,folders:d,onMove:e,onClose:f}){let[g,h]=(0,c.useState)(a.folder_id),[i,j]=(0,c.useState)(new Set),[k,l]=(0,c.useState)(!1),m=(0,c.useCallback)(a=>{j(b=>{let c=new Set(b);return c.has(a)?c.delete(a):c.add(a),c})},[]);(0,c.useEffect)(()=>{let a=a=>{"Escape"!==a.key||k||f()};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[f,k]);let n=async()=>{if(g===a.folder_id)return void f();l(!0);try{await e(a.id,g),f()}finally{l(!1)}},o=d.filter(a=>null===a.parent_id),p=(c,e=0)=>{let f,j=(f=c.id,d.filter(a=>a.parent_id===f)),k=j.length>0,l=i.has(c.id),n=c.id===g,o=c.id===a.folder_id;return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:`
            flex items-center gap-2 rounded-lg px-3 py-2 cursor-pointer transition-colors
            ${n?"bg-blue-100 text-blue-900":"hover:bg-gray-100"}
            ${o?"border-l-2 border-blue-500":""}
          `,style:{paddingLeft:`${20*e+12}px`},children:[k?(0,b.jsx)("button",{onClick:a=>{a.stopPropagation(),m(c.id)},className:"p-0.5 hover:bg-gray-200 rounded",children:(0,b.jsx)("svg",{className:`h-4 w-4 text-gray-500 transition-transform ${l?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}):(0,b.jsx)("span",{className:"w-5"}),(0,b.jsxs)("button",{onClick:()=>h(c.id),className:"flex items-center gap-2 flex-1 text-left",children:[(0,b.jsx)("svg",{className:`h-5 w-5 ${n?"text-blue-600":"text-yellow-500"}`,fill:"currentColor",viewBox:"0 0 20 20",children:(0,b.jsx)("path",{d:"M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"})}),(0,b.jsx)("span",{className:"text-sm font-medium",children:c.name}),o&&(0,b.jsx)("span",{className:"text-xs text-gray-500",children:"(current)"})]})]}),k&&l&&(0,b.jsx)("div",{children:j.map(a=>p(a,e+1))})]},c.id)};return(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,b.jsxs)("div",{className:"w-full max-w-md rounded-lg bg-white shadow-xl",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between border-b border-gray-200 px-4 py-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Move Document"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 truncate max-w-xs",children:a.name})]}),(0,b.jsx)("button",{onClick:f,disabled:k,className:"rounded-lg p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600 disabled:opacity-50",children:(0,b.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,b.jsxs)("div",{className:"max-h-80 overflow-y-auto p-2",children:[(0,b.jsxs)("button",{onClick:()=>h(null),className:`
              flex w-full items-center gap-2 rounded-lg px-3 py-2 text-left transition-colors
              ${null===g?"bg-blue-100 text-blue-900":"hover:bg-gray-100"}
              ${null===a.folder_id?"border-l-2 border-blue-500":""}
            `,children:[(0,b.jsx)("svg",{className:`h-5 w-5 ${null===g?"text-blue-600":"text-gray-400"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),(0,b.jsx)("span",{className:"text-sm font-medium",children:"Root (No folder)"}),null===a.folder_id&&(0,b.jsx)("span",{className:"text-xs text-gray-500",children:"(current)"})]}),o.length>0?o.map(a=>p(a)):(0,b.jsx)("div",{className:"py-8 text-center text-sm text-gray-500",children:"No folders available"})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 border-t border-gray-200 px-4 py-3",children:[(0,b.jsx)("button",{onClick:f,disabled:k,className:"rounded-lg px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 disabled:opacity-50",children:"Cancel"}),(0,b.jsx)("button",{onClick:n,disabled:k||g===a.folder_id,className:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 disabled:opacity-50",children:k?"Moving...":"Move"})]})]})})}a.s(["DocumentPreview",()=>m],29972),a.s(["MoveDocumentModal",()=>n],26e3);let o=(0,c.memo)(function({viewMode:a,onViewModeChange:d}){let e=(0,c.useCallback)(()=>d("grid"),[d]),f=(0,c.useCallback)(()=>d("list"),[d]);return(0,b.jsxs)("div",{className:"flex items-center rounded-lg border border-gray-300 bg-white p-1",role:"group","aria-label":"View mode selection",children:[(0,b.jsxs)("button",{onClick:e,className:`
          flex items-center gap-1 rounded-md px-3 py-1.5 text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-1
          ${"grid"===a?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}
        `,"aria-label":"Grid view","aria-pressed":"grid"===a,children:[(0,b.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Grid"})]}),(0,b.jsxs)("button",{onClick:f,className:`
          flex items-center gap-1 rounded-md px-3 py-1.5 text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-1
          ${"list"===a?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}
        `,"aria-label":"List view","aria-pressed":"list"===a,children:[(0,b.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"List"})]})]})});a.s(["ViewToggle",0,o],7402),a.s([],78122)}];

//# sourceMappingURL=src_components_documents_index_ts_843ac583._.js.map