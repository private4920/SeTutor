{"version":3,"sources":["../../../../src/app/dashboard/files/page.tsx","../../../../src/components/files/FileExplorer.tsx","../../../../src/components/files/FolderTreeNav.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { Suspense } from 'react';\r\nimport { useSearchParams } from 'next/navigation';\r\nimport { DashboardLayout } from '@/components/dashboard/DashboardLayout';\r\nimport { FileExplorer } from '@/components/files';\r\n\r\nfunction FilesPageContent() {\r\n  const searchParams = useSearchParams();\r\n  const folderId = searchParams.get('folderId');\r\n\r\n  return (\r\n    <DashboardLayout>\r\n      <div className=\"p-4 h-full\">\r\n        <FileExplorer initialFolderId={folderId} />\r\n      </div>\r\n    </DashboardLayout>\r\n  );\r\n}\r\n\r\nexport default function FilesPage() {\r\n  return (\r\n    <Suspense fallback={\r\n      <DashboardLayout>\r\n        <div className=\"flex items-center justify-center py-12\">\r\n          <div className=\"h-8 w-8 animate-spin rounded-full border-4 border-blue-600 border-t-transparent\" />\r\n        </div>\r\n      </DashboardLayout>\r\n    }>\r\n      <FilesPageContent />\r\n    </Suspense>\r\n  );\r\n}\r\n","\"use client\";\r\n\r\nimport { useState, useEffect, useCallback, memo } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useFolders, Folder } from '@/lib/hooks/useFolders';\r\nimport { useDocuments, Document } from '@/lib/hooks/useDocuments';\r\nimport { Breadcrumbs, buildBreadcrumbsFromPath, BreadcrumbItem } from '@/components/folders/Breadcrumbs';\r\nimport { CreateFolderModal } from '@/components/folders/CreateFolderModal';\r\nimport { RenameFolderModal } from '@/components/folders/RenameFolderModal';\r\nimport { MoveFolderModal } from '@/components/folders/MoveFolderModal';\r\nimport { MoveDocumentModal, DocumentPreview, ViewToggle, ViewMode } from '@/components/documents';\r\nimport { ConfirmDialog } from '@/components/ui/ConfirmDialog';\r\nimport { FolderGridSkeleton, DocumentGridSkeleton } from '@/components/ui/Skeleton';\r\nimport { useToast } from '@/components/ui/Toast';\r\nimport { useDebounce } from '@/lib/hooks/useDebounce';\r\nimport { FolderTreeNav } from './FolderTreeNav';\r\n\r\ntype DeleteTarget = { type: 'folder'; item: Folder } | { type: 'document'; item: Document } | null;\r\n\r\ninterface FileExplorerProps {\r\n  initialFolderId?: string | null;\r\n}\r\n\r\n// Folder item for the explorer\r\nconst FolderCard = memo(function FolderCard({\r\n  folder,\r\n  onNavigate,\r\n  onRename,\r\n  onMove,\r\n  onDelete,\r\n}: {\r\n  folder: Folder;\r\n  onNavigate: (folder: Folder) => void;\r\n  onRename: (folder: Folder) => void;\r\n  onMove: (folder: Folder) => void;\r\n  onDelete: (folder: Folder) => void;\r\n}) {\r\n  const [showMenu, setShowMenu] = useState(false);\r\n\r\n  return (\r\n    <div\r\n      className=\"group relative flex items-center gap-3 rounded-lg border border-gray-200 bg-white p-3 sm:p-4 transition-all hover:border-blue-300 hover:shadow-md cursor-pointer\"\r\n      onClick={() => onNavigate(folder)}\r\n      onKeyDown={(e) => { if (e.key === 'Enter') onNavigate(folder); }}\r\n      tabIndex={0}\r\n      role=\"button\"\r\n      aria-label={`Open folder ${folder.name}`}\r\n    >\r\n      <div className=\"flex h-10 w-10 sm:h-12 sm:w-12 flex-shrink-0 items-center justify-center rounded-lg bg-gradient-to-r from-blue-100 to-purple-100\">\r\n        <svg className=\"h-5 w-5 sm:h-6 sm:w-6 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z\" />\r\n        </svg>\r\n      </div>\r\n      <div className=\"flex-1 min-w-0\">\r\n        <h3 className=\"text-sm font-medium text-gray-900 truncate\">{folder.name}</h3>\r\n        <p className=\"text-xs text-gray-500\">Folder</p>\r\n      </div>\r\n      <div className=\"relative\">\r\n        <button\r\n          onClick={(e) => { e.stopPropagation(); setShowMenu(!showMenu); }}\r\n          className=\"rounded-lg p-2 text-gray-400 hover:bg-gray-100 hover:text-gray-600 sm:opacity-0 group-hover:opacity-100\"\r\n          aria-label=\"Actions\"\r\n        >\r\n          <svg className=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z\" />\r\n          </svg>\r\n        </button>\r\n        {showMenu && (\r\n          <>\r\n            <div className=\"fixed inset-0 z-10\" onClick={(e) => { e.stopPropagation(); setShowMenu(false); }} />\r\n            <div className=\"absolute right-0 top-full z-20 mt-1 w-40 rounded-lg border border-gray-200 bg-white py-1 shadow-lg\">\r\n              <button onClick={(e) => { e.stopPropagation(); setShowMenu(false); onRename(folder); }} className=\"flex w-full items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\">\r\n                <svg className=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\" /></svg>\r\n                Rename\r\n              </button>\r\n              <button onClick={(e) => { e.stopPropagation(); setShowMenu(false); onMove(folder); }} className=\"flex w-full items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\">\r\n                <svg className=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4\" /></svg>\r\n                Move\r\n              </button>\r\n              <hr className=\"my-1\" />\r\n              <button onClick={(e) => { e.stopPropagation(); setShowMenu(false); onDelete(folder); }} className=\"flex w-full items-center gap-2 px-4 py-2 text-sm text-red-600 hover:bg-red-50\">\r\n                <svg className=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" /></svg>\r\n                Delete\r\n              </button>\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\n\r\n// Document item for the explorer\r\nconst DocumentCard = memo(function DocumentCard({\r\n  document: doc,\r\n  onPreview,\r\n  onMove,\r\n  onDelete,\r\n}: {\r\n  document: Document;\r\n  onPreview: (doc: Document) => void;\r\n  onMove: (doc: Document) => void;\r\n  onDelete: (doc: Document) => void;\r\n}) {\r\n  const [showMenu, setShowMenu] = useState(false);\r\n\r\n  const formatFileSize = (bytes: number) => {\r\n    if (bytes < 1024) return `${bytes} B`;\r\n    if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;\r\n    return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"group relative flex items-center gap-3 rounded-lg border border-gray-200 bg-white p-3 sm:p-4 transition-all hover:border-gray-300 hover:shadow-md cursor-pointer\"\r\n      onClick={() => onPreview(doc)}\r\n      onKeyDown={(e) => { if (e.key === 'Enter') onPreview(doc); }}\r\n      tabIndex={0}\r\n      role=\"button\"\r\n      aria-label={`Preview ${doc.name}`}\r\n    >\r\n      <div className=\"flex h-10 w-10 sm:h-12 sm:w-12 flex-shrink-0 items-center justify-center rounded-lg bg-red-50\">\r\n        <svg className=\"h-5 w-5 sm:h-6 sm:w-6 text-red-500\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n          <path fillRule=\"evenodd\" d=\"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z\" clipRule=\"evenodd\" />\r\n        </svg>\r\n      </div>\r\n      <div className=\"flex-1 min-w-0\">\r\n        <h3 className=\"text-sm font-medium text-gray-900 truncate\">{doc.name}</h3>\r\n        <p className=\"text-xs text-gray-500\">{formatFileSize(doc.file_size)}</p>\r\n      </div>\r\n      <div className=\"relative\">\r\n        <button\r\n          onClick={(e) => { e.stopPropagation(); setShowMenu(!showMenu); }}\r\n          className=\"rounded-lg p-2 text-gray-400 hover:bg-gray-100 hover:text-gray-600 sm:opacity-0 group-hover:opacity-100\"\r\n          aria-label=\"Actions\"\r\n        >\r\n          <svg className=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z\" />\r\n          </svg>\r\n        </button>\r\n        {showMenu && (\r\n          <>\r\n            <div className=\"fixed inset-0 z-10\" onClick={(e) => { e.stopPropagation(); setShowMenu(false); }} />\r\n            <div className=\"absolute right-0 top-full z-20 mt-1 w-40 rounded-lg border border-gray-200 bg-white py-1 shadow-lg\">\r\n              <button onClick={(e) => { e.stopPropagation(); setShowMenu(false); onPreview(doc); }} className=\"flex w-full items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\">\r\n                <svg className=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" /><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" /></svg>\r\n                Preview\r\n              </button>\r\n              <button onClick={(e) => { e.stopPropagation(); setShowMenu(false); onMove(doc); }} className=\"flex w-full items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\">\r\n                <svg className=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4\" /></svg>\r\n                Move\r\n              </button>\r\n              <hr className=\"my-1\" />\r\n              <button onClick={(e) => { e.stopPropagation(); setShowMenu(false); onDelete(doc); }} className=\"flex w-full items-center gap-2 px-4 py-2 text-sm text-red-600 hover:bg-red-50\">\r\n                <svg className=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" /></svg>\r\n                Delete\r\n              </button>\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\n\r\nexport function FileExplorer({ initialFolderId = null }: FileExplorerProps) {\r\n  const router = useRouter();\r\n  const toast = useToast();\r\n  \r\n  // Current folder state\r\n  const [currentFolderId, setCurrentFolderId] = useState<string | null>(initialFolderId);\r\n  const [breadcrumbs, setBreadcrumbs] = useState<BreadcrumbItem[]>([{ id: null, name: 'My Files' }]);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [viewMode, setViewMode] = useState<ViewMode>('list');\r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\r\n  \r\n  // Folder state\r\n  const {\r\n    folders,\r\n    loading: foldersLoading,\r\n    error: foldersError,\r\n    fetchFolders,\r\n    createFolder,\r\n    renameFolder,\r\n    deleteFolder,\r\n    moveFolder,\r\n  } = useFolders();\r\n  \r\n  // Document state\r\n  const {\r\n    documents,\r\n    loading: documentsLoading,\r\n    error: documentsError,\r\n    fetchDocuments,\r\n    searchDocuments,\r\n    deleteDocument,\r\n    moveDocument,\r\n  } = useDocuments();\r\n  \r\n  // Modal states\r\n  const [showCreateFolderModal, setShowCreateFolderModal] = useState(false);\r\n  const [folderToRename, setFolderToRename] = useState<Folder | null>(null);\r\n  const [folderToMove, setFolderToMove] = useState<Folder | null>(null);\r\n  const [documentToMove, setDocumentToMove] = useState<Document | null>(null);\r\n  const [documentToPreview, setDocumentToPreview] = useState<Document | null>(null);\r\n  const [deleteTarget, setDeleteTarget] = useState<DeleteTarget>(null);\r\n  const [allFolders, setAllFolders] = useState<Folder[]>([]);\r\n  \r\n  const debouncedSearchQuery = useDebounce(searchQuery, 300);\r\n  const loading = foldersLoading || documentsLoading;\r\n  const error = foldersError || documentsError;\r\n\r\n  // Fetch folders and documents for current folder\r\n  useEffect(() => {\r\n    if (debouncedSearchQuery.trim()) {\r\n      searchDocuments(debouncedSearchQuery);\r\n    } else {\r\n      fetchFolders(currentFolderId);\r\n      fetchDocuments(currentFolderId);\r\n    }\r\n  }, [currentFolderId, debouncedSearchQuery, fetchFolders, fetchDocuments, searchDocuments]);\r\n\r\n  // Update breadcrumbs when folder changes\r\n  useEffect(() => {\r\n    const newBreadcrumbs = buildBreadcrumbsFromPath(folders, currentFolderId);\r\n    // Replace \"Root\" with \"My Files\"\r\n    if (newBreadcrumbs.length > 0) {\r\n      const firstItem = newBreadcrumbs[0];\r\n      if (firstItem && firstItem.name === 'Root') {\r\n        firstItem.name = 'My Files';\r\n      }\r\n    }\r\n    setBreadcrumbs(newBreadcrumbs);\r\n  }, [currentFolderId, folders]);\r\n\r\n  // Fetch all folders for move modals\r\n  useEffect(() => {\r\n    const fetchAllFolders = async () => {\r\n      try {\r\n        const { getIdToken } = await import('@/lib/hooks/useAuthenticatedFetch');\r\n        const token = await getIdToken();\r\n        if (!token) return;\r\n        const response = await fetch('/api/folders', {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          setAllFolders(data.folders || []);\r\n        }\r\n      } catch (err) {\r\n        console.error('Failed to fetch all folders:', err);\r\n      }\r\n    };\r\n    fetchAllFolders();\r\n  }, [folders]);\r\n\r\n  // Navigation\r\n  const handleFolderNavigate = useCallback((folder: Folder) => {\r\n    setCurrentFolderId(folder.id);\r\n    setSearchQuery('');\r\n  }, []);\r\n\r\n  const handleBreadcrumbClick = useCallback((item: BreadcrumbItem) => {\r\n    setCurrentFolderId(item.id);\r\n    setSearchQuery('');\r\n  }, []);\r\n\r\n  const handleSidebarFolderSelect = useCallback((folderId: string | null) => {\r\n    setCurrentFolderId(folderId);\r\n    setSearchQuery('');\r\n  }, []);\r\n\r\n  const handleToggleSidebar = useCallback(() => {\r\n    setSidebarCollapsed(prev => !prev);\r\n  }, []);\r\n\r\n  // Folder actions\r\n  const handleCreateFolder = useCallback(async (name: string) => {\r\n    const result = await createFolder(name, currentFolderId);\r\n    if (result) {\r\n      toast.success(`Folder \"${name}\" created`);\r\n    } else {\r\n      toast.error('Failed to create folder');\r\n      throw new Error('Failed to create folder');\r\n    }\r\n  }, [createFolder, currentFolderId, toast]);\r\n\r\n  const handleRenameFolder = useCallback(async (newName: string) => {\r\n    if (!folderToRename) return;\r\n    const result = await renameFolder(folderToRename.id, newName);\r\n    if (result) {\r\n      toast.success(`Folder renamed to \"${newName}\"`);\r\n    } else {\r\n      toast.error('Failed to rename folder');\r\n      throw new Error('Failed to rename folder');\r\n    }\r\n  }, [renameFolder, folderToRename, toast]);\r\n\r\n  const handleMoveFolder = useCallback(async (newParentId: string | null) => {\r\n    if (!folderToMove) return;\r\n    const result = await moveFolder(folderToMove.id, newParentId);\r\n    if (result) {\r\n      toast.success('Folder moved');\r\n      fetchFolders(currentFolderId);\r\n    } else {\r\n      toast.error('Failed to move folder');\r\n      throw new Error('Failed to move folder');\r\n    }\r\n  }, [moveFolder, folderToMove, toast, fetchFolders, currentFolderId]);\r\n\r\n  const handleMoveDocument = useCallback(async (documentId: string, newFolderId: string | null) => {\r\n    const result = await moveDocument(documentId, newFolderId);\r\n    if (result) {\r\n      toast.success('Document moved');\r\n      fetchDocuments(currentFolderId);\r\n    } else {\r\n      toast.error('Failed to move document');\r\n    }\r\n  }, [moveDocument, toast, fetchDocuments, currentFolderId]);\r\n\r\n  const handleDelete = useCallback(async () => {\r\n    if (!deleteTarget) return;\r\n    \r\n    if (deleteTarget.type === 'folder') {\r\n      const success = await deleteFolder(deleteTarget.item.id);\r\n      if (success) {\r\n        toast.success(`Folder \"${deleteTarget.item.name}\" deleted`);\r\n      } else {\r\n        toast.error('Failed to delete folder');\r\n      }\r\n    } else {\r\n      const success = await deleteDocument(deleteTarget.item.id);\r\n      if (success) {\r\n        toast.success(`\"${deleteTarget.item.name}\" deleted`);\r\n      } else {\r\n        toast.error('Failed to delete document');\r\n      }\r\n    }\r\n    setDeleteTarget(null);\r\n  }, [deleteTarget, deleteFolder, deleteDocument, toast]);\r\n\r\n  // Filter items for current folder (when not searching)\r\n  const currentFolders = debouncedSearchQuery.trim() ? [] : folders.filter(f => f.parent_id === currentFolderId);\r\n  const currentDocuments = documents;\r\n\r\n  const isEmpty = currentFolders.length === 0 && currentDocuments.length === 0;\r\n\r\n\r\n  return (\r\n    <div className=\"flex h-[calc(100vh-12rem)] min-h-[500px] rounded-lg border border-gray-200 bg-white overflow-hidden\">\r\n      {/* Folder Tree Sidebar - Hidden on mobile */}\r\n      <div className=\"hidden md:block\">\r\n        <FolderTreeNav\r\n          folders={allFolders}\r\n          currentFolderId={currentFolderId}\r\n          onFolderSelect={handleSidebarFolderSelect}\r\n          isCollapsed={sidebarCollapsed}\r\n          onToggleCollapse={handleToggleSidebar}\r\n        />\r\n      </div>\r\n\r\n      {/* Main Content Area */}\r\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\r\n        {/* Header with breadcrumbs and actions */}\r\n        <div className=\"flex flex-col gap-3 p-4 border-b border-gray-200 bg-white\">\r\n          <div className=\"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between\">\r\n            <div className=\"flex items-center gap-2\">\r\n              {/* Mobile sidebar toggle */}\r\n              <button\r\n                onClick={handleToggleSidebar}\r\n                className=\"md:hidden p-2 hover:bg-gray-100 rounded-lg\"\r\n                aria-label=\"Toggle folder navigation\"\r\n              >\r\n                <svg className=\"w-5 h-5 text-gray-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 6h16M4 12h16M4 18h16\" />\r\n                </svg>\r\n              </button>\r\n              <div>\r\n                <Breadcrumbs\r\n                  items={breadcrumbs}\r\n                  onItemClick={handleBreadcrumbClick}\r\n                  showHomeIcon={true}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"flex gap-2\">\r\n              <button\r\n                onClick={() => setShowCreateFolderModal(true)}\r\n                className=\"flex items-center gap-2 rounded-lg border border-gray-300 bg-white px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-50\"\r\n              >\r\n                <svg className=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z\" />\r\n                </svg>\r\n                <span className=\"hidden sm:inline\">New Folder</span>\r\n              </button>\r\n              <button\r\n                onClick={() => router.push(`/dashboard/files/upload${currentFolderId ? `?folderId=${currentFolderId}` : ''}`)}\r\n                className=\"flex items-center gap-2 rounded-lg bg-blue-600 px-3 py-1.5 text-sm font-medium text-white hover:bg-blue-700\"\r\n              >\r\n                <svg className=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12\" />\r\n                </svg>\r\n                <span className=\"hidden sm:inline\">Upload</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Search and View Toggle */}\r\n          <div className=\"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between\">\r\n            <div className=\"relative flex-1 max-w-md\">\r\n              <svg className=\"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\r\n              </svg>\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Search files...\"\r\n                value={searchQuery}\r\n                onChange={(e) => setSearchQuery(e.target.value)}\r\n                className=\"w-full rounded-lg border border-gray-300 py-1.5 pl-9 pr-4 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n              />\r\n            </div>\r\n            <ViewToggle viewMode={viewMode} onViewModeChange={setViewMode} />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Scrollable Content Area */}\r\n        <div className=\"flex-1 overflow-y-auto p-4\">\r\n          {/* Error */}\r\n          {error && (\r\n            <div className=\"rounded-lg bg-red-50 p-4 text-sm text-red-600 mb-4\">{error}</div>\r\n          )}\r\n\r\n          {/* Loading */}\r\n          {loading && isEmpty && (\r\n            <div className=\"space-y-4\">\r\n              <FolderGridSkeleton count={3} />\r\n              <DocumentGridSkeleton count={4} />\r\n            </div>\r\n          )}\r\n\r\n          {/* Empty State */}\r\n          {!loading && isEmpty && !debouncedSearchQuery.trim() && (\r\n            <div className=\"flex flex-col items-center justify-center h-full min-h-[300px] text-center\">\r\n              <svg className=\"h-16 w-16 text-gray-300\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z\" />\r\n              </svg>\r\n              <h3 className=\"mt-4 text-sm font-medium text-gray-900\">This folder is empty</h3>\r\n              <p className=\"mt-1 text-sm text-gray-500\">Create a folder or upload files to get started.</p>\r\n              <div className=\"mt-4 flex gap-3\">\r\n                <button\r\n                  onClick={() => setShowCreateFolderModal(true)}\r\n                  className=\"inline-flex items-center gap-2 rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50\"\r\n                >\r\n                  <svg className=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z\" />\r\n                  </svg>\r\n                  New Folder\r\n                </button>\r\n                <button\r\n                  onClick={() => router.push(`/dashboard/files/upload${currentFolderId ? `?folderId=${currentFolderId}` : ''}`)}\r\n                  className=\"inline-flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700\"\r\n                >\r\n                  <svg className=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12\" />\r\n                  </svg>\r\n                  Upload Files\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Search empty state */}\r\n          {!loading && isEmpty && debouncedSearchQuery.trim() && (\r\n            <div className=\"flex flex-col items-center justify-center h-full min-h-[300px] text-center\">\r\n              <svg className=\"h-16 w-16 text-gray-300\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\r\n              </svg>\r\n              <h3 className=\"mt-4 text-sm font-medium text-gray-900\">No results found</h3>\r\n              <p className=\"mt-1 text-sm text-gray-500\">No files match &ldquo;{debouncedSearchQuery}&rdquo;</p>\r\n            </div>\r\n          )}\r\n\r\n          {/* Content - Folders first, then documents */}\r\n          {!isEmpty && (\r\n            <div className=\"space-y-6\">\r\n              {/* Folders Section */}\r\n              {currentFolders.length > 0 && (\r\n                <div>\r\n                  <h2 className=\"mb-3 text-xs font-medium text-gray-500 uppercase tracking-wide\">Folders</h2>\r\n                  <div className={viewMode === 'grid' \r\n                    ? \"grid gap-3 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4\"\r\n                    : \"space-y-2\"\r\n                  }>\r\n                    {currentFolders.map(folder => (\r\n                      <FolderCard\r\n                        key={folder.id}\r\n                        folder={folder}\r\n                        onNavigate={handleFolderNavigate}\r\n                        onRename={setFolderToRename}\r\n                        onMove={setFolderToMove}\r\n                        onDelete={(f) => setDeleteTarget({ type: 'folder', item: f })}\r\n                      />\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Documents Section */}\r\n              {currentDocuments.length > 0 && (\r\n                <div>\r\n                  <h2 className=\"mb-3 text-xs font-medium text-gray-500 uppercase tracking-wide\">Files</h2>\r\n                  <div className={viewMode === 'grid' \r\n                    ? \"grid gap-3 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4\"\r\n                    : \"space-y-2\"\r\n                  }>\r\n                    {currentDocuments.map(doc => (\r\n                      <DocumentCard\r\n                        key={doc.id}\r\n                        document={doc}\r\n                        onPreview={setDocumentToPreview}\r\n                        onMove={setDocumentToMove}\r\n                        onDelete={(d) => setDeleteTarget({ type: 'document', item: d })}\r\n                      />\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Modals */}\r\n      <CreateFolderModal\r\n        isOpen={showCreateFolderModal}\r\n        onClose={() => setShowCreateFolderModal(false)}\r\n        onCreate={handleCreateFolder}\r\n      />\r\n\r\n      <RenameFolderModal\r\n        isOpen={!!folderToRename}\r\n        currentName={folderToRename?.name || ''}\r\n        onClose={() => setFolderToRename(null)}\r\n        onRename={handleRenameFolder}\r\n      />\r\n\r\n      <MoveFolderModal\r\n        isOpen={!!folderToMove}\r\n        folder={folderToMove}\r\n        allFolders={allFolders.length > 0 ? allFolders : folders}\r\n        onClose={() => setFolderToMove(null)}\r\n        onMove={handleMoveFolder}\r\n      />\r\n\r\n      {documentToMove && (\r\n        <MoveDocumentModal\r\n          document={documentToMove}\r\n          folders={allFolders.length > 0 ? allFolders : folders}\r\n          onMove={handleMoveDocument}\r\n          onClose={() => setDocumentToMove(null)}\r\n        />\r\n      )}\r\n\r\n      {documentToPreview && (\r\n        <DocumentPreview\r\n          document={documentToPreview}\r\n          onClose={() => setDocumentToPreview(null)}\r\n        />\r\n      )}\r\n\r\n      <ConfirmDialog\r\n        isOpen={!!deleteTarget}\r\n        title={deleteTarget?.type === 'folder' ? 'Delete Folder' : 'Delete File'}\r\n        message={\r\n          deleteTarget\r\n            ? deleteTarget.type === 'folder'\r\n              ? `Are you sure you want to delete \"${deleteTarget.item.name}\"? This will also delete all contents inside. This action cannot be undone.`\r\n              : `Are you sure you want to delete \"${deleteTarget.item.name}\"? This action cannot be undone.`\r\n            : ''\r\n        }\r\n        confirmLabel=\"Delete\"\r\n        variant=\"danger\"\r\n        onConfirm={handleDelete}\r\n        onCancel={() => setDeleteTarget(null)}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","\"use client\";\r\n\r\nimport { useState, useCallback, memo, useEffect } from 'react';\r\nimport { Folder } from '@/lib/hooks/useFolders';\r\n\r\ninterface FolderTreeNavProps {\r\n  folders: Folder[];\r\n  currentFolderId: string | null;\r\n  onFolderSelect: (folderId: string | null) => void;\r\n  isCollapsed?: boolean;\r\n  onToggleCollapse?: () => void;\r\n}\r\n\r\ninterface TreeNode {\r\n  folder: Folder;\r\n  children: TreeNode[];\r\n}\r\n\r\n// Build tree structure from flat folder list\r\nfunction buildFolderTree(folders: Folder[]): TreeNode[] {\r\n  const folderMap = new Map<string, TreeNode>();\r\n  const rootNodes: TreeNode[] = [];\r\n\r\n  // Create nodes for all folders\r\n  folders.forEach(folder => {\r\n    folderMap.set(folder.id, { folder, children: [] });\r\n  });\r\n\r\n  // Build tree structure\r\n  folders.forEach(folder => {\r\n    const node = folderMap.get(folder.id)!;\r\n    if (folder.parent_id === null) {\r\n      rootNodes.push(node);\r\n    } else {\r\n      const parent = folderMap.get(folder.parent_id);\r\n      if (parent) {\r\n        parent.children.push(node);\r\n      } else {\r\n        // Parent not found, treat as root\r\n        rootNodes.push(node);\r\n      }\r\n    }\r\n  });\r\n\r\n  // Sort children alphabetically\r\n  const sortNodes = (nodes: TreeNode[]) => {\r\n    nodes.sort((a, b) => a.folder.name.localeCompare(b.folder.name));\r\n    nodes.forEach(node => sortNodes(node.children));\r\n  };\r\n  sortNodes(rootNodes);\r\n\r\n  return rootNodes;\r\n}\r\n\r\n// Check if a folder is an ancestor of the current folder\r\nfunction isAncestorOf(folders: Folder[], ancestorId: string, descendantId: string | null): boolean {\r\n  if (!descendantId) return false;\r\n  \r\n  let current = folders.find(f => f.id === descendantId);\r\n  while (current) {\r\n    if (current.parent_id === ancestorId) return true;\r\n    current = folders.find(f => f.id === current?.parent_id);\r\n  }\r\n  return false;\r\n}\r\n\r\n// Tree item component\r\nconst TreeItem = memo(function TreeItem({\r\n  node,\r\n  level,\r\n  currentFolderId,\r\n  expandedFolders,\r\n  onToggleExpand,\r\n  onSelect,\r\n  allFolders,\r\n}: {\r\n  node: TreeNode;\r\n  level: number;\r\n  currentFolderId: string | null;\r\n  expandedFolders: Set<string>;\r\n  onToggleExpand: (folderId: string) => void;\r\n  onSelect: (folderId: string) => void;\r\n  allFolders: Folder[];\r\n}) {\r\n  const isExpanded = expandedFolders.has(node.folder.id);\r\n  const isSelected = currentFolderId === node.folder.id;\r\n  const hasChildren = node.children.length > 0;\r\n\r\n  const handleToggle = useCallback((e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n    onToggleExpand(node.folder.id);\r\n  }, [node.folder.id, onToggleExpand]);\r\n\r\n  const handleSelect = useCallback(() => {\r\n    onSelect(node.folder.id);\r\n  }, [node.folder.id, onSelect]);\r\n\r\n  return (\r\n    <div>\r\n      <div\r\n        className={`group flex items-center gap-1 py-1.5 px-2 rounded-md cursor-pointer transition-colors ${\r\n          isSelected\r\n            ? 'bg-blue-100 text-blue-700'\r\n            : 'hover:bg-gray-100 text-gray-700'\r\n        }`}\r\n        style={{ paddingLeft: `${level * 12 + 8}px` }}\r\n        onClick={handleSelect}\r\n        role=\"treeitem\"\r\n        aria-selected={isSelected}\r\n        aria-expanded={hasChildren ? isExpanded : undefined}\r\n      >\r\n        {/* Expand/Collapse button */}\r\n        <button\r\n          onClick={handleToggle}\r\n          className={`flex-shrink-0 w-4 h-4 flex items-center justify-center rounded hover:bg-gray-200 ${\r\n            !hasChildren ? 'invisible' : ''\r\n          }`}\r\n          aria-label={isExpanded ? 'Collapse' : 'Expand'}\r\n          tabIndex={-1}\r\n        >\r\n          <svg\r\n            className={`w-3 h-3 text-gray-500 transition-transform ${isExpanded ? 'rotate-90' : ''}`}\r\n            fill=\"none\"\r\n            stroke=\"currentColor\"\r\n            viewBox=\"0 0 24 24\"\r\n          >\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\r\n          </svg>\r\n        </button>\r\n\r\n        {/* Folder icon */}\r\n        <svg\r\n          className={`w-4 h-4 flex-shrink-0 ${isSelected ? 'text-blue-600' : 'text-yellow-500'}`}\r\n          fill=\"currentColor\"\r\n          viewBox=\"0 0 20 20\"\r\n        >\r\n          {isExpanded && hasChildren ? (\r\n            <path fillRule=\"evenodd\" d=\"M2 6a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1H8a3 3 0 00-3 3v1.5a1.5 1.5 0 01-3 0V6z\" clipRule=\"evenodd\" />\r\n          ) : (\r\n            <path d=\"M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z\" />\r\n          )}\r\n        </svg>\r\n\r\n        {/* Folder name */}\r\n        <span className=\"truncate text-sm flex-1\">{node.folder.name}</span>\r\n      </div>\r\n\r\n      {/* Children */}\r\n      {isExpanded && hasChildren && (\r\n        <div role=\"group\">\r\n          {node.children.map(child => (\r\n            <TreeItem\r\n              key={child.folder.id}\r\n              node={child}\r\n              level={level + 1}\r\n              currentFolderId={currentFolderId}\r\n              expandedFolders={expandedFolders}\r\n              onToggleExpand={onToggleExpand}\r\n              onSelect={onSelect}\r\n              allFolders={allFolders}\r\n            />\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n});\r\n\r\nexport const FolderTreeNav = memo(function FolderTreeNav({\r\n  folders,\r\n  currentFolderId,\r\n  onFolderSelect,\r\n  isCollapsed = false,\r\n  onToggleCollapse,\r\n}: FolderTreeNavProps) {\r\n  const [expandedFolders, setExpandedFolders] = useState<Set<string>>(new Set());\r\n  const treeNodes = buildFolderTree(folders);\r\n\r\n  // Auto-expand folders that are ancestors of the current folder\r\n  useEffect(() => {\r\n    if (currentFolderId) {\r\n      setExpandedFolders(prev => {\r\n        const newExpanded = new Set(prev);\r\n        folders.forEach(folder => {\r\n          if (isAncestorOf(folders, folder.id, currentFolderId)) {\r\n            newExpanded.add(folder.id);\r\n          }\r\n        });\r\n        // Also expand the current folder if it has children\r\n        const currentFolder = folders.find(f => f.id === currentFolderId);\r\n        if (currentFolder && folders.some(f => f.parent_id === currentFolderId)) {\r\n          newExpanded.add(currentFolderId);\r\n        }\r\n        return newExpanded;\r\n      });\r\n    }\r\n  }, [currentFolderId, folders]);\r\n\r\n  const handleToggleExpand = useCallback((folderId: string) => {\r\n    setExpandedFolders(prev => {\r\n      const next = new Set(prev);\r\n      if (next.has(folderId)) {\r\n        next.delete(folderId);\r\n      } else {\r\n        next.add(folderId);\r\n      }\r\n      return next;\r\n    });\r\n  }, []);\r\n\r\n  const handleSelectRoot = useCallback(() => {\r\n    onFolderSelect(null);\r\n  }, [onFolderSelect]);\r\n\r\n  const handleSelectFolder = useCallback((folderId: string) => {\r\n    onFolderSelect(folderId);\r\n  }, [onFolderSelect]);\r\n\r\n  if (isCollapsed) {\r\n    return (\r\n      <div className=\"w-10 flex-shrink-0 border-r border-gray-200 bg-gray-50\">\r\n        <button\r\n          onClick={onToggleCollapse}\r\n          className=\"w-full p-2 hover:bg-gray-100 flex items-center justify-center\"\r\n          aria-label=\"Expand folder navigation\"\r\n        >\r\n          <svg className=\"w-5 h-5 text-gray-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\r\n          </svg>\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"w-56 flex-shrink-0 border-r border-gray-200 bg-gray-50 flex flex-col\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between px-3 py-2 border-b border-gray-200\">\r\n        <span className=\"text-xs font-semibold text-gray-500 uppercase tracking-wide\">Folders</span>\r\n        {onToggleCollapse && (\r\n          <button\r\n            onClick={onToggleCollapse}\r\n            className=\"p-1 hover:bg-gray-200 rounded\"\r\n            aria-label=\"Collapse folder navigation\"\r\n          >\r\n            <svg className=\"w-4 h-4 text-gray-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\r\n            </svg>\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {/* Tree */}\r\n      <div className=\"flex-1 overflow-y-auto py-2\" role=\"tree\" aria-label=\"Folder navigation\">\r\n        {/* Root / My Files */}\r\n        <div\r\n          className={`flex items-center gap-2 py-1.5 px-3 rounded-md cursor-pointer transition-colors mx-1 ${\r\n            currentFolderId === null\r\n              ? 'bg-blue-100 text-blue-700'\r\n              : 'hover:bg-gray-100 text-gray-700'\r\n          }`}\r\n          onClick={handleSelectRoot}\r\n          role=\"treeitem\"\r\n          aria-selected={currentFolderId === null}\r\n        >\r\n          <svg className={`w-4 h-4 ${currentFolderId === null ? 'text-blue-600' : 'text-gray-500'}`} fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\" />\r\n          </svg>\r\n          <span className=\"text-sm font-medium\">My Files</span>\r\n        </div>\r\n\r\n        {/* Folder tree */}\r\n        <div className=\"mt-1 mx-1\">\r\n          {treeNodes.map(node => (\r\n            <TreeItem\r\n              key={node.folder.id}\r\n              node={node}\r\n              level={0}\r\n              currentFolderId={currentFolderId}\r\n              expandedFolders={expandedFolders}\r\n              onToggleExpand={handleToggleExpand}\r\n              onSelect={handleSelectFolder}\r\n              allFolders={folders}\r\n            />\r\n          ))}\r\n        </div>\r\n\r\n        {/* Empty state */}\r\n        {treeNodes.length === 0 && (\r\n          <div className=\"px-3 py-4 text-center text-xs text-gray-500\">\r\n            No folders yet\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n"],"names":[],"mappings":"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"}