{"version":3,"sources":["../../../../src/app/dashboard/quizzes/page.tsx","../../../../src/components/quiz/QuizConfigForm.tsx","../../../../src/components/quiz/mockQuizGenerator.ts","../../../../src/components/quiz/QuizTaker.tsx","../../../../src/components/quiz/QuizResults.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState, useCallback } from \"react\";\r\nimport { ProtectedRoute } from \"@/lib/firebase/ProtectedRoute\";\r\nimport { useAuth } from \"@/lib/firebase/AuthContext\";\r\nimport { DashboardLayout } from \"@/components/dashboard\";\r\nimport { DocumentSelectionTree } from \"@/components/flashcards\";\r\nimport { \r\n  QuizConfigForm, \r\n  QuizConfig, \r\n  QuizTaker, \r\n  QuizResults,\r\n  GeneratedQuiz, \r\n  QuizResult,\r\n  generateMockQuizAsync \r\n} from \"@/components/quiz\";\r\nimport { useFolders } from \"@/lib/hooks/useFolders\";\r\nimport { useDocuments } from \"@/lib/hooks/useDocuments\";\r\n\r\ntype GeneratorState = 'selection' | 'generating' | 'taking' | 'results';\r\n\r\nfunction QuizGeneratorContent() {\r\n  const { user } = useAuth();\r\n  const { folders, fetchFolders, loading: foldersLoading } = useFolders();\r\n  const { documents, fetchDocuments, loading: documentsLoading } = useDocuments();\r\n  const [selectedDocumentIds, setSelectedDocumentIds] = useState<Set<string>>(new Set());\r\n  const [generatorState, setGeneratorState] = useState<GeneratorState>('selection');\r\n  const [currentConfig, setCurrentConfig] = useState<QuizConfig | null>(null);\r\n  const [currentQuiz, setCurrentQuiz] = useState<GeneratedQuiz | null>(null);\r\n  const [quizResult, setQuizResult] = useState<QuizResult | null>(null);\r\n  const [generationProgress, setGenerationProgress] = useState(0);\r\n\r\n  // Fetch folders and documents on mount\r\n  useEffect(() => {\r\n    if (user?.uid) {\r\n      fetchFolders();\r\n      fetchDocuments();\r\n    }\r\n  }, [user?.uid, fetchFolders, fetchDocuments]);\r\n\r\n  const handleSelectionChange = useCallback((newSelection: Set<string>) => {\r\n    setSelectedDocumentIds(newSelection);\r\n  }, []);\r\n\r\n  const handleGenerate = useCallback(async (config: QuizConfig) => {\r\n    setCurrentConfig(config);\r\n    setGeneratorState('generating');\r\n    setGenerationProgress(0);\r\n    \r\n    try {\r\n      const quiz = await generateMockQuizAsync(\r\n        config,\r\n        Array.from(selectedDocumentIds),\r\n        (progress) => setGenerationProgress(progress)\r\n      );\r\n      setCurrentQuiz(quiz);\r\n      setGeneratorState('taking');\r\n    } catch (error) {\r\n      console.error('Quiz generation failed:', error);\r\n      setGeneratorState('selection');\r\n      setCurrentConfig(null);\r\n    }\r\n  }, [selectedDocumentIds]);\r\n\r\n  const handleQuizComplete = useCallback((result: QuizResult) => {\r\n    setQuizResult(result);\r\n    setGeneratorState('results');\r\n  }, []);\r\n\r\n  const handleBackToSelection = useCallback(() => {\r\n    setGeneratorState('selection');\r\n    setCurrentConfig(null);\r\n    setCurrentQuiz(null);\r\n    setQuizResult(null);\r\n  }, []);\r\n\r\n  const isLoading = foldersLoading || documentsLoading;\r\n  const selectedCount = selectedDocumentIds.size;\r\n  const isGenerating = generatorState === 'generating';\r\n\r\n  const handleRetakeQuiz = useCallback(() => {\r\n    // Reset to taking state with the same quiz\r\n    if (currentQuiz) {\r\n      setQuizResult(null);\r\n      setGeneratorState('taking');\r\n    }\r\n  }, [currentQuiz]);\r\n\r\n  const handleSaveResults = useCallback(() => {\r\n    // In a real app this would save to database\r\n    // Could show a toast notification here\r\n  }, []);\r\n\r\n  const handleShareResults = useCallback(() => {\r\n    // Share is handled inside QuizResults component\r\n  }, []);\r\n\r\n  // Render results state\r\n  if (generatorState === 'results' && quizResult && currentQuiz) {\r\n    return (\r\n      <DashboardLayout>\r\n        <div className=\"mx-auto max-w-4xl\">\r\n          <QuizResults\r\n            quiz={currentQuiz}\r\n            result={quizResult}\r\n            onRetake={handleRetakeQuiz}\r\n            onSaveResults={handleSaveResults}\r\n            onShare={handleShareResults}\r\n            onBack={handleBackToSelection}\r\n          />\r\n        </div>\r\n      </DashboardLayout>\r\n    );\r\n  }\r\n\r\n  // Render quiz taking state\r\n  if (generatorState === 'taking' && currentQuiz) {\r\n    return (\r\n      <DashboardLayout>\r\n        <div className=\"mx-auto max-w-6xl\">\r\n          <QuizTaker\r\n            quiz={currentQuiz}\r\n            onComplete={handleQuizComplete}\r\n            onBack={handleBackToSelection}\r\n          />\r\n        </div>\r\n      </DashboardLayout>\r\n    );\r\n  }\r\n\r\n  // Render loading state during generation\r\n  if (generatorState === 'generating' && currentConfig) {\r\n    return (\r\n      <DashboardLayout>\r\n        <div className=\"mx-auto max-w-4xl space-y-6\">\r\n          {/* Page Header */}\r\n          <div>\r\n            <h1 className=\"text-2xl font-bold text-gray-900\">Generating Quiz</h1>\r\n            <p className=\"mt-1 text-sm text-gray-600\">\r\n              Please wait while we analyze your documents and create quiz questions.\r\n            </p>\r\n          </div>\r\n\r\n          {/* Loading State */}\r\n          <div className=\"rounded-lg border border-gray-200 bg-white p-6 shadow-sm\">\r\n            <div className=\"flex flex-col items-center justify-center py-12\">\r\n              <div className=\"relative\">\r\n                <svg\r\n                  className=\"h-16 w-16 animate-spin text-blue-600\"\r\n                  fill=\"none\"\r\n                  viewBox=\"0 0 24 24\"\r\n                >\r\n                  <circle\r\n                    className=\"opacity-25\"\r\n                    cx=\"12\"\r\n                    cy=\"12\"\r\n                    r=\"10\"\r\n                    stroke=\"currentColor\"\r\n                    strokeWidth=\"4\"\r\n                  />\r\n                  <path\r\n                    className=\"opacity-75\"\r\n                    fill=\"currentColor\"\r\n                    d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\r\n                  />\r\n                </svg>\r\n              </div>\r\n              <p className=\"mt-4 text-lg font-medium text-gray-900\">\r\n                Generating {currentConfig.questionCount} questions...\r\n              </p>\r\n              <p className=\"mt-2 text-sm text-gray-500\">\r\n                Analyzing {selectedCount} document{selectedCount !== 1 ? 's' : ''}\r\n              </p>\r\n              \r\n              {/* Progress bar */}\r\n              <div className=\"mt-4 w-full max-w-xs\">\r\n                <div className=\"h-2 w-full rounded-full bg-gray-200\">\r\n                  <div\r\n                    className=\"h-2 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-300\"\r\n                    style={{ width: `${generationProgress}%` }}\r\n                  />\r\n                </div>\r\n                <p className=\"mt-1 text-center text-xs text-gray-500\">\r\n                  {Math.round(generationProgress)}% complete\r\n                </p>\r\n              </div>\r\n              \r\n              <div className=\"mt-4 flex flex-wrap justify-center gap-2\">\r\n                {currentConfig.questionTypes.map((type) => (\r\n                  <span\r\n                    key={type}\r\n                    className=\"rounded-full bg-blue-100 px-3 py-1 text-xs font-medium text-blue-700\"\r\n                  >\r\n                    {type === 'multiple-choice' && 'Multiple Choice'}\r\n                    {type === 'true-false' && 'True/False'}\r\n                    {type === 'short-answer' && 'Short Answer'}\r\n                  </span>\r\n                ))}\r\n              </div>\r\n              {currentConfig.timeLimit && (\r\n                <p className=\"mt-3 text-sm text-gray-500\">\r\n                  Time limit: {currentConfig.timeLimit} minutes\r\n                </p>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </DashboardLayout>\r\n    );\r\n  }\r\n\r\n  // Default: Selection state\r\n  return (\r\n    <DashboardLayout>\r\n      <div className=\"mx-auto max-w-4xl space-y-6\">\r\n        {/* Page Header */}\r\n        <div>\r\n          <h1 className=\"text-2xl font-bold text-gray-900\">Generate Quiz</h1>\r\n          <p className=\"mt-1 text-sm text-gray-600\">\r\n            Select documents to generate AI-powered quizzes to test your knowledge.\r\n          </p>\r\n        </div>\r\n\r\n        {/* Source Selection Section */}\r\n        <div className=\"rounded-lg border border-gray-200 bg-white p-6 shadow-sm\">\r\n          <div className=\"mb-4\">\r\n            <h2 className=\"text-lg font-semibold text-gray-900\">Select Source Documents</h2>\r\n            <p className=\"mt-1 text-sm text-gray-500\">\r\n              Choose the PDF documents you want to generate quiz questions from.\r\n            </p>\r\n          </div>\r\n\r\n          {isLoading ? (\r\n            <div className=\"flex items-center justify-center py-12\">\r\n              <div className=\"flex flex-col items-center gap-3\">\r\n                <svg\r\n                  className=\"h-8 w-8 animate-spin text-blue-600\"\r\n                  fill=\"none\"\r\n                  viewBox=\"0 0 24 24\"\r\n                >\r\n                  <circle\r\n                    className=\"opacity-25\"\r\n                    cx=\"12\"\r\n                    cy=\"12\"\r\n                    r=\"10\"\r\n                    stroke=\"currentColor\"\r\n                    strokeWidth=\"4\"\r\n                  />\r\n                  <path\r\n                    className=\"opacity-75\"\r\n                    fill=\"currentColor\"\r\n                    d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\r\n                  />\r\n                </svg>\r\n                <span className=\"text-sm text-gray-500\">Loading documents...</span>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <DocumentSelectionTree\r\n              folders={folders}\r\n              documents={documents}\r\n              selectedDocumentIds={selectedDocumentIds}\r\n              onSelectionChange={handleSelectionChange}\r\n            />\r\n          )}\r\n        </div>\r\n\r\n        {/* Selection Summary */}\r\n        {selectedCount > 0 && (\r\n          <div className=\"rounded-lg border border-blue-200 bg-blue-50 p-4\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"flex h-10 w-10 items-center justify-center rounded-full bg-blue-100\">\r\n                <svg\r\n                  className=\"h-5 w-5 text-blue-600\"\r\n                  fill=\"none\"\r\n                  stroke=\"currentColor\"\r\n                  viewBox=\"0 0 24 24\"\r\n                >\r\n                  <path\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                    strokeWidth={2}\r\n                    d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"\r\n                  />\r\n                </svg>\r\n              </div>\r\n              <div>\r\n                <p className=\"font-medium text-blue-900\">\r\n                  {selectedCount} document{selectedCount !== 1 ? 's' : ''} selected\r\n                </p>\r\n                <p className=\"text-sm text-blue-700\">\r\n                  Ready to configure quiz generation options.\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Configuration Section */}\r\n        <div className=\"rounded-lg border border-gray-200 bg-white p-6 shadow-sm\">\r\n          <div className=\"mb-4\">\r\n            <h2 className=\"text-lg font-semibold text-gray-900\">Configuration Options</h2>\r\n            <p className=\"mt-1 text-sm text-gray-500\">\r\n              Customize your quiz generation settings.\r\n            </p>\r\n          </div>\r\n          <QuizConfigForm\r\n            selectedDocumentCount={selectedCount}\r\n            onGenerate={handleGenerate}\r\n            isGenerating={isGenerating}\r\n          />\r\n        </div>\r\n      </div>\r\n    </DashboardLayout>\r\n  );\r\n}\r\n\r\nexport default function QuizGeneratorPage() {\r\n  return (\r\n    <ProtectedRoute redirectTo=\"/\">\r\n      <QuizGeneratorContent />\r\n    </ProtectedRoute>\r\n  );\r\n}\r\n","\"use client\";\r\n\r\nimport { useState } from 'react';\r\n\r\nexport type DifficultyLevel = 'easy' | 'medium' | 'hard';\r\nexport type QuestionType = 'multiple-choice' | 'true-false' | 'short-answer';\r\n\r\nexport interface QuizConfig {\r\n  questionCount: number;\r\n  questionTypes: QuestionType[];\r\n  difficulty: DifficultyLevel;\r\n  timeLimit: number | null; // null means no time limit\r\n}\r\n\r\nexport interface QuizConfigFormProps {\r\n  selectedDocumentCount: number;\r\n  onGenerate: (config: QuizConfig) => void;\r\n  isGenerating?: boolean;\r\n}\r\n\r\nexport function QuizConfigForm({\r\n  selectedDocumentCount,\r\n  onGenerate,\r\n  isGenerating = false,\r\n}: QuizConfigFormProps) {\r\n  const [questionCount, setQuestionCount] = useState(10);\r\n  const [questionTypes, setQuestionTypes] = useState<QuestionType[]>(['multiple-choice']);\r\n  const [difficulty, setDifficulty] = useState<DifficultyLevel>('medium');\r\n  const [timeLimitEnabled, setTimeLimitEnabled] = useState(false);\r\n  const [timeLimit, setTimeLimit] = useState(15);\r\n\r\n  const canGenerate = selectedDocumentCount > 0 && questionTypes.length > 0 && !isGenerating;\r\n\r\n  const handleQuestionTypeToggle = (type: QuestionType) => {\r\n    setQuestionTypes(prev => {\r\n      if (prev.includes(type)) {\r\n        // Don't allow removing the last type\r\n        if (prev.length === 1) return prev;\r\n        return prev.filter(t => t !== type);\r\n      }\r\n      return [...prev, type];\r\n    });\r\n  };\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (canGenerate) {\r\n      onGenerate({\r\n        questionCount,\r\n        questionTypes,\r\n        difficulty,\r\n        timeLimit: timeLimitEnabled ? timeLimit : null,\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n      {/* Question Quantity Slider */}\r\n      <div>\r\n        <label htmlFor=\"questionCount\" className=\"block text-sm font-medium text-gray-700\">\r\n          Number of Questions\r\n        </label>\r\n        <div className=\"mt-2\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <input\r\n              type=\"range\"\r\n              id=\"questionCount\"\r\n              min={5}\r\n              max={30}\r\n              step={1}\r\n              value={questionCount}\r\n              onChange={(e) => setQuestionCount(Number(e.target.value))}\r\n              className=\"h-2 w-full cursor-pointer appearance-none rounded-lg bg-gray-200 accent-blue-600\"\r\n              disabled={isGenerating}\r\n            />\r\n            <span className=\"w-12 text-center text-sm font-semibold text-gray-900\">\r\n              {questionCount}\r\n            </span>\r\n          </div>\r\n          <div className=\"mt-1 flex justify-between text-xs text-gray-500\">\r\n            <span>5</span>\r\n            <span>30</span>\r\n          </div>\r\n        </div>\r\n        <p className=\"mt-1 text-xs text-gray-500\">\r\n          Choose how many questions to generate (5-30)\r\n        </p>\r\n      </div>\r\n\r\n      {/* Question Types Checkboxes */}\r\n      <div>\r\n        <label className=\"block text-sm font-medium text-gray-700\">\r\n          Question Types\r\n        </label>\r\n        <p className=\"mt-1 text-xs text-gray-500\">\r\n          Select at least one question type\r\n        </p>\r\n        <div className=\"mt-3 space-y-3\">\r\n          {/* Multiple Choice */}\r\n          <label className=\"flex cursor-pointer items-center gap-3\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={questionTypes.includes('multiple-choice')}\r\n              onChange={() => handleQuestionTypeToggle('multiple-choice')}\r\n              disabled={isGenerating}\r\n              className=\"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\r\n            />\r\n            <div className=\"flex items-center gap-2\">\r\n              <svg className=\"h-5 w-5 text-blue-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4\" />\r\n              </svg>\r\n              <span className=\"text-sm text-gray-700\">Multiple Choice</span>\r\n            </div>\r\n          </label>\r\n\r\n          {/* True/False */}\r\n          <label className=\"flex cursor-pointer items-center gap-3\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={questionTypes.includes('true-false')}\r\n              onChange={() => handleQuestionTypeToggle('true-false')}\r\n              disabled={isGenerating}\r\n              className=\"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\r\n            />\r\n            <div className=\"flex items-center gap-2\">\r\n              <svg className=\"h-5 w-5 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n              </svg>\r\n              <span className=\"text-sm text-gray-700\">True / False</span>\r\n            </div>\r\n          </label>\r\n\r\n          {/* Short Answer */}\r\n          <label className=\"flex cursor-pointer items-center gap-3\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={questionTypes.includes('short-answer')}\r\n              onChange={() => handleQuestionTypeToggle('short-answer')}\r\n              disabled={isGenerating}\r\n              className=\"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\r\n            />\r\n            <div className=\"flex items-center gap-2\">\r\n              <svg className=\"h-5 w-5 text-purple-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\" />\r\n              </svg>\r\n              <span className=\"text-sm text-gray-700\">Short Answer</span>\r\n            </div>\r\n          </label>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Difficulty Level Selector */}\r\n      <div>\r\n        <label className=\"block text-sm font-medium text-gray-700\">\r\n          Difficulty Level\r\n        </label>\r\n        <div className=\"mt-2 flex gap-3\">\r\n          {(['easy', 'medium', 'hard'] as const).map((level) => (\r\n            <button\r\n              key={level}\r\n              type=\"button\"\r\n              onClick={() => setDifficulty(level)}\r\n              disabled={isGenerating}\r\n              className={`flex-1 rounded-lg border-2 px-4 py-3 text-sm font-medium transition-all ${\r\n                difficulty === level\r\n                  ? level === 'easy'\r\n                    ? 'border-green-500 bg-green-50 text-green-700'\r\n                    : level === 'medium'\r\n                    ? 'border-yellow-500 bg-yellow-50 text-yellow-700'\r\n                    : 'border-red-500 bg-red-50 text-red-700'\r\n                  : 'border-gray-200 bg-white text-gray-600 hover:border-gray-300 hover:bg-gray-50'\r\n              } ${isGenerating ? 'cursor-not-allowed opacity-50' : ''}`}\r\n            >\r\n              <div className=\"flex flex-col items-center gap-1\">\r\n                {level === 'easy' && (\r\n                  <svg className=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                  </svg>\r\n                )}\r\n                {level === 'medium' && (\r\n                  <svg className=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\" />\r\n                  </svg>\r\n                )}\r\n                {level === 'hard' && (\r\n                  <svg className=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z\" />\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9.879 16.121A3 3 0 1012.015 11L11 14H9c0 .768.293 1.536.879 2.121z\" />\r\n                  </svg>\r\n                )}\r\n                <span className=\"capitalize\">{level}</span>\r\n              </div>\r\n            </button>\r\n          ))}\r\n        </div>\r\n        <p className=\"mt-2 text-xs text-gray-500\">\r\n          {difficulty === 'easy' && 'Basic recall questions focusing on key terms and definitions'}\r\n          {difficulty === 'medium' && 'Balanced mix of recall and comprehension questions'}\r\n          {difficulty === 'hard' && 'Advanced questions requiring analysis and application'}\r\n        </p>\r\n      </div>\r\n\r\n      {/* Time Limit Toggle and Slider */}\r\n      <div>\r\n        <div className=\"flex items-center justify-between\">\r\n          <label className=\"block text-sm font-medium text-gray-700\">\r\n            Time Limit\r\n          </label>\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => setTimeLimitEnabled(!timeLimitEnabled)}\r\n            disabled={isGenerating}\r\n            className={`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${\r\n              timeLimitEnabled ? 'bg-blue-600' : 'bg-gray-200'\r\n            } ${isGenerating ? 'cursor-not-allowed opacity-50' : ''}`}\r\n            role=\"switch\"\r\n            aria-checked={timeLimitEnabled}\r\n          >\r\n            <span\r\n              className={`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${\r\n                timeLimitEnabled ? 'translate-x-5' : 'translate-x-0'\r\n              }`}\r\n            />\r\n          </button>\r\n        </div>\r\n        \r\n        {timeLimitEnabled && (\r\n          <div className=\"mt-3\">\r\n            <div className=\"flex items-center gap-4\">\r\n              <input\r\n                type=\"range\"\r\n                id=\"timeLimit\"\r\n                min={5}\r\n                max={60}\r\n                step={5}\r\n                value={timeLimit}\r\n                onChange={(e) => setTimeLimit(Number(e.target.value))}\r\n                className=\"h-2 w-full cursor-pointer appearance-none rounded-lg bg-gray-200 accent-blue-600\"\r\n                disabled={isGenerating}\r\n              />\r\n              <span className=\"w-20 text-center text-sm font-semibold text-gray-900\">\r\n                {timeLimit} min\r\n              </span>\r\n            </div>\r\n            <div className=\"mt-1 flex justify-between text-xs text-gray-500\">\r\n              <span>5 min</span>\r\n              <span>60 min</span>\r\n            </div>\r\n          </div>\r\n        )}\r\n        <p className=\"mt-1 text-xs text-gray-500\">\r\n          {timeLimitEnabled \r\n            ? `Quiz will have a ${timeLimit} minute time limit`\r\n            : 'No time limit - take as long as you need'}\r\n        </p>\r\n      </div>\r\n\r\n      {/* Generate Button */}\r\n      <div className=\"pt-2\">\r\n        <button\r\n          type=\"submit\"\r\n          disabled={!canGenerate}\r\n          className={`flex w-full items-center justify-center gap-2 rounded-lg px-6 py-3 text-sm font-semibold transition-all ${\r\n            canGenerate\r\n              ? 'bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-md hover:from-blue-700 hover:to-purple-700 hover:shadow-lg'\r\n              : 'cursor-not-allowed bg-gray-200 text-gray-400'\r\n          }`}\r\n        >\r\n          {isGenerating ? (\r\n            <>\r\n              <svg className=\"h-5 w-5 animate-spin\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\r\n                <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\" />\r\n              </svg>\r\n              <span>Generating...</span>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <svg className=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01\" />\r\n              </svg>\r\n              <span>Generate Quiz</span>\r\n            </>\r\n          )}\r\n        </button>\r\n        {selectedDocumentCount === 0 && (\r\n          <p className=\"mt-2 text-center text-xs text-amber-600\">\r\n            Please select at least one document to generate a quiz\r\n          </p>\r\n        )}\r\n        {selectedDocumentCount > 0 && questionTypes.length === 0 && (\r\n          <p className=\"mt-2 text-center text-xs text-amber-600\">\r\n            Please select at least one question type\r\n          </p>\r\n        )}\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\n","import { QuizConfig, DifficultyLevel, QuestionType } from './QuizConfigForm';\r\n\r\nexport interface QuizQuestion {\r\n  id: string;\r\n  type: QuestionType;\r\n  question: string;\r\n  options?: string[];\r\n  correctAnswer: string;\r\n  explanation: string;\r\n  difficulty: DifficultyLevel;\r\n}\r\n\r\nexport interface GeneratedQuiz {\r\n  id: string;\r\n  name: string;\r\n  questions: QuizQuestion[];\r\n  sourceDocumentIds: string[];\r\n  config: QuizConfig;\r\n  timeLimit: number | null;\r\n  createdAt: Date;\r\n}\r\n\r\nexport interface QuizAnswer {\r\n  questionId: string;\r\n  answer: string;\r\n  isCorrect?: boolean;\r\n}\r\n\r\nexport interface QuizResult {\r\n  quizId: string;\r\n  answers: QuizAnswer[];\r\n  score: number;\r\n  totalQuestions: number;\r\n  timeTaken: number; // in seconds\r\n  completedAt: Date;\r\n}\r\n\r\n// Mock questions by type and difficulty\r\nconst MOCK_MULTIPLE_CHOICE: Record<DifficultyLevel, Array<{ question: string; options: string[]; correctAnswer: string; explanation: string }>> = {\r\n  easy: [\r\n    { question: \"What is the primary function of a CPU?\", options: [\"Store data permanently\", \"Process instructions and perform calculations\", \"Display graphics\", \"Connect to the internet\"], correctAnswer: \"Process instructions and perform calculations\", explanation: \"The CPU (Central Processing Unit) is the brain of the computer, responsible for executing instructions and performing calculations.\" },\r\n    { question: \"Which of the following is a programming language?\", options: [\"HTML\", \"CSS\", \"Python\", \"HTTP\"], correctAnswer: \"Python\", explanation: \"Python is a high-level programming language. HTML and CSS are markup/styling languages, and HTTP is a protocol.\" },\r\n    { question: \"What does RAM stand for?\", options: [\"Random Access Memory\", \"Read Access Memory\", \"Rapid Access Module\", \"Remote Access Memory\"], correctAnswer: \"Random Access Memory\", explanation: \"RAM stands for Random Access Memory, which is volatile memory used for temporary data storage during program execution.\" },\r\n    { question: \"Which company developed the Windows operating system?\", options: [\"Apple\", \"Google\", \"Microsoft\", \"IBM\"], correctAnswer: \"Microsoft\", explanation: \"Microsoft developed and maintains the Windows operating system, first released in 1985.\" },\r\n    { question: \"What is the file extension for a Python script?\", options: [\".java\", \".py\", \".js\", \".cpp\"], correctAnswer: \".py\", explanation: \"Python scripts use the .py file extension.\" },\r\n  ],\r\n  medium: [\r\n    { question: \"What is the time complexity of binary search?\", options: [\"O(n)\", \"O(log n)\", \"O(nÂ²)\", \"O(1)\"], correctAnswer: \"O(log n)\", explanation: \"Binary search has O(log n) time complexity because it halves the search space with each comparison.\" },\r\n    { question: \"Which data structure uses LIFO (Last In, First Out)?\", options: [\"Queue\", \"Stack\", \"Array\", \"Linked List\"], correctAnswer: \"Stack\", explanation: \"A stack follows LIFO principle where the last element added is the first one to be removed.\" },\r\n    { question: \"What is the purpose of an index in a database?\", options: [\"Store backup data\", \"Speed up data retrieval\", \"Encrypt sensitive data\", \"Compress table size\"], correctAnswer: \"Speed up data retrieval\", explanation: \"Database indexes improve query performance by providing quick access paths to data, similar to a book index.\" },\r\n    { question: \"Which HTTP method is typically used to update a resource?\", options: [\"GET\", \"POST\", \"PUT\", \"DELETE\"], correctAnswer: \"PUT\", explanation: \"PUT is used to update or replace an existing resource. POST creates new resources, GET retrieves, and DELETE removes.\" },\r\n    { question: \"What is polymorphism in OOP?\", options: [\"Hiding implementation details\", \"Objects taking multiple forms\", \"Inheriting from parent class\", \"Grouping related data\"], correctAnswer: \"Objects taking multiple forms\", explanation: \"Polymorphism allows objects of different classes to be treated as objects of a common parent class, enabling different behaviors.\" },\r\n  ],\r\n  hard: [\r\n    { question: \"Which algorithm is NOT suitable for finding the shortest path in a weighted graph with negative edges?\", options: [\"Bellman-Ford\", \"Dijkstra's\", \"Floyd-Warshall\", \"SPFA\"], correctAnswer: \"Dijkstra's\", explanation: \"Dijkstra's algorithm doesn't work correctly with negative edge weights because it assumes the shortest path to a node is finalized once visited.\" },\r\n    { question: \"What is the space complexity of merge sort?\", options: [\"O(1)\", \"O(log n)\", \"O(n)\", \"O(n log n)\"], correctAnswer: \"O(n)\", explanation: \"Merge sort requires O(n) auxiliary space for the temporary arrays used during merging.\" },\r\n    { question: \"In distributed systems, what does the 'P' in CAP theorem stand for?\", options: [\"Performance\", \"Partition tolerance\", \"Persistence\", \"Parallelism\"], correctAnswer: \"Partition tolerance\", explanation: \"CAP theorem states that distributed systems can only guarantee two of: Consistency, Availability, and Partition tolerance.\" },\r\n    { question: \"Which design pattern ensures a class has only one instance?\", options: [\"Factory\", \"Observer\", \"Singleton\", \"Strategy\"], correctAnswer: \"Singleton\", explanation: \"The Singleton pattern restricts instantiation of a class to a single instance and provides global access to it.\" },\r\n    { question: \"What is the purpose of a bloom filter?\", options: [\"Sort data efficiently\", \"Test set membership probabilistically\", \"Compress data\", \"Balance binary trees\"], correctAnswer: \"Test set membership probabilistically\", explanation: \"Bloom filters are space-efficient probabilistic data structures for testing whether an element is in a set, with possible false positives but no false negatives.\" },\r\n  ],\r\n};\r\n\r\n\r\nconst MOCK_TRUE_FALSE: Record<DifficultyLevel, Array<{ question: string; correctAnswer: string; explanation: string }>> = {\r\n  easy: [\r\n    { question: \"JavaScript and Java are the same programming language.\", correctAnswer: \"False\", explanation: \"Despite similar names, JavaScript and Java are completely different languages with different purposes and syntax.\" },\r\n    { question: \"HTML is a programming language.\", correctAnswer: \"False\", explanation: \"HTML (HyperText Markup Language) is a markup language used to structure content, not a programming language.\" },\r\n    { question: \"A byte consists of 8 bits.\", correctAnswer: \"True\", explanation: \"A byte is a unit of digital information that consists of 8 bits.\" },\r\n    { question: \"Python uses indentation to define code blocks.\", correctAnswer: \"True\", explanation: \"Python uses whitespace indentation to delimit code blocks, unlike languages that use braces.\" },\r\n    { question: \"The internet and the World Wide Web are the same thing.\", correctAnswer: \"False\", explanation: \"The internet is the global network infrastructure, while the World Wide Web is a service that runs on the internet.\" },\r\n  ],\r\n  medium: [\r\n    { question: \"In a binary search tree, the left child is always greater than the parent.\", correctAnswer: \"False\", explanation: \"In a BST, the left child is always less than the parent, and the right child is always greater.\" },\r\n    { question: \"TCP guarantees delivery of packets in order.\", correctAnswer: \"True\", explanation: \"TCP (Transmission Control Protocol) provides reliable, ordered delivery of data packets.\" },\r\n    { question: \"A hash table has O(1) average time complexity for lookups.\", correctAnswer: \"True\", explanation: \"Hash tables provide constant-time average case for insertions, deletions, and lookups.\" },\r\n    { question: \"REST APIs must use JSON for data exchange.\", correctAnswer: \"False\", explanation: \"REST APIs can use various formats including JSON, XML, HTML, or plain text. JSON is common but not required.\" },\r\n    { question: \"Recursion always uses more memory than iteration.\", correctAnswer: \"False\", explanation: \"While recursion typically uses stack space, tail-call optimization can make it as efficient as iteration in some languages.\" },\r\n  ],\r\n  hard: [\r\n    { question: \"In eventual consistency, all reads will immediately return the most recent write.\", correctAnswer: \"False\", explanation: \"Eventual consistency only guarantees that all replicas will eventually converge to the same value, not immediate consistency.\" },\r\n    { question: \"A red-black tree guarantees O(log n) time for insertions.\", correctAnswer: \"True\", explanation: \"Red-black trees are self-balancing BSTs that maintain O(log n) height, ensuring O(log n) operations.\" },\r\n    { question: \"Deadlock can occur with only one resource type.\", correctAnswer: \"False\", explanation: \"Deadlock requires circular wait, which needs at least two different resource types for processes to wait on each other.\" },\r\n    { question: \"The halting problem is decidable for all programs.\", correctAnswer: \"False\", explanation: \"The halting problem is undecidable - there's no general algorithm to determine if any program will halt.\" },\r\n    { question: \"Microservices architecture always improves system performance.\", correctAnswer: \"False\", explanation: \"Microservices add network overhead and complexity. They improve scalability and maintainability but may reduce performance.\" },\r\n  ],\r\n};\r\n\r\nconst MOCK_SHORT_ANSWER: Record<DifficultyLevel, Array<{ question: string; correctAnswer: string; explanation: string }>> = {\r\n  easy: [\r\n    { question: \"What does HTTP stand for?\", correctAnswer: \"HyperText Transfer Protocol\", explanation: \"HTTP is the foundation of data communication on the World Wide Web.\" },\r\n    { question: \"Name the operator used for equality comparison in most programming languages.\", correctAnswer: \"==\", explanation: \"The double equals (==) operator is commonly used for equality comparison.\" },\r\n    { question: \"What is the output of 2 + 2 * 3?\", correctAnswer: \"8\", explanation: \"Following order of operations (PEMDAS), multiplication is performed before addition: 2 + 6 = 8.\" },\r\n    { question: \"What command is used to install packages in npm?\", correctAnswer: \"npm install\", explanation: \"The 'npm install' command installs packages from the npm registry.\" },\r\n    { question: \"What symbol is used for single-line comments in Python?\", correctAnswer: \"#\", explanation: \"Python uses the hash symbol (#) for single-line comments.\" },\r\n  ],\r\n  medium: [\r\n    { question: \"What is the Big O notation for accessing an element in an array by index?\", correctAnswer: \"O(1)\", explanation: \"Array access by index is constant time because arrays store elements in contiguous memory locations.\" },\r\n    { question: \"Name the HTTP status code for 'Not Found'.\", correctAnswer: \"404\", explanation: \"HTTP 404 indicates that the server cannot find the requested resource.\" },\r\n    { question: \"What design pattern is used when you want to notify multiple objects about state changes?\", correctAnswer: \"Observer\", explanation: \"The Observer pattern defines a one-to-many dependency between objects for state change notifications.\" },\r\n    { question: \"What is the default port for HTTPS?\", correctAnswer: \"443\", explanation: \"HTTPS uses port 443 by default, while HTTP uses port 80.\" },\r\n    { question: \"In Git, what command creates a new branch?\", correctAnswer: \"git branch\", explanation: \"The 'git branch <name>' command creates a new branch. 'git checkout -b' creates and switches to it.\" },\r\n  ],\r\n  hard: [\r\n    { question: \"What is the amortized time complexity of dynamic array insertion?\", correctAnswer: \"O(1)\", explanation: \"While individual insertions may be O(n) when resizing, the amortized cost over many insertions is O(1).\" },\r\n    { question: \"Name the consensus algorithm used by Bitcoin.\", correctAnswer: \"Proof of Work\", explanation: \"Bitcoin uses Proof of Work (PoW) where miners solve computational puzzles to validate transactions.\" },\r\n    { question: \"What is the maximum number of children a node can have in a B-tree of order m?\", correctAnswer: \"m\", explanation: \"In a B-tree of order m, each node can have at most m children and m-1 keys.\" },\r\n    { question: \"What isolation level prevents phantom reads in SQL?\", correctAnswer: \"Serializable\", explanation: \"Serializable is the highest isolation level and prevents all concurrency anomalies including phantom reads.\" },\r\n    { question: \"Name the theorem that states it's impossible to have both safety and liveness in an asynchronous system.\", correctAnswer: \"FLP\", explanation: \"The FLP impossibility result shows consensus is impossible in asynchronous systems with even one faulty process.\" },\r\n  ],\r\n};\r\n\r\n\r\nfunction generateUniqueId(): string {\r\n  return `quiz_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\r\n}\r\n\r\nfunction shuffleArray<T>(array: T[]): T[] {\r\n  const shuffled = [...array];\r\n  for (let i = shuffled.length - 1; i > 0; i--) {\r\n    const j = Math.floor(Math.random() * (i + 1));\r\n    const temp = shuffled[i];\r\n    shuffled[i] = shuffled[j] as T;\r\n    shuffled[j] = temp as T;\r\n  }\r\n  return shuffled;\r\n}\r\n\r\nfunction getQuestionsForType(\r\n  type: QuestionType,\r\n  difficulty: DifficultyLevel,\r\n  count: number\r\n): QuizQuestion[] {\r\n  const questions: QuizQuestion[] = [];\r\n  \r\n  if (type === 'multiple-choice') {\r\n    const pool = MOCK_MULTIPLE_CHOICE[difficulty];\r\n    const shuffled = shuffleArray(pool);\r\n    for (let i = 0; i < Math.min(count, shuffled.length); i++) {\r\n      const q = shuffled[i];\r\n      if (q) {\r\n        questions.push({\r\n          id: generateUniqueId(),\r\n          type: 'multiple-choice',\r\n          question: q.question,\r\n          options: shuffleArray(q.options),\r\n          correctAnswer: q.correctAnswer,\r\n          explanation: q.explanation,\r\n          difficulty,\r\n        });\r\n      }\r\n    }\r\n  } else if (type === 'true-false') {\r\n    const pool = MOCK_TRUE_FALSE[difficulty];\r\n    const shuffled = shuffleArray(pool);\r\n    for (let i = 0; i < Math.min(count, shuffled.length); i++) {\r\n      const q = shuffled[i];\r\n      if (q) {\r\n        questions.push({\r\n          id: generateUniqueId(),\r\n          type: 'true-false',\r\n          question: q.question,\r\n          options: ['True', 'False'],\r\n          correctAnswer: q.correctAnswer,\r\n          explanation: q.explanation,\r\n          difficulty,\r\n        });\r\n      }\r\n    }\r\n  } else if (type === 'short-answer') {\r\n    const pool = MOCK_SHORT_ANSWER[difficulty];\r\n    const shuffled = shuffleArray(pool);\r\n    for (let i = 0; i < Math.min(count, shuffled.length); i++) {\r\n      const q = shuffled[i];\r\n      if (q) {\r\n        questions.push({\r\n          id: generateUniqueId(),\r\n          type: 'short-answer',\r\n          question: q.question,\r\n          correctAnswer: q.correctAnswer,\r\n          explanation: q.explanation,\r\n          difficulty,\r\n        });\r\n      }\r\n    }\r\n  }\r\n  \r\n  return questions;\r\n}\r\n\r\nexport function generateMockQuiz(\r\n  config: QuizConfig,\r\n  selectedDocumentIds: string[]\r\n): GeneratedQuiz {\r\n  const { questionCount, questionTypes, difficulty, timeLimit } = config;\r\n  \r\n  // Distribute questions evenly among selected types\r\n  const questionsPerType = Math.ceil(questionCount / questionTypes.length);\r\n  let allQuestions: QuizQuestion[] = [];\r\n  \r\n  for (const type of questionTypes) {\r\n    const typeQuestions = getQuestionsForType(type, difficulty, questionsPerType);\r\n    allQuestions = [...allQuestions, ...typeQuestions];\r\n  }\r\n  \r\n  // Shuffle and trim to exact count\r\n  allQuestions = shuffleArray(allQuestions).slice(0, questionCount);\r\n  \r\n  // If we don't have enough questions, duplicate some with variations\r\n  while (allQuestions.length < questionCount && allQuestions.length > 0) {\r\n    const baseQuestion = allQuestions[allQuestions.length % allQuestions.length];\r\n    if (baseQuestion) {\r\n      allQuestions.push({\r\n        ...baseQuestion,\r\n        id: generateUniqueId(),\r\n        question: `${baseQuestion.question} (Review)`,\r\n      });\r\n    }\r\n  }\r\n\r\n  return {\r\n    id: generateUniqueId(),\r\n    name: `Quiz - ${new Date().toLocaleDateString()}`,\r\n    questions: allQuestions,\r\n    sourceDocumentIds: selectedDocumentIds,\r\n    config,\r\n    timeLimit,\r\n    createdAt: new Date(),\r\n  };\r\n}\r\n\r\nexport function generateMockQuizAsync(\r\n  config: QuizConfig,\r\n  selectedDocumentIds: string[],\r\n  onProgress?: (progress: number) => void\r\n): Promise<GeneratedQuiz> {\r\n  return new Promise((resolve) => {\r\n    const baseTime = 2000;\r\n    const perDocTime = 300;\r\n    const perQuestionTime = 100;\r\n    const totalTime = baseTime + (selectedDocumentIds.length * perDocTime) + (config.questionCount * perQuestionTime);\r\n    \r\n    let elapsed = 0;\r\n    const interval = setInterval(() => {\r\n      elapsed += 200;\r\n      const progress = Math.min((elapsed / totalTime) * 100, 95);\r\n      onProgress?.(progress);\r\n    }, 200);\r\n\r\n    setTimeout(() => {\r\n      clearInterval(interval);\r\n      onProgress?.(100);\r\n      const quiz = generateMockQuiz(config, selectedDocumentIds);\r\n      resolve(quiz);\r\n    }, totalTime);\r\n  });\r\n}\r\n\r\nexport function checkAnswer(question: QuizQuestion, userAnswer: string): boolean {\r\n  if (question.type === 'short-answer') {\r\n    // For short answer, do case-insensitive comparison and trim whitespace\r\n    return userAnswer.trim().toLowerCase() === question.correctAnswer.trim().toLowerCase();\r\n  }\r\n  return userAnswer === question.correctAnswer;\r\n}\r\n\r\nexport function calculateQuizResult(\r\n  quiz: GeneratedQuiz,\r\n  answers: QuizAnswer[],\r\n  timeTaken: number\r\n): QuizResult {\r\n  const answersWithCorrectness = answers.map(answer => {\r\n    const question = quiz.questions.find(q => q.id === answer.questionId);\r\n    const isCorrect = question ? checkAnswer(question, answer.answer) : false;\r\n    return { ...answer, isCorrect };\r\n  });\r\n\r\n  const correctCount = answersWithCorrectness.filter(a => a.isCorrect).length;\r\n  const score = Math.round((correctCount / quiz.questions.length) * 100);\r\n\r\n  return {\r\n    quizId: quiz.id,\r\n    answers: answersWithCorrectness,\r\n    score,\r\n    totalQuestions: quiz.questions.length,\r\n    timeTaken,\r\n    completedAt: new Date(),\r\n  };\r\n}\r\n","\"use client\";\r\n\r\nimport { useState, useEffect, useCallback, useRef } from 'react';\r\nimport { GeneratedQuiz, QuizQuestion, QuizAnswer, QuizResult, calculateQuizResult } from './mockQuizGenerator';\r\nimport { ConfirmDialog } from '@/components/ui/ConfirmDialog';\r\n\r\nexport interface QuizTakerProps {\r\n  quiz: GeneratedQuiz;\r\n  onComplete: (result: QuizResult) => void;\r\n  onBack?: () => void;\r\n}\r\n\r\ntype QuestionStatus = 'unanswered' | 'answered' | 'current';\r\n\r\nexport function QuizTaker({ quiz, onComplete, onBack }: QuizTakerProps) {\r\n  const [currentIndex, setCurrentIndex] = useState(0);\r\n  const [answers, setAnswers] = useState<Map<string, string>>(new Map());\r\n  const [timeRemaining, setTimeRemaining] = useState<number | null>(\r\n    quiz.timeLimit ? quiz.timeLimit * 60 : null\r\n  );\r\n  const [startTime] = useState<number>(Date.now());\r\n  const [showSubmitConfirm, setShowSubmitConfirm] = useState(false);\r\n  const timerRef = useRef<NodeJS.Timeout | null>(null);\r\n\r\n  const currentQuestion = quiz.questions[currentIndex];\r\n  const totalQuestions = quiz.questions.length;\r\n  const answeredCount = answers.size;\r\n\r\n  // Timer logic - only start once on mount if there's a time limit\r\n  useEffect(() => {\r\n    if (quiz.timeLimit === null) return;\r\n\r\n    timerRef.current = setInterval(() => {\r\n      setTimeRemaining(prev => {\r\n        if (prev === null || prev <= 0) {\r\n          if (timerRef.current) clearInterval(timerRef.current);\r\n          return 0;\r\n        }\r\n        return prev - 1;\r\n      });\r\n    }, 1000);\r\n\r\n    return () => {\r\n      if (timerRef.current) clearInterval(timerRef.current);\r\n    };\r\n  }, [quiz.timeLimit]);\r\n\r\n  // Auto-submit when time runs out - use ref to avoid dependency issues\r\n  const handleSubmitRef = useRef<(() => void) | null>(null);\r\n  \r\n  useEffect(() => {\r\n    handleSubmitRef.current = () => {\r\n      if (timerRef.current) clearInterval(timerRef.current);\r\n      \r\n      const timeTaken = Math.floor((Date.now() - startTime) / 1000);\r\n      const quizAnswers: QuizAnswer[] = quiz.questions.map(q => ({\r\n        questionId: q.id,\r\n        answer: answers.get(q.id) || '',\r\n      }));\r\n      \r\n      const result = calculateQuizResult(quiz, quizAnswers, timeTaken);\r\n      onComplete(result);\r\n    };\r\n  }, [quiz, answers, startTime, onComplete]);\r\n\r\n  useEffect(() => {\r\n    if (timeRemaining === 0 && handleSubmitRef.current) {\r\n      handleSubmitRef.current();\r\n    }\r\n  }, [timeRemaining]);\r\n\r\n  const formatTime = (seconds: number): string => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = seconds % 60;\r\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  const getTimerColor = (): string => {\r\n    if (timeRemaining === null) return 'text-gray-600';\r\n    if (timeRemaining <= 60) return 'text-red-600 animate-pulse';\r\n    if (timeRemaining <= 300) return 'text-orange-500';\r\n    return 'text-gray-600';\r\n  };\r\n\r\n  const getQuestionStatus = (index: number): QuestionStatus => {\r\n    if (index === currentIndex) return 'current';\r\n    const question = quiz.questions[index];\r\n    if (question && answers.has(question.id)) return 'answered';\r\n    return 'unanswered';\r\n  };\r\n\r\n  const handleAnswerChange = useCallback((questionId: string, answer: string) => {\r\n    setAnswers(prev => {\r\n      const newAnswers = new Map(prev);\r\n      newAnswers.set(questionId, answer);\r\n      return newAnswers;\r\n    });\r\n  }, []);\r\n\r\n  const handlePrevious = useCallback(() => {\r\n    if (currentIndex > 0) {\r\n      setCurrentIndex(prev => prev - 1);\r\n    }\r\n  }, [currentIndex]);\r\n\r\n  const handleNext = useCallback(() => {\r\n    if (currentIndex < totalQuestions - 1) {\r\n      setCurrentIndex(prev => prev + 1);\r\n    }\r\n  }, [currentIndex, totalQuestions]);\r\n\r\n  const handleGoToQuestion = useCallback((index: number) => {\r\n    setCurrentIndex(index);\r\n  }, []);\r\n\r\n  const handleSubmit = useCallback(() => {\r\n    if (handleSubmitRef.current) {\r\n      handleSubmitRef.current();\r\n    }\r\n  }, []);\r\n\r\n  const handleSubmitClick = useCallback(() => {\r\n    const unansweredCount = totalQuestions - answeredCount;\r\n    if (unansweredCount > 0) {\r\n      setShowSubmitConfirm(true);\r\n    } else {\r\n      handleSubmit();\r\n    }\r\n  }, [totalQuestions, answeredCount, handleSubmit]);\r\n\r\n\r\n  // Render answer input based on question type\r\n  const renderAnswerInput = (question: QuizQuestion) => {\r\n    const currentAnswer = answers.get(question.id) || '';\r\n\r\n    if (question.type === 'multiple-choice' || question.type === 'true-false') {\r\n      return (\r\n        <div className=\"space-y-3\">\r\n          {question.options?.map((option, index) => (\r\n            <label\r\n              key={index}\r\n              className={`flex cursor-pointer items-center gap-3 rounded-lg border-2 p-4 transition-all ${\r\n                currentAnswer === option\r\n                  ? 'border-blue-500 bg-blue-50'\r\n                  : 'border-gray-200 hover:border-gray-300 hover:bg-gray-50'\r\n              }`}\r\n            >\r\n              <input\r\n                type=\"radio\"\r\n                name={`question-${question.id}`}\r\n                value={option}\r\n                checked={currentAnswer === option}\r\n                onChange={() => handleAnswerChange(question.id, option)}\r\n                className=\"h-4 w-4 text-blue-600 focus:ring-blue-500\"\r\n              />\r\n              <span className=\"text-gray-900\">{option}</span>\r\n            </label>\r\n          ))}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (question.type === 'short-answer') {\r\n      return (\r\n        <div>\r\n          <input\r\n            type=\"text\"\r\n            value={currentAnswer}\r\n            onChange={(e) => handleAnswerChange(question.id, e.target.value)}\r\n            placeholder=\"Type your answer here...\"\r\n            className=\"w-full rounded-lg border-2 border-gray-200 px-4 py-3 text-gray-900 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500\"\r\n          />\r\n          <p className=\"mt-2 text-xs text-gray-500\">\r\n            Enter your answer. Spelling and capitalization are flexible.\r\n          </p>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return null;\r\n  };\r\n\r\n  const getStatusColor = (status: QuestionStatus): string => {\r\n    switch (status) {\r\n      case 'current':\r\n        return 'bg-blue-600 text-white';\r\n      case 'answered':\r\n        return 'bg-green-100 text-green-700 border-green-300';\r\n      case 'unanswered':\r\n        return 'bg-gray-100 text-gray-600 border-gray-200';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col lg:flex-row gap-4 sm:gap-6\">\r\n      {/* Main content area - Requirements 1.3, 6.4: Responsive design */}\r\n      <div className=\"flex-1 space-y-4 sm:space-y-6\">\r\n        {/* Header with timer and progress */}\r\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4 rounded-lg border border-gray-200 bg-white p-3 sm:p-4 shadow-sm\">\r\n          <div className=\"flex items-center gap-3 sm:gap-4\">\r\n            {onBack && (\r\n              <button\r\n                onClick={onBack}\r\n                className=\"flex items-center gap-1 p-1.5 -ml-1.5 text-gray-600 hover:text-gray-900 active:scale-95\"\r\n              >\r\n                <svg className=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 19l-7-7m0 0l7-7m-7 7h18\" />\r\n                </svg>\r\n              </button>\r\n            )}\r\n            <div className=\"min-w-0\">\r\n              <h2 className=\"text-base sm:text-lg font-semibold text-gray-900 truncate\">{quiz.name}</h2>\r\n              <p className=\"text-xs sm:text-sm text-gray-500\">\r\n                {answeredCount} of {totalQuestions} answered\r\n              </p>\r\n            </div>\r\n          </div>\r\n          \r\n          {/* Timer display */}\r\n          {timeRemaining !== null && (\r\n            <div className={`flex items-center justify-center gap-2 rounded-lg px-3 sm:px-4 py-2 ${\r\n              timeRemaining <= 60 ? 'bg-red-50' : timeRemaining <= 300 ? 'bg-orange-50' : 'bg-gray-50'\r\n            }`}>\r\n              <svg className={`h-5 w-5 ${getTimerColor()}`} fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n              </svg>\r\n              <span className={`text-base sm:text-lg font-mono font-semibold ${getTimerColor()}`}>\r\n                {formatTime(timeRemaining)}\r\n              </span>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Question display */}\r\n        {currentQuestion && (\r\n          <div className=\"rounded-lg border border-gray-200 bg-white p-6 shadow-sm\">\r\n            {/* Question number and type indicator */}\r\n            <div className=\"mb-4 flex items-center justify-between\">\r\n              <span className=\"text-sm font-medium text-gray-500\">\r\n                Question {currentIndex + 1} of {totalQuestions}\r\n              </span>\r\n              <span className={`rounded-full px-3 py-1 text-xs font-medium ${\r\n                currentQuestion.type === 'multiple-choice' \r\n                  ? 'bg-blue-100 text-blue-700'\r\n                  : currentQuestion.type === 'true-false'\r\n                  ? 'bg-green-100 text-green-700'\r\n                  : 'bg-purple-100 text-purple-700'\r\n              }`}>\r\n                {currentQuestion.type === 'multiple-choice' && 'Multiple Choice'}\r\n                {currentQuestion.type === 'true-false' && 'True / False'}\r\n                {currentQuestion.type === 'short-answer' && 'Short Answer'}\r\n              </span>\r\n            </div>\r\n\r\n            {/* Question text */}\r\n            <h3 className=\"mb-6 text-xl font-medium text-gray-900\">\r\n              {currentQuestion.question}\r\n            </h3>\r\n\r\n            {/* Answer options */}\r\n            {renderAnswerInput(currentQuestion)}\r\n          </div>\r\n        )}\r\n\r\n\r\n        {/* Navigation buttons - touch-friendly on mobile */}\r\n        <div className=\"flex items-center justify-between gap-2\">\r\n          <button\r\n            onClick={handlePrevious}\r\n            disabled={currentIndex === 0}\r\n            className={`flex items-center gap-1 sm:gap-2 rounded-lg px-3 sm:px-4 py-2.5 sm:py-2 text-sm font-medium transition-colors active:scale-95 ${\r\n              currentIndex === 0\r\n                ? 'cursor-not-allowed text-gray-300'\r\n                : 'text-gray-600 hover:bg-gray-100 hover:text-gray-900'\r\n            }`}\r\n          >\r\n            <svg className=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\r\n            </svg>\r\n            <span className=\"hidden sm:inline\">Previous</span>\r\n            <span className=\"sm:hidden\">Prev</span>\r\n          </button>\r\n\r\n          <button\r\n            onClick={handleSubmitClick}\r\n            className=\"flex items-center gap-1.5 sm:gap-2 rounded-lg bg-gradient-to-r from-blue-600 to-purple-600 px-4 sm:px-6 py-2.5 sm:py-2 text-sm font-semibold text-white shadow-md hover:from-blue-700 hover:to-purple-700 active:scale-[0.98]\"\r\n          >\r\n            <svg className=\"h-4 sm:h-5 w-4 sm:w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n            </svg>\r\n            <span className=\"hidden sm:inline\">Submit Quiz</span>\r\n            <span className=\"sm:hidden\">Submit</span>\r\n          </button>\r\n\r\n          <button\r\n            onClick={handleNext}\r\n            disabled={currentIndex === totalQuestions - 1}\r\n            className={`flex items-center gap-1 sm:gap-2 rounded-lg px-3 sm:px-4 py-2.5 sm:py-2 text-sm font-medium transition-colors active:scale-95 ${\r\n              currentIndex === totalQuestions - 1\r\n                ? 'cursor-not-allowed text-gray-300'\r\n                : 'text-gray-600 hover:bg-gray-100 hover:text-gray-900'\r\n            }`}\r\n          >\r\n            <span>Next</span>\r\n            <svg className=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\r\n            </svg>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Question navigation sidebar - collapsible on mobile */}\r\n      <div className=\"lg:w-64\">\r\n        <div className=\"rounded-lg border border-gray-200 bg-white p-3 sm:p-4 shadow-sm lg:sticky lg:top-4\">\r\n          <h3 className=\"mb-3 sm:mb-4 text-sm font-semibold text-gray-900\">Questions</h3>\r\n          \r\n          {/* Status legend - compact on mobile */}\r\n          <div className=\"mb-3 sm:mb-4 flex flex-wrap gap-2 sm:gap-3 text-xs\">\r\n            <div className=\"flex items-center gap-1\">\r\n              <span className=\"h-2.5 w-2.5 sm:h-3 sm:w-3 rounded-full bg-blue-600\"></span>\r\n              <span className=\"text-gray-600\">Current</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-1\">\r\n              <span className=\"h-2.5 w-2.5 sm:h-3 sm:w-3 rounded-full bg-green-500\"></span>\r\n              <span className=\"text-gray-600\">Answered</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-1\">\r\n              <span className=\"h-2.5 w-2.5 sm:h-3 sm:w-3 rounded-full bg-gray-300\"></span>\r\n              <span className=\"text-gray-600\">Unanswered</span>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Question grid - touch-friendly buttons */}\r\n          <div className=\"grid grid-cols-6 sm:grid-cols-5 gap-1.5 sm:gap-2\">\r\n            {quiz.questions.map((question, index) => {\r\n              const status = getQuestionStatus(index);\r\n              return (\r\n                <button\r\n                  key={question.id}\r\n                  onClick={() => handleGoToQuestion(index)}\r\n                  className={`flex h-9 w-9 sm:h-10 sm:w-10 items-center justify-center rounded-lg border text-xs sm:text-sm font-medium transition-all active:scale-95 ${getStatusColor(status)}`}\r\n                  title={`Question ${index + 1} - ${status}`}\r\n                >\r\n                  {index + 1}\r\n                </button>\r\n              );\r\n            })}\r\n          </div>\r\n\r\n          {/* Progress summary */}\r\n          <div className=\"mt-3 sm:mt-4 pt-3 sm:pt-4 border-t border-gray-200\">\r\n            <div className=\"flex justify-between text-xs sm:text-sm\">\r\n              <span className=\"text-gray-600\">Progress</span>\r\n              <span className=\"font-medium text-gray-900\">\r\n                {Math.round((answeredCount / totalQuestions) * 100)}%\r\n              </span>\r\n            </div>\r\n            <div className=\"mt-2 h-1.5 sm:h-2 w-full rounded-full bg-gray-200\">\r\n              <div\r\n                className=\"h-1.5 sm:h-2 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all\"\r\n                style={{ width: `${(answeredCount / totalQuestions) * 100}%` }}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Submit confirmation dialog */}\r\n      <ConfirmDialog\r\n        isOpen={showSubmitConfirm}\r\n        title=\"Submit Quiz?\"\r\n        message={`You have ${totalQuestions - answeredCount} unanswered question${totalQuestions - answeredCount !== 1 ? 's' : ''}. Are you sure you want to submit?`}\r\n        confirmLabel=\"Submit Anyway\"\r\n        cancelLabel=\"Continue Quiz\"\r\n        variant=\"warning\"\r\n        onConfirm={() => {\r\n          setShowSubmitConfirm(false);\r\n          handleSubmit();\r\n        }}\r\n        onCancel={() => setShowSubmitConfirm(false)}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","\"use client\";\r\n\r\nimport { useState, useMemo } from 'react';\r\nimport { GeneratedQuiz, QuizResult, QuizQuestion } from './mockQuizGenerator';\r\n\r\nexport interface QuizResultsProps {\r\n  quiz: GeneratedQuiz;\r\n  result: QuizResult;\r\n  onRetake: () => void;\r\n  onSaveResults?: () => void;\r\n  onShare?: () => void;\r\n  onBack?: () => void;\r\n}\r\n\r\ntype ViewMode = 'summary' | 'review';\r\n\r\ninterface QuestionReviewProps {\r\n  question: QuizQuestion;\r\n  userAnswer: string;\r\n  isCorrect: boolean;\r\n  questionNumber: number;\r\n}\r\n\r\nfunction QuestionReview({ question, userAnswer, isCorrect, questionNumber }: QuestionReviewProps) {\r\n  const [isExpanded, setIsExpanded] = useState(false);\r\n\r\n  return (\r\n    <div className={`rounded-lg border-2 p-4 transition-all ${\r\n      isCorrect ? 'border-green-200 bg-green-50' : 'border-red-200 bg-red-50'\r\n    }`}>\r\n      <div className=\"flex items-start justify-between gap-4\">\r\n        <div className=\"flex-1\">\r\n          <div className=\"flex items-center gap-2 mb-2\">\r\n            <span className={`flex h-6 w-6 items-center justify-center rounded-full text-xs font-bold ${\r\n              isCorrect ? 'bg-green-500 text-white' : 'bg-red-500 text-white'\r\n            }`}>\r\n              {questionNumber}\r\n            </span>\r\n            <span className={`rounded-full px-2 py-0.5 text-xs font-medium ${\r\n              question.type === 'multiple-choice' \r\n                ? 'bg-blue-100 text-blue-700'\r\n                : question.type === 'true-false'\r\n                ? 'bg-purple-100 text-purple-700'\r\n                : 'bg-orange-100 text-orange-700'\r\n            }`}>\r\n              {question.type === 'multiple-choice' && 'Multiple Choice'}\r\n              {question.type === 'true-false' && 'True/False'}\r\n              {question.type === 'short-answer' && 'Short Answer'}\r\n            </span>\r\n            {isCorrect ? (\r\n              <span className=\"flex items-center gap-1 text-xs font-medium text-green-700\">\r\n                <svg className=\"h-4 w-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                  <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\r\n                </svg>\r\n                Correct\r\n              </span>\r\n            ) : (\r\n              <span className=\"flex items-center gap-1 text-xs font-medium text-red-700\">\r\n                <svg className=\"h-4 w-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                  <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clipRule=\"evenodd\" />\r\n                </svg>\r\n                Incorrect\r\n              </span>\r\n            )}\r\n          </div>\r\n          <p className=\"text-gray-900 font-medium\">{question.question}</p>\r\n        </div>\r\n        <button\r\n          onClick={() => setIsExpanded(!isExpanded)}\r\n          className=\"flex-shrink-0 rounded-lg p-2 text-gray-500 hover:bg-white hover:text-gray-700\"\r\n        >\r\n          <svg className={`h-5 w-5 transition-transform ${isExpanded ? 'rotate-180' : ''}`} fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\r\n          </svg>\r\n        </button>\r\n      </div>\r\n\r\n      {isExpanded && (\r\n        <div className=\"mt-4 space-y-3 border-t border-gray-200 pt-4\">\r\n          {/* User's Answer */}\r\n          <div>\r\n            <p className=\"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1\">Your Answer</p>\r\n            <p className={`text-sm ${isCorrect ? 'text-green-700' : 'text-red-700'}`}>\r\n              {userAnswer || <span className=\"italic text-gray-400\">No answer provided</span>}\r\n            </p>\r\n          </div>\r\n\r\n          {/* Correct Answer (only show if incorrect) */}\r\n          {!isCorrect && (\r\n            <div>\r\n              <p className=\"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1\">Correct Answer</p>\r\n              <p className=\"text-sm text-green-700 font-medium\">{question.correctAnswer}</p>\r\n            </div>\r\n          )}\r\n\r\n          {/* Explanation */}\r\n          <div className=\"rounded-lg bg-white p-3\">\r\n            <p className=\"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1\">Explanation</p>\r\n            <p className=\"text-sm text-gray-700\">{question.explanation}</p>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n// Circular progress component for score visualization\r\nfunction CircularProgress({ percentage, size = 160 }: { percentage: number; size?: number }) {\r\n  const strokeWidth = 12;\r\n  const radius = (size - strokeWidth) / 2;\r\n  const circumference = radius * 2 * Math.PI;\r\n  const offset = circumference - (percentage / 100) * circumference;\r\n\r\n  const getColor = () => {\r\n    if (percentage >= 80) return { stroke: '#22c55e', bg: '#dcfce7' }; // green\r\n    if (percentage >= 60) return { stroke: '#3b82f6', bg: '#dbeafe' }; // blue\r\n    if (percentage >= 40) return { stroke: '#f59e0b', bg: '#fef3c7' }; // amber\r\n    return { stroke: '#ef4444', bg: '#fee2e2' }; // red\r\n  };\r\n\r\n  const colors = getColor();\r\n\r\n  return (\r\n    <div className=\"relative\" style={{ width: size, height: size }}>\r\n      <svg className=\"transform -rotate-90\" width={size} height={size}>\r\n        {/* Background circle */}\r\n        <circle\r\n          cx={size / 2}\r\n          cy={size / 2}\r\n          r={radius}\r\n          fill=\"none\"\r\n          stroke={colors.bg}\r\n          strokeWidth={strokeWidth}\r\n        />\r\n        {/* Progress circle */}\r\n        <circle\r\n          cx={size / 2}\r\n          cy={size / 2}\r\n          r={radius}\r\n          fill=\"none\"\r\n          stroke={colors.stroke}\r\n          strokeWidth={strokeWidth}\r\n          strokeLinecap=\"round\"\r\n          strokeDasharray={circumference}\r\n          strokeDashoffset={offset}\r\n          className=\"transition-all duration-1000 ease-out\"\r\n        />\r\n      </svg>\r\n      <div className=\"absolute inset-0 flex flex-col items-center justify-center\">\r\n        <span className=\"text-4xl font-bold text-gray-900\">{percentage}%</span>\r\n        <span className=\"text-sm text-gray-500\">Score</span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function QuizResults({ quiz, result, onRetake, onSaveResults, onShare, onBack }: QuizResultsProps) {\r\n  const [viewMode, setViewMode] = useState<ViewMode>('summary');\r\n  const [shareSuccess, setShareSuccess] = useState(false);\r\n\r\n  // Calculate performance breakdown by question type\r\n  const performanceBreakdown = useMemo(() => {\r\n    const breakdown: Record<string, { correct: number; total: number }> = {};\r\n    \r\n    quiz.questions.forEach((question) => {\r\n      const answer = result.answers.find(a => a.questionId === question.id);\r\n      const type = question.type;\r\n      \r\n      if (!breakdown[type]) {\r\n        breakdown[type] = { correct: 0, total: 0 };\r\n      }\r\n      breakdown[type].total++;\r\n      if (answer?.isCorrect) {\r\n        breakdown[type].correct++;\r\n      }\r\n    });\r\n\r\n    return breakdown;\r\n  }, [quiz.questions, result.answers]);\r\n\r\n  const correctCount = result.answers.filter(a => a.isCorrect).length;\r\n  const incorrectCount = result.totalQuestions - correctCount;\r\n\r\n  // Format time taken\r\n  const formatTime = (seconds: number): string => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = seconds % 60;\r\n    if (mins === 0) return `${secs} seconds`;\r\n    return `${mins}m ${secs}s`;\r\n  };\r\n\r\n  // Get grade label\r\n  const getGradeLabel = (score: number): { label: string; color: string } => {\r\n    if (score >= 90) return { label: 'Excellent!', color: 'text-green-600' };\r\n    if (score >= 80) return { label: 'Great Job!', color: 'text-green-600' };\r\n    if (score >= 70) return { label: 'Good Work!', color: 'text-blue-600' };\r\n    if (score >= 60) return { label: 'Not Bad!', color: 'text-blue-600' };\r\n    if (score >= 50) return { label: 'Keep Practicing', color: 'text-amber-600' };\r\n    return { label: 'Needs Improvement', color: 'text-red-600' };\r\n  };\r\n\r\n  const grade = getGradeLabel(result.score);\r\n\r\n  const handleShare = async () => {\r\n    const shareText = `I scored ${result.score}% on \"${quiz.name}\"! ${correctCount}/${result.totalQuestions} correct answers.`;\r\n    \r\n    if (navigator.share) {\r\n      try {\r\n        await navigator.share({\r\n          title: 'Quiz Results',\r\n          text: shareText,\r\n        });\r\n      } catch {\r\n        // User cancelled or share failed, copy to clipboard instead\r\n        await navigator.clipboard.writeText(shareText);\r\n        setShareSuccess(true);\r\n        setTimeout(() => setShareSuccess(false), 2000);\r\n      }\r\n    } else {\r\n      // Fallback to clipboard\r\n      await navigator.clipboard.writeText(shareText);\r\n      setShareSuccess(true);\r\n      setTimeout(() => setShareSuccess(false), 2000);\r\n    }\r\n    onShare?.();\r\n  };\r\n\r\n  const getTypeLabel = (type: string): string => {\r\n    switch (type) {\r\n      case 'multiple-choice': return 'Multiple Choice';\r\n      case 'true-false': return 'True/False';\r\n      case 'short-answer': return 'Short Answer';\r\n      default: return type;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\r\n        <div className=\"flex items-center gap-3\">\r\n          {onBack && (\r\n            <button\r\n              onClick={onBack}\r\n              className=\"flex items-center gap-1 text-gray-600 hover:text-gray-900\"\r\n            >\r\n              <svg className=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 19l-7-7m0 0l7-7m-7 7h18\" />\r\n              </svg>\r\n            </button>\r\n          )}\r\n          <div>\r\n            <h1 className=\"text-2xl font-bold text-gray-900\">Quiz Results</h1>\r\n            <p className=\"text-sm text-gray-500\">{quiz.name}</p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* View toggle */}\r\n        <div className=\"flex rounded-lg border border-gray-200 bg-gray-50 p-1\">\r\n          <button\r\n            onClick={() => setViewMode('summary')}\r\n            className={`rounded-md px-4 py-2 text-sm font-medium transition-colors ${\r\n              viewMode === 'summary'\r\n                ? 'bg-white text-gray-900 shadow-sm'\r\n                : 'text-gray-600 hover:text-gray-900'\r\n            }`}\r\n          >\r\n            Summary\r\n          </button>\r\n          <button\r\n            onClick={() => setViewMode('review')}\r\n            className={`rounded-md px-4 py-2 text-sm font-medium transition-colors ${\r\n              viewMode === 'review'\r\n                ? 'bg-white text-gray-900 shadow-sm'\r\n                : 'text-gray-600 hover:text-gray-900'\r\n            }`}\r\n          >\r\n            Review Answers\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n\r\n      {viewMode === 'summary' ? (\r\n        <>\r\n          {/* Score Card */}\r\n          <div className=\"rounded-lg border border-gray-200 bg-white p-6 shadow-sm\">\r\n            <div className=\"flex flex-col md:flex-row items-center gap-8\">\r\n              {/* Circular Progress */}\r\n              <div className=\"flex-shrink-0\">\r\n                <CircularProgress percentage={result.score} />\r\n              </div>\r\n\r\n              {/* Score Details */}\r\n              <div className=\"flex-1 text-center md:text-left\">\r\n                <h2 className={`text-3xl font-bold ${grade.color}`}>{grade.label}</h2>\r\n                <p className=\"mt-2 text-gray-600\">\r\n                  You answered {correctCount} out of {result.totalQuestions} questions correctly.\r\n                </p>\r\n                <div className=\"mt-4 flex flex-wrap justify-center md:justify-start gap-4\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <div className=\"flex h-8 w-8 items-center justify-center rounded-full bg-green-100\">\r\n                      <svg className=\"h-4 w-4 text-green-600\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                        <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\r\n                      </svg>\r\n                    </div>\r\n                    <div>\r\n                      <p className=\"text-sm font-medium text-gray-900\">{correctCount}</p>\r\n                      <p className=\"text-xs text-gray-500\">Correct</p>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <div className=\"flex h-8 w-8 items-center justify-center rounded-full bg-red-100\">\r\n                      <svg className=\"h-4 w-4 text-red-600\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                        <path fillRule=\"evenodd\" d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\" clipRule=\"evenodd\" />\r\n                      </svg>\r\n                    </div>\r\n                    <div>\r\n                      <p className=\"text-sm font-medium text-gray-900\">{incorrectCount}</p>\r\n                      <p className=\"text-xs text-gray-500\">Incorrect</p>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <div className=\"flex h-8 w-8 items-center justify-center rounded-full bg-blue-100\">\r\n                      <svg className=\"h-4 w-4 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                      </svg>\r\n                    </div>\r\n                    <div>\r\n                      <p className=\"text-sm font-medium text-gray-900\">{formatTime(result.timeTaken)}</p>\r\n                      <p className=\"text-xs text-gray-500\">Time Taken</p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Performance Breakdown */}\r\n          <div className=\"rounded-lg border border-gray-200 bg-white p-6 shadow-sm\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Performance by Question Type</h3>\r\n            <div className=\"space-y-4\">\r\n              {Object.entries(performanceBreakdown).map(([type, stats]) => {\r\n                const percentage = Math.round((stats.correct / stats.total) * 100);\r\n                return (\r\n                  <div key={type}>\r\n                    <div className=\"flex items-center justify-between mb-1\">\r\n                      <span className=\"text-sm font-medium text-gray-700\">{getTypeLabel(type)}</span>\r\n                      <span className=\"text-sm text-gray-500\">\r\n                        {stats.correct}/{stats.total} ({percentage}%)\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"h-2 w-full rounded-full bg-gray-200\">\r\n                      <div\r\n                        className={`h-2 rounded-full transition-all duration-500 ${\r\n                          percentage >= 70 ? 'bg-green-500' : percentage >= 50 ? 'bg-amber-500' : 'bg-red-500'\r\n                        }`}\r\n                        style={{ width: `${percentage}%` }}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Quick Stats */}\r\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n            <div className=\"rounded-lg border border-gray-200 bg-white p-4 text-center\">\r\n              <p className=\"text-2xl font-bold text-gray-900\">{result.totalQuestions}</p>\r\n              <p className=\"text-sm text-gray-500\">Total Questions</p>\r\n            </div>\r\n            <div className=\"rounded-lg border border-gray-200 bg-white p-4 text-center\">\r\n              <p className=\"text-2xl font-bold text-green-600\">{correctCount}</p>\r\n              <p className=\"text-sm text-gray-500\">Correct</p>\r\n            </div>\r\n            <div className=\"rounded-lg border border-gray-200 bg-white p-4 text-center\">\r\n              <p className=\"text-2xl font-bold text-red-600\">{incorrectCount}</p>\r\n              <p className=\"text-sm text-gray-500\">Incorrect</p>\r\n            </div>\r\n            <div className=\"rounded-lg border border-gray-200 bg-white p-4 text-center\">\r\n              <p className=\"text-2xl font-bold text-blue-600\">{formatTime(result.timeTaken)}</p>\r\n              <p className=\"text-sm text-gray-500\">Time Taken</p>\r\n            </div>\r\n          </div>\r\n        </>\r\n      ) : (\r\n        /* Review Mode */\r\n        <div className=\"space-y-4\">\r\n          <div className=\"rounded-lg border border-gray-200 bg-white p-4 shadow-sm\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <p className=\"text-sm text-gray-600\">\r\n                Click on any question to expand and see the explanation.\r\n              </p>\r\n              <div className=\"flex items-center gap-4 text-sm\">\r\n                <span className=\"flex items-center gap-1 text-green-600\">\r\n                  <span className=\"h-2 w-2 rounded-full bg-green-500\"></span>\r\n                  {correctCount} Correct\r\n                </span>\r\n                <span className=\"flex items-center gap-1 text-red-600\">\r\n                  <span className=\"h-2 w-2 rounded-full bg-red-500\"></span>\r\n                  {incorrectCount} Incorrect\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {quiz.questions.map((question, index) => {\r\n            const answer = result.answers.find(a => a.questionId === question.id);\r\n            return (\r\n              <QuestionReview\r\n                key={question.id}\r\n                question={question}\r\n                userAnswer={answer?.answer || ''}\r\n                isCorrect={answer?.isCorrect || false}\r\n                questionNumber={index + 1}\r\n              />\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n\r\n\r\n      {/* Action Buttons */}\r\n      <div className=\"flex flex-col sm:flex-row items-center justify-center gap-4 pt-4\">\r\n        <button\r\n          onClick={onRetake}\r\n          className=\"flex w-full sm:w-auto items-center justify-center gap-2 rounded-lg bg-gradient-to-r from-blue-600 to-purple-600 px-6 py-3 text-sm font-semibold text-white shadow-md hover:from-blue-700 hover:to-purple-700 transition-all\"\r\n        >\r\n          <svg className=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\r\n          </svg>\r\n          Retake Quiz\r\n        </button>\r\n\r\n        {onSaveResults && (\r\n          <button\r\n            onClick={onSaveResults}\r\n            className=\"flex w-full sm:w-auto items-center justify-center gap-2 rounded-lg border border-gray-300 bg-white px-6 py-3 text-sm font-semibold text-gray-700 shadow-sm hover:bg-gray-50 transition-all\"\r\n          >\r\n            <svg className=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4\" />\r\n            </svg>\r\n            Save Results\r\n          </button>\r\n        )}\r\n\r\n        <button\r\n          onClick={handleShare}\r\n          className=\"flex w-full sm:w-auto items-center justify-center gap-2 rounded-lg border border-gray-300 bg-white px-6 py-3 text-sm font-semibold text-gray-700 shadow-sm hover:bg-gray-50 transition-all relative\"\r\n        >\r\n          {shareSuccess ? (\r\n            <>\r\n              <svg className=\"h-5 w-5 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\r\n              </svg>\r\n              Copied!\r\n            </>\r\n          ) : (\r\n            <>\r\n              <svg className=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z\" />\r\n              </svg>\r\n              Share Score\r\n            </>\r\n          )}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}