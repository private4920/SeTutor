module.exports=[9292,a=>{"use strict";var b=a.i(72131),c=a.i(76725);function d(){return{authenticatedFetch:(0,b.useCallback)(async(a,b={})=>{let d=(0,c.getFirebaseAuth)().currentUser;if(!d)throw Error("User is not authenticated");let e=await d.getIdToken(),f=new Headers(b.headers);return f.set("Authorization",`Bearer ${e}`),fetch(a,{...b,headers:f})},[])}}async function e(){let a=(0,c.getFirebaseAuth)().currentUser;return a?a.getIdToken():null}async function f(a){let b=new Headers(a),c=await e();return c&&b.set("Authorization",`Bearer ${c}`),b}a.s(["createAuthHeaders",()=>f,"getIdToken",()=>e,"useAuthenticatedFetch",()=>d])},83347,a=>{"use strict";var b=a.i(72131),c=a.i(8098),d=a.i(9292);async function e(){let a=await (0,d.getIdToken)();if(!a)throw Error("Not authenticated");return{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}}function f(){let{user:a}=(0,c.useAuth)(),[d,f]=(0,b.useState)([]),[g,h]=(0,b.useState)(!1),[i,j]=(0,b.useState)(null),[k,l]=(0,b.useState)({currentPage:1,pageSize:20,totalItems:0,totalPages:0}),m=(0,b.useCallback)(a=>{l(b=>({...b,currentPage:a}))},[]),n=(0,b.useCallback)(a=>{l(b=>({...b,pageSize:a,currentPage:1}))},[]),o=(0,b.useCallback)(async b=>{if(a?.uid){h(!0),j(null);try{let a=await e(),c=new URLSearchParams;void 0!==b&&c.append("parentId",null===b?"null":b);let d=await fetch(`/api/folders?${c}`,{headers:a}),g=await d.json();if(!d.ok)throw Error(g.error||"Failed to fetch folders");f(g.folders),l(a=>({...a,totalItems:g.folders.length,totalPages:1,currentPage:1}))}catch(a){j(a instanceof Error?a.message:"Failed to fetch folders")}finally{h(!1)}}},[a?.uid]),p=(0,b.useCallback)(async(b,c,d)=>{if(!a?.uid)return;let g=d??k.pageSize,i=c??k.currentPage;h(!0),j(null);try{let a=await e(),c=new URLSearchParams({page:i.toString(),pageSize:g.toString()});void 0!==b&&c.append("parentId",null===b?"null":b);let d=await fetch(`/api/folders?${c}`,{headers:a}),h=await d.json();if(!d.ok)throw Error(h.error||"Failed to fetch folders");f(h.folders),l({currentPage:i,pageSize:g,totalItems:h.total,totalPages:Math.ceil(h.total/g)})}catch(a){j(a instanceof Error?a.message:"Failed to fetch folders")}finally{h(!1)}},[a?.uid,k.pageSize,k.currentPage]),q=(0,b.useCallback)(async b=>{if(!a?.uid)return[];try{let a=await e(),c=await fetch(`/api/folders/${b}/path`,{headers:a}),d=await c.json();if(!c.ok)throw Error(d.error||"Failed to fetch folder path");return d.path}catch(a){return j(a instanceof Error?a.message:"Failed to fetch folder path"),[]}},[a?.uid]),r=(0,b.useCallback)(async(b,c)=>{if(!a?.uid)return null;h(!0),j(null);try{let a=await e(),d=await fetch("/api/folders",{method:"POST",headers:a,body:JSON.stringify({name:b,parentId:c})}),g=await d.json();if(!d.ok)throw Error(g.error||"Failed to create folder");return f(a=>[...a,g.folder]),g.folder}catch(a){return j(a instanceof Error?a.message:"Failed to create folder"),null}finally{h(!1)}},[a?.uid]),s=(0,b.useCallback)(async(b,c)=>{if(!a?.uid)return null;h(!0),j(null);try{let a=await e(),d=await fetch(`/api/folders/${b}`,{method:"PUT",headers:a,body:JSON.stringify({name:c})}),g=await d.json();if(!d.ok)throw Error(g.error||"Failed to rename folder");return f(a=>a.map(a=>a.id===b?g.folder:a)),g.folder}catch(a){return j(a instanceof Error?a.message:"Failed to rename folder"),null}finally{h(!1)}},[a?.uid]),t=(0,b.useCallback)(async b=>{if(!a?.uid)return!1;h(!0),j(null);try{let a=await e(),c=await fetch(`/api/folders/${b}`,{method:"DELETE",headers:a}),d=await c.json();if(!c.ok)throw Error(d.error||"Failed to delete folder");return f(a=>a.filter(a=>a.id!==b)),!0}catch(a){return j(a instanceof Error?a.message:"Failed to delete folder"),!1}finally{h(!1)}},[a?.uid]),u=(0,b.useCallback)(async(b,c)=>{if(!a?.uid)return null;h(!0),j(null);try{let a=await e(),d=await fetch(`/api/folders/${b}/move`,{method:"POST",headers:a,body:JSON.stringify({newParentId:c})}),f=await d.json();if(!d.ok)throw Error(f.error||"Failed to move folder");return await o(),f.folder}catch(a){return j(a instanceof Error?a.message:"Failed to move folder"),null}finally{h(!1)}},[a?.uid,o]);return{folders:d,loading:g,error:i,pagination:k,fetchFolders:o,fetchFoldersPaginated:p,fetchFolderPath:q,createFolder:r,renameFolder:s,deleteFolder:t,moveFolder:u,setPage:m,setPageSize:n}}a.s(["useFolders",()=>f])},15720,a=>{"use strict";var b=a.i(87924),c=a.i(72131);let d=(0,c.memo)(function({className:a="",variant:c="rectangular",width:d,height:e,animation:f="pulse"}){let g={};return d&&(g.width="number"==typeof d?`${d}px`:d),e&&(g.height="number"==typeof e?`${e}px`:e),(0,b.jsx)("div",{className:`bg-gray-200 ${{text:"rounded",circular:"rounded-full",rectangular:"rounded-lg"}[c]} ${{pulse:"animate-pulse",wave:"animate-shimmer",none:""}[f]} ${a}`,style:g,"aria-hidden":"true"})}),e=(0,c.memo)(function(){return(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"whitespace-nowrap px-6 py-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(d,{variant:"rectangular",width:32,height:32,className:"rounded-lg"}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(d,{height:14,width:180}),(0,b.jsx)(d,{height:10,width:120})]})]})}),(0,b.jsx)("td",{className:"hidden whitespace-nowrap px-6 py-4 sm:table-cell",children:(0,b.jsx)(d,{height:14,width:60})}),(0,b.jsx)("td",{className:"hidden whitespace-nowrap px-6 py-4 md:table-cell",children:(0,b.jsx)(d,{height:14,width:80})}),(0,b.jsx)("td",{className:"whitespace-nowrap px-6 py-4 text-right",children:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,b.jsx)(d,{variant:"circular",width:28,height:28}),(0,b.jsx)(d,{variant:"circular",width:28,height:28}),(0,b.jsx)(d,{variant:"circular",width:28,height:28})]})})]})}),f=(0,c.memo)(function(){return(0,b.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white p-4 shadow-sm",children:[(0,b.jsx)(d,{height:96,className:"mb-3 w-full rounded-lg"}),(0,b.jsx)(d,{height:14,width:"80%",className:"mb-2"}),(0,b.jsx)(d,{height:10,width:"60%"})]})}),g=(0,c.memo)(function(){return(0,b.jsxs)("div",{className:"flex items-center gap-3 rounded-lg border border-gray-200 bg-white p-4",children:[(0,b.jsx)(d,{variant:"rectangular",width:48,height:48,className:"rounded-lg"}),(0,b.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,b.jsx)(d,{height:14,width:"70%"}),(0,b.jsx)(d,{height:10,width:"50%"})]})]})}),h=(0,c.memo)(function(){return(0,b.jsxs)("div",{className:"rounded-lg bg-white p-6 shadow-sm",children:[(0,b.jsx)(d,{height:20,width:140,className:"mb-4"}),(0,b.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0].map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(d,{variant:"rectangular",width:40,height:40,className:"rounded-lg"}),(0,b.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,b.jsx)(d,{height:14,width:"75%"}),(0,b.jsx)(d,{height:10,width:"50%"})]})]},c))})]})}),i=(0,c.memo)(function({count:a=5}){return(0,b.jsx)("div",{className:"overflow-hidden rounded-lg border border-gray-200 bg-white",children:(0,b.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Name"}),(0,b.jsx)("th",{className:"hidden px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 sm:table-cell",children:"Size"}),(0,b.jsx)("th",{className:"hidden px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 md:table-cell",children:"Uploaded"}),(0,b.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-200",children:[...Array(a)].map((a,c)=>(0,b.jsx)(e,{},c))})]})})}),j=(0,c.memo)(function({count:a=8}){return(0,b.jsx)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:[...Array(a)].map((a,c)=>(0,b.jsx)(f,{},c))})}),k=(0,c.memo)(function({count:a=6}){return(0,b.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[...Array(a)].map((a,c)=>(0,b.jsx)(g,{},c))})});a.s(["DocumentGridSkeleton",0,j,"DocumentListSkeleton",0,i,"FolderGridSkeleton",0,k,"RecentDocumentsSkeleton",0,h])},12171,a=>{"use strict";var b=a.i(87924),c=a.i(72131);function d({isOpen:a,title:d,message:e,confirmLabel:f="Confirm",cancelLabel:g="Cancel",variant:h="danger",onConfirm:i,onCancel:j}){let k=(0,c.useRef)(null),l=(0,c.useRef)(null),m=(0,c.useRef)(null);(0,c.useEffect)(()=>{a&&l.current?.focus()},[a]);let n=(0,c.useCallback)(b=>{if(a){if("Escape"===b.key)return void j();if("Tab"===b.key){let a=[l.current,m.current].filter(Boolean),c=a[0],d=a[a.length-1];b.shiftKey?document.activeElement===c&&(b.preventDefault(),d?.focus()):document.activeElement===d&&(b.preventDefault(),c?.focus())}}},[a,j]);return((0,c.useEffect)(()=>(document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)),[n]),(0,c.useEffect)(()=>(a&&(document.body.style.overflow="hidden"),()=>{document.body.style.overflow=""}),[a]),a)?(0,b.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:j,"aria-hidden":"true"}),(0,b.jsxs)("div",{ref:k,role:"alertdialog","aria-modal":"true","aria-labelledby":"dialog-title","aria-describedby":"dialog-description",tabIndex:-1,className:"relative z-10 w-full max-w-md rounded-lg bg-white p-4 sm:p-6 shadow-xl",children:[(0,b.jsx)("h2",{id:"dialog-title",className:"text-base sm:text-lg font-semibold text-gray-900",children:d}),(0,b.jsx)("p",{id:"dialog-description",className:"mt-2 text-sm text-gray-600",children:e}),(0,b.jsxs)("div",{className:"mt-4 sm:mt-6 flex flex-col-reverse sm:flex-row sm:justify-end gap-2 sm:gap-3",children:[(0,b.jsx)("button",{ref:l,type:"button",onClick:j,className:"w-full sm:w-auto rounded-lg border border-gray-300 px-4 py-2.5 sm:py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-500 focus-visible:ring-offset-2 active:scale-[0.98]",children:g}),(0,b.jsx)("button",{ref:m,type:"button",onClick:i,className:`w-full sm:w-auto rounded-lg px-4 py-2.5 sm:py-2 text-sm font-medium text-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 active:scale-[0.98] ${{danger:"bg-red-600 hover:bg-red-700 focus:ring-red-500",warning:"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500",info:"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500"}[h]}`,children:f})]})]})]}):null}a.s(["ConfirmDialog",()=>d])},28948,a=>{"use strict";var b=a.i(87924),c=a.i(38246);function d({items:a,onItemClick:d,className:e="",showHomeIcon:f=!0}){return 0===a.length?null:(0,b.jsx)("nav",{className:`flex items-center ${e}`,"aria-label":"Breadcrumb",children:(0,b.jsx)("ol",{className:"flex items-center gap-1 text-sm",children:a.map((e,g)=>{let h=g===a.length-1,i=0===g;return(0,b.jsxs)("li",{className:"flex items-center",children:[!i&&(0,b.jsx)("svg",{className:"mx-1 h-4 w-4 flex-shrink-0 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),h?(0,b.jsxs)("span",{className:"flex items-center gap-1.5 font-medium text-gray-900","aria-current":"page",children:[i&&f&&(0,b.jsx)("svg",{className:"h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),!i&&(0,b.jsx)("svg",{className:"h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})}),(0,b.jsx)("span",{className:"truncate max-w-[200px]",children:e.name})]}):e.href?(0,b.jsxs)(c.default,{href:e.href,className:"flex items-center gap-1.5 rounded px-2 py-1 text-gray-500 transition-colors hover:bg-gray-100 hover:text-gray-700",children:[i&&f&&(0,b.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),(0,b.jsx)("span",{className:"truncate max-w-[150px]",children:e.name})]}):(0,b.jsxs)("button",{onClick:()=>d?.(e,g),className:"flex items-center gap-1.5 rounded px-2 py-1 text-gray-500 transition-colors hover:bg-gray-100 hover:text-gray-700",children:[i&&f&&(0,b.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),(0,b.jsx)("span",{className:"truncate max-w-[150px]",children:e.name})]})]},e.id??"root")})})})}function e(a,b){let c=[{id:null,name:"Root"}];if(!b)return c;let d=[],e=a.find(a=>a.id===b);for(;e;)d.unshift(e),e=e.parent_id?a.find(a=>a.id===e.parent_id):void 0;for(let a of d)c.push({id:a.id,name:a.name});return c}a.s(["Breadcrumbs",()=>d,"buildBreadcrumbsFromPath",()=>e])}];

//# sourceMappingURL=src_12d63c21._.js.map